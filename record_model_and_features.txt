
모델 파라미터 및 피쳐 정리

--------------------------------
TimeSeriesSplit, LGB - 0.75514

2020-03-18 23:42:12.575420
item_id  dept_id  cat_id  store_id  
state_id  year  month  week  day  
weekday  event_name_1  event_type_1  snap_CA  snap_TX  
snap_WI  sell_price  lag_t28  lag_t29  lag_t30  
rolling_mean_t7  rolling_std_t7  rolling_mean_t30  rolling_mean_t90  rolling_mean_t180  
rolling_std_t30  price_change_t1  price_change_t365  rolling_price_std_t7  rolling_price_std_t30  
('num_leaves', 1000)
('colsample_bytree', 0.8)
('subsample', 0.8)
('n_estimators', 2500)
('learning_rate', 0.01)
('n_jobs', -1)
('device', 'cpu')
--------------------------------
LGB - KFold - 0.59797

2020-03-19 16:52:21.762531
item_id  dept_id  cat_id  store_id  
state_id  year  month  week  day  
weekday  event_name_1  event_type_1  snap_CA  snap_TX  
snap_WI  sell_price  lag_t28  lag_t29  lag_t30  
rolling_mean_t7  rolling_std_t7  rolling_mean_t30  rolling_mean_t90  rolling_mean_t180  
rolling_std_t30  price_change_t1  price_change_t365  rolling_price_std_t7  rolling_price_std_t30  
('boosting_type', 'gbdt')
('class_weight', None)
('colsample_bytree', 0.8)
('importance_type', 'split')
('learning_rate', 0.02)
('max_depth', -1)
('min_child_samples', 20)
('min_child_weight', 0.001)
('min_split_gain', 0.0)
('n_estimators', 2500)
('n_jobs', -1)
('num_leaves', 2000)
('objective', None)
('random_state', None)
('reg_alpha', 0.0)
('reg_lambda', 0.0)
('silent', True)
('subsample', 0.8)
('subsample_for_bin', 200000)
('subsample_freq', 0)
('device', 'gpu')
--------------------------------
LGB - KFold - 0.57549
2020-03-20 21:33:54.294536  
item_id  dept_id  cat_id  store_id  
state_id  year  month  week  day  
weekday  event_name_1  event_type_1  snap_CA  snap_TX  
snap_WI  sell_price  lag_t28  lag_t29  lag_t30  
rolling_mean_t7  rolling_std_t7  rolling_mean_t30  rolling_mean_t90  rolling_mean_t180  
rolling_std_t30  price_change_t1  price_change_t365  rolling_price_std_t7  rolling_price_std_t30  
('boosting_type', 'gbdt')
('class_weight', None)
('colsample_bytree', 0.8)
('importance_type', 'split')
('learning_rate', 0.02)
('max_depth', -1)
('min_child_samples', 20)
('min_child_weight', 0.001)
('min_split_gain', 0.0)
('n_estimators', 4000)
('n_jobs', -1)
('num_leaves', 4000)
('objective', None)
('random_state', None)
('reg_alpha', 0.0)
('reg_lambda', 0.0)
('silent', True)
('subsample', 0.8)
('subsample_for_bin', 200000)
('subsample_freq', 0)
('device', 'gpu')
--------------------------------
XGB - KFold - 0.57549
2020-03-21 22:17:37.999284 / 0.76278
item_id  dept_id  cat_id  store_id  
state_id  year  month  week  day  
weekday  event_name_1  event_type_1  snap_CA  snap_TX  
snap_WI  sell_price  
('objective', 'reg:squarederror')
('base_score', 0.5)
('booster', None)
('colsample_bylevel', 1)
('colsample_bynode', 1)
('colsample_bytree', 0.3)
('gamma', 0)
('gpu_id', 0)
('importance_type', 'gain')
('interaction_constraints', None)
('learning_rate', 0.1)
('max_delta_step', 0)
('max_depth', 5)
('min_child_weight', 1)
('missing', nan)
('monotone_constraints', None)
('n_estimators', 10000)
('n_jobs', 0)
('num_parallel_tree', 1)
('random_state', 0)
('reg_alpha', 10)
('reg_lambda', 1)
('scale_pos_weight', 1)
('subsample', 1)
('tree_method', 'gpu_hist')
('validate_parameters', False)
('verbosity', None)
('alpha', 10)
--------------------------------
LGB - KFold - 0.60858
2020-03-22 12:05:54.294536  
item_id  dept_id  cat_id  store_id  
state_id  year  month  week  day  
weekday  event_name_1  event_type_1  snap_CA  snap_TX  
snap_WI  sell_price  lag_t28  lag_t29  lag_t30  
rolling_mean_t7  rolling_std_t7  rolling_mean_t30  rolling_mean_t90  rolling_mean_t180  
rolling_std_t30  price_change_t1  price_change_t365  rolling_price_std_t7  rolling_price_std_t30  
('boosting_type', 'gbdt')
('class_weight', None)
('colsample_bytree', 0.8)
('importance_type', 'split')
('learning_rate', 0.2)
('max_depth', -1)
('min_child_samples', 20)
('min_child_weight', 0.001)
('min_split_gain', 0.0)
('n_estimators', 400)
('n_jobs', -1)
('num_leaves', 400)
('objective', None)
('random_state', None)
('reg_alpha', 0.0)
('reg_lambda', 0.0)
('silent', True)
('subsample', 0.8)
('subsample_for_bin', 200000)
('subsample_freq', 0)
('device', 'gpu')
--------------------------------

2020-03-22 13:47:34.970959 - 0.59960
item_id  dept_id  cat_id  store_id  
state_id  year  month  week  day  
weekday  event_name_1  event_type_1  snap_CA  snap_TX  
snap_WI  sell_price  lag_t28  lag_t29  lag_t30  
rolling_mean_t7  rolling_std_t7  rolling_mean_t30  rolling_mean_t90  rolling_mean_t180  
rolling_std_t30  price_change_t1  price_change_t365  rolling_price_std_t7  rolling_price_std_t30  
('boosting_type', 'gbdt')
('class_weight', None)
('colsample_bytree', 0.8)
('importance_type', 'split')
('learning_rate', 0.2)
('max_depth', -1)
('min_child_samples', 20)
('min_child_weight', 0.001)
('min_split_gain', 0.0)
('n_estimators', 400)
('n_jobs', -1)
('num_leaves', 800)
('objective', None)
('random_state', None)
('reg_alpha', 0.0)
('reg_lambda', 0.0)
('silent', True)
('subsample', 0.8)
('subsample_for_bin', 200000)
('subsample_freq', 0)
('device', 'gpu')
--------------------------------

2020-03-22 15:07:33.497121 0.59846
item_id  dept_id  cat_id  store_id  
state_id  year  month  week  day  
weekday  event_name_1  event_type_1  snap_CA  snap_TX  
snap_WI  sell_price  lag_t28  lag_t29  lag_t30  
rolling_mean_t7  rolling_std_t7  rolling_mean_t30  rolling_mean_t90  rolling_mean_t180  
rolling_std_t30  price_change_t1  price_change_t365  rolling_price_std_t7  rolling_price_std_t30  
('boosting_type', 'gbdt')
('class_weight', None)
('colsample_bytree', 0.8)
('importance_type', 'split')
('learning_rate', 0.2)
('max_depth', -1)
('min_child_samples', 20)
('min_child_weight', 0.001)
('min_split_gain', 0.0)
('n_estimators', 450)
('n_jobs', -1)
('num_leaves', 4000)
('objective', None)
('random_state', None)
('reg_alpha', 0.0)
('reg_lambda', 0.0)
('silent', True)
('subsample', 0.8)
('subsample_for_bin', 200000)
('subsample_freq', 0)
('device', 'gpu')
--------------------------------

2020-03-22 16:21:31.527603 - 0.56821
item_id  dept_id  cat_id  store_id  
state_id  year  month  week  day  
weekday  event_name_1  event_type_1  snap_CA  snap_TX  
snap_WI  sell_price  lag_t28  lag_t29  lag_t30  
rolling_mean_t7  rolling_std_t7  rolling_mean_t30  rolling_mean_t90  rolling_mean_t180  
rolling_std_t30  price_change_t1  price_change_t365  rolling_price_std_t7  rolling_price_std_t30  
('boosting_type', 'gbdt')
('class_weight', None)
('colsample_bytree', 0.8)
('importance_type', 'split')
('learning_rate', 0.2)
('max_depth', -1)
('min_child_samples', 20)
('min_child_weight', 0.001)
('min_split_gain', 0.0)
('n_estimators', 500)
('n_jobs', -1)
('num_leaves', 4000)
('objective', None)
('random_state', None)
('reg_alpha', 0.0)
('reg_lambda', 0.0)
('silent', True)
('subsample', 0.8)
('subsample_for_bin', 200000)
('subsample_freq', 0)
('device', 'gpu')
--------------------------------

2020-03-22 20:03:51.781702 - 0.57434

오버피팅 시키려고 n_estimators를 5000까지 늘렸었음
대부분 800 전후에서 종료됨.
0.57434 - 오버피팅되서 점수 낮아짐을 확인

item_id  dept_id  cat_id  store_id  
state_id  year  month  week  day  
weekday  event_name_1  event_type_1  snap_CA  snap_TX  
snap_WI  sell_price  lag_t28  lag_t29  lag_t30  
rolling_mean_t7  rolling_std_t7  rolling_mean_t30  rolling_mean_t90  rolling_mean_t180  
rolling_std_t30  price_change_t1  price_change_t365  rolling_price_std_t7  rolling_price_std_t30  
('boosting_type', 'gbdt')
('class_weight', None)
('colsample_bytree', 0.8)
('importance_type', 'split')
('learning_rate', 0.2)
('max_depth', -1)
('min_child_samples', 20)
('min_child_weight', 0.001)
('min_split_gain', 0.0)
('n_estimators', 5000)
('n_jobs', -1)
('num_leaves', 4000)
('objective', None)
('random_state', None)
('reg_alpha', 0.0)
('reg_lambda', 0.0)
('silent', True)
('subsample', 0.8)
('subsample_for_bin', 200000)
('subsample_freq', 0)
('device', 'gpu')
--------------------------------

2020-03-23 12:18:57.805641 - 0.56696
item_id  dept_id  cat_id  store_id  
state_id  year  month  week  day  
weekday  event_name_1  event_type_1  snap_CA  snap_TX  
snap_WI  sell_price  lag_t28  lag_t29  lag_t30  
rolling_mean_t7  rolling_std_t7  rolling_mean_t30  rolling_mean_t90  rolling_mean_t180  
rolling_std_t30  price_change_t1  price_change_t365  rolling_price_std_t7  rolling_price_std_t30  
('boosting_type', 'gbdt')
('class_weight', None)
('colsample_bytree', 0.8)
('importance_type', 'split')
('learning_rate', 0.2)
('max_depth', -1)
('min_child_samples', 20)
('min_child_weight', 0.001)
('min_split_gain', 0.0)
('n_estimators', 600)
('n_jobs', -1)
('num_leaves', 4000)
('objective', None)
('random_state', None)
('reg_alpha', 0.0)
('reg_lambda', 0.0)
('silent', True)
('subsample', 0.8)
('subsample_for_bin', 200000)
('subsample_freq', 0)
('device', 'gpu')
--------------------------------

2020-03-23 15:11:58.662533

모든 주차로 train시키는 것이 아닌,
test셋과 똑같은 주차로만 train 시킴.(각년도 4~5월) - 0.66251

item_id  dept_id  cat_id  store_id  
state_id  year  month  week  day  
weekday  event_name_1  event_type_1  snap_CA  snap_TX  
snap_WI  sell_price  lag_t28  lag_t29  lag_t30  
rolling_mean_t7  rolling_std_t7  rolling_mean_t30  rolling_mean_t90  rolling_mean_t180  
rolling_std_t30  price_change_t1  price_change_t365  rolling_price_std_t7  rolling_price_std_t30  
('boosting_type', 'gbdt')
('class_weight', None)
('colsample_bytree', 0.8)
('importance_type', 'split')
('learning_rate', 0.2)
('max_depth', -1)
('min_child_samples', 20)
('min_child_weight', 0.001)
('min_split_gain', 0.0)
('n_estimators', 600)
('n_jobs', -1)
('num_leaves', 4000)
('objective', None)
('random_state', None)
('reg_alpha', 0.0)
('reg_lambda', 0.0)
('silent', True)
('subsample', 0.8)
('subsample_for_bin', 200000)
('subsample_freq', 0)
('device', 'gpu')
--------------------------------

2020-03-23 15:48:16.573343 - 0.72705 - 오히려 과소적합되어있음을 확인
item_id  dept_id  cat_id  store_id  
state_id  year  month  week  day  
weekday  event_name_1  event_type_1  snap_CA  snap_TX  
snap_WI  sell_price  lag_t28  lag_t29  lag_t30  
rolling_mean_t7  rolling_std_t7  rolling_mean_t30  rolling_mean_t90  rolling_mean_t180  
rolling_std_t30  price_change_t1  price_change_t365  rolling_price_std_t7  rolling_price_std_t30  
('boosting_type', 'gbdt')
('class_weight', None)
('colsample_bytree', 0.8)
('importance_type', 'split')
('learning_rate', 0.01)
('max_depth', -1)
('min_child_samples', 20)
('min_child_weight', 0.001)
('min_split_gain', 0.0)
('n_estimators', 400)
('n_jobs', -1)
('num_leaves', 4000)
('objective', None)
('random_state', None)
('reg_alpha', 0.0)
('reg_lambda', 0.0)
('silent', True)
('subsample', 0.8)
('subsample_for_bin', 200000)
('subsample_freq', 0)
('device', 'gpu')
--------------------------------

2020-03-23 16:29:16.467616 - 0.79413 n_estimators를 조절해야하는데 실수로 num_leaves를 조절해버림..
item_id  dept_id  cat_id  store_id  
state_id  year  month  week  day  
weekday  event_name_1  event_type_1  snap_CA  snap_TX  
snap_WI  sell_price  lag_t28  lag_t29  lag_t30  
rolling_mean_t7  rolling_std_t7  rolling_mean_t30  rolling_mean_t90  rolling_mean_t180  
rolling_std_t30  price_change_t1  price_change_t365  rolling_price_std_t7  rolling_price_std_t30  
('boosting_type', 'gbdt')
('class_weight', None)
('colsample_bytree', 0.8)
('importance_type', 'split')
('learning_rate', 0.01)
('max_depth', -1)
('min_child_samples', 20)
('min_child_weight', 0.001)
('min_split_gain', 0.0)
('n_estimators', 400)
('n_jobs', -1)
('num_leaves', 600)
('objective', None)
('random_state', None)
('reg_alpha', 0.0)
('reg_lambda', 0.0)
('silent', True)
('subsample', 0.8)
('subsample_for_bin', 200000)
('subsample_freq', 0)
('device', 'gpu')
--------------------------------

2020-03-23 22:12:08.574824 - 0.69743
item_id  dept_id  cat_id  store_id  
state_id  year  month  week  day  
weekday  event_name_1  event_type_1  snap_CA  snap_TX  
snap_WI  sell_price  lag_t28  lag_t29  lag_t30  
rolling_mean_t7  rolling_std_t7  rolling_mean_t30  rolling_mean_t90  rolling_mean_t180  
rolling_std_t30  price_change_t1  price_change_t365  rolling_price_std_t7  rolling_price_std_t30  
('boosting_type', 'gbdt')
('class_weight', None)
('colsample_bytree', 0.8)
('importance_type', 'split')
('learning_rate', 0.01)
('max_depth', -1)
('min_child_samples', 20)
('min_child_weight', 0.001)
('min_split_gain', 0.0)
('n_estimators', 400)
('n_jobs', -1)
('num_leaves', 4000)
('objective', None)
('random_state', None)
('reg_alpha', 0.0)
('reg_lambda', 0.0)
('silent', True)
('subsample', 0.8)
('subsample_for_bin', 200000)
('subsample_freq', 0)
('device', 'gpu')
--------------------------------
c1 = all_df['week'] == 13
c2 = all_df['week'] == 14
c3 = all_df['week'] == 15
c4 = all_df['week'] == 16

c5 = all_df['week'] == 17
c6 = all_df['week'] == 18
c7 = all_df['week'] == 19
c8 = all_df['week'] == 20
all_df17_20 = all_df[c1 | c2 | c3 | c4 | c5 | c6 | c7 | c8]

2020-03-24 23:02:28.058348 - 0.57291
item_id  dept_id  cat_id  store_id  
state_id  year  month  week  day  
weekday  event_name_1  event_type_1  snap_CA  snap_TX  
snap_WI  sell_price  lag_t28  lag_t29  lag_t30  
rolling_mean_t7  rolling_std_t7  rolling_mean_t30  rolling_mean_t90  rolling_mean_t180  
rolling_std_t30  price_change_t1  price_change_t365  rolling_price_std_t7  rolling_price_std_t30  
('boosting_type', 'gbdt')
('class_weight', None)
('colsample_bytree', 0.8)
('importance_type', 'split')
('learning_rate', 0.1)
('max_depth', -1)
('min_child_samples', 20)
('min_child_weight', 0.001)
('min_split_gain', 0.0)
('n_estimators', 400)
('n_jobs', -1)
('num_leaves', 4000)
('objective', None)
('random_state', None)
('reg_alpha', 0.0)
('reg_lambda', 0.0)
('silent', True)
('subsample', 0.8)
('subsample_for_bin', 200000)
('subsample_freq', 0)
('device', 'gpu')
--------------------------------

2020-03-25 00:40:49.735699 - 0.57904
item_id  dept_id  cat_id  store_id  
state_id  year  month  week  day  
weekday  event_name_1  event_type_1  snap_CA  snap_TX  
snap_WI  sell_price  lag_t28  lag_t29  lag_t30  
rolling_mean_t7  rolling_std_t7  rolling_mean_t30  rolling_mean_t90  rolling_mean_t180  
rolling_std_t30  price_change_t1  price_change_t365  rolling_price_std_t7  rolling_price_std_t30  
('boosting_type', 'gbdt')
('class_weight', None)
('colsample_bytree', 0.8)
('importance_type', 'split')
('learning_rate', 0.1)
('max_depth', -1)
('min_child_samples', 20)
('min_child_weight', 0.001)
('min_split_gain', 0.0)
('n_estimators', 450)
('n_jobs', -1)
('num_leaves', 4000)
('objective', None)
('random_state', None)
('reg_alpha', 0.0)
('reg_lambda', 0.0)
('silent', True)
('subsample', 0.8)
('subsample_for_bin', 200000)
('subsample_freq', 0)
('device', 'gpu')
--------------------------------
2020-03-25 01:21:16   -  0.57306
['item_id', 'dept_id', 'cat_id', 'store_id', 'state_id', 'year',
 'month', 'week', 'day', 'weekday', 'event_name_1', 'event_type_1', 'snap_CA',
 'snap_TX', 'snap_WI', 'sell_price', 'lag_t28', 'lag_t29', 'lag_t30', 'rolling_mean_t7', 'rolling_std_t7',
 'rolling_mean_t30', 'rolling_mean_t90', 'rolling_mean_t180', 'rolling_std_t30', 'price_change_t1', 'price_change_t365',
 'rolling_price_std_t7', 'rolling_price_std_t30'] 
 
 {'boosting_type': 'gbdt',
 'class_weight': None,
 'colsample_bytree': 0.8,
 'importance_type': 'split',
 'learning_rate': 0.1,
 'max_depth': -1,
 'min_child_samples': 20,
 'min_child_weight': 0.001,
 'min_split_gain': 0.0,
 'n_estimators': 400,
 'n_jobs': -1,
 'num_leaves': 2048,
 'objective': None,
 'random_state': None,
 'reg_alpha': 0.0,
 'reg_lambda': 0.0,
 'silent': True,
 'subsample': 0.8,
 'subsample_for_bin': 200000,
 'subsample_freq': 0,
 'device': 'gpu'}
 
 ['--------------------',
 '1 번째 fold',
 12.029259188737758, 10.719479550684479, 9.649410871634625, 8.756101509738865, 8.039100948289509,
 7.452457746088355, 6.978489571531045, 6.588808661160134, 6.26069530808302, 5.97600104387832, 5.744032366594032,
 5.545467686867126, 5.395628565630295, 5.264060131016084, 5.156498889704569, 5.066191072473821, 4.989946058359139,
 4.924329417005036, 4.869974647447694, 4.823445487350167, 4.783796736594235, 4.743724343592539, 4.704406121199684,
 4.671228646549714, 4.643642516479674, 4.612781416259497, 4.583940224730351, 4.56002145586222, 4.541122417300778,
 4.518864655167622, 4.505041117880599, 4.493431545114956, 4.476768185250567, 4.467349259909025, 4.458172888074395, 4.446323259695005, 4.431687291195352, 4.420044488686646, 4.4070988425433235, 4.38790133508896, 4.380464666876317, 4.368128445234328, 4.356071206398755, 4.3511060719135495, 4.342896909407963, 4.3296940282357, 4.323116565855379, 4.31898015061349, 4.31188465098615, 4.296224114493204, 4.291495292299828, 4.287387869668612, 4.284165609138307, 4.281359739563178, 4.278724521580558,
 4.275673823862892, 4.269162079910714, 4.2655099022120195, 4.254166688658409, 4.250130109247434, 4.24143814441185, 4.236040828993705, 4.234437484883756, 4.230354567793032, 4.228940622005676, 4.218289131558349, 4.207199343205997, 4.198340314555372, 4.194597564988223, 4.183555599709904, 4.182408443558665, 4.177414409611479,
 4.170767447935026, 4.166719303782744, 4.166418129586613, 4.157862420976672, 4.152850900837398, 4.153042722817405, 4.150895643085136, 4.149758626050436, 4.143434451598609, 4.142557352260046, 4.140306381494547, 4.136340478146643, 4.136248783711107, 4.130668819229496,
 4.1296350850020405, 4.129564142504432, 4.125197656943355, 4.124843764832337, 4.12389712306119, 4.1172809688761465, 4.115718286564345, 4.115583117612036, 4.113277373386323, 4.110551318875603, 4.110153473998733, 4.109138180942155,
 4.10798042505704, 4.107456748884155, 4.105491556822483, 4.103335490441038, 4.1028505265884245, 4.102486739999092, 4.1000344122340495, 4.099457322449935, 4.0990094676398, 4.097011383277869, 4.097554060722328, 4.095734130924726, 4.095242746618914, 4.094066094533748, 4.093949091808682, 4.094395843212094, 4.094627524417162, 4.092258343277667, 4.091512836435389, 4.091850599177807, 4.090258400355706,
 4.089966601774803, 4.088660678614454, 4.083909879330218, 4.082217394673922, 4.081713702760301, 4.078731622097154, 4.077618052314175, 4.076957581520331, 4.075226613084056, 4.075460100412233,
 4.075698908988541, 4.076085299169391, 4.07522359710776, 4.075862915253002, 4.076517760023292, 4.076412474874374, 4.0751858869231485, 4.074024075481559, 4.072623938303079, 4.0726137745103,
 4.072957784095889, 4.072985451522221, 4.070511458236807, 4.06748444496982, 4.064424538216241, 4.061716111196139, 4.06122007550579, 4.060701049852784, 4.06045279211785, 4.059868323697365, 4.06046585088668,
 4.058923987433708, 4.056705075889338, 4.056578647404411, 4.056365509783421, 4.056718265465591, 4.0565180287185445, 4.055076497424499, 4.055088085325625, 4.0542450876091065, 4.054595091110376, 4.0536698833744635, 4.053795769694081, 4.053735321821582, 4.053520016505863, 4.053469685739147,
 4.053749891838847, 4.051961372556665, 4.04923283536083, 4.0478020895577895, 4.047981991281345, 4.047590537764056, 4.047700706333334, 4.047564295089328, 4.047869819936749, 4.048012067912341, 4.046944942282151, 4.045900364036148, 4.045812894432325, 4.045997040935254, 4.044603272285393, 4.044743308531542, 4.044710778551598, 4.042783796176565, 4.042634190928895,
 4.041046435051894, 4.040594436711247, 4.040526436014342, 4.039376674569376, 4.038942492663871, 4.038461262222408, 4.037627309137172, 4.03605031658727, 4.035578074753815, 4.034953961905629, 4.034929562915437, 4.035046825691315, 4.034966393397668, 4.034197116058873, 4.034294741113469, 4.034407623681791, 4.034265263317004, 4.034029578395273, 4.033849227925793, 4.033739957639937, 4.033806685904482, 4.033409166342963,
 4.031824532324884, 4.03181346865745, 4.0284434808852385, 4.0284638331382485, 4.028471131326831, 4.028198683067076, 4.027351808301463, 4.023795662171142, 4.0237771708446255, 4.023554161231422, 4.023559171741822, 4.022656413410111, 4.0224393591036645, 4.022683418094208, 4.020777704731645, 4.020506215948079,
 4.020185719218335, 4.020338228099444, 4.019972241335935, 4.018679685860543, 4.016881253626663, 4.015941211192358, 4.015540886448229, 4.01565105244621, 4.015157367539753, 4.014903212646495, 4.014903024565371, 4.014241263202459, 4.01481697298369, 4.015236402648531, 4.014920867551185, 4.0138705889820985, 4.01392333608939, 4.014088145275153, 4.013825375843382, 4.013845512414337, 4.013920278529897,
 4.01429009265057, 4.013720071659707, 4.013564167289298, 4.013716193687778, 4.0135461010994025, 4.012994659308244, 4.01330806770953, 4.01272985402325, 4.0126435106564475, 4.011221857582132, 4.011117586715685, 4.010967365764574, 4.010955152930739, 4.0103562678385405, 4.010570261993264, 4.010348106334708,
 4.009487298004524, 4.009600959153506, 4.0091508913214575, 4.009317755440764, 4.009290867830538, 4.0087162080024985, 4.00853225904741, 4.008208641225872, 4.008249516659807, 4.0082310781880715, 4.0079758101749405, 4.008337806795872, 4.007974692433997, 4.007963134016107, 4.00722829479499, 4.007759695955898, 4.007014162887131,
 4.006800860726925, 4.006999154903327, 4.007198017562987, 4.007059877262631, 4.006928822030162, 4.006163850821239, 4.004167924408422, 4.004069637501755, 4.004197192737769, 4.004536245857088, 4.004340478908112, 4.003531369716541, 4.003606118576067, 4.00321705235876, 4.003229172141911, 4.003210446042692,
 4.003128054551825, 4.0026747161021685, 4.003037893593306, 4.0027698739708, 4.002959889810582, 4.00235119717872, 4.00233882813739, 4.002235528319593, 4.002404956411251, 4.002632597508581, 4.002848179785432, 4.0023989000950095, 4.001756237838593, 4.002049635360873, 4.0025161994374, 4.002580607966051,
 4.002618632130017, 4.002823719536429, 4.002021595321024, 4.002069087039689, 4.002375033648524, 4.00216578254458, 4.001761481268178, 4.001745249323917, 4.001758330815749, 4.001690369883755, 4.001100366236922, 4.0009878534993, 4.000500846342583, 4.000475455815127, 4.000697258794515, 4.000675108513011, 4.000630863458505, 4.001025987877031, 4.00117024944627, 4.001265819281048, 4.001366349260175,
 4.000900620383837, 4.000814846725614, 4.000905004770672, 4.000278599775019, 4.000329715398999, 4.000277861698798, 4.000366401029879, 3.9987849375712243, 3.997977311911387, 3.997651837384337, 3.997812936319237, 3.99784287720797, 3.9978510872955066, 3.9979658188450484, 3.9977030037759054, 3.9973770197143494, 3.9975454000516506, 3.997261774453122, 3.9958548646097003, 3.9958168950960355, 3.996374486601733,
 3.9950888726728424, 3.993790718972298, 3.9930114852059093, 3.992893061441926, 3.9928635077556986, 3.9923713263104967, 3.9921775350249127, 3.990713702109972, 3.9898558336518244, 3.9899839101521146, 3.9900584393239815, 3.9898624194454633, 3.9897756629130683, 3.989429472264, 3.989444235133974, 3.989207096770463, 3.9893018620199103, 3.9893504599379663, 3.9892597478661522, 3.9885404884712274,
 3.9879125947273093, 3.98782736954361, 3.9879904787450466, 3.987789561916387, 3.9877344532354, 3.9878426988700113, 3.9876953627819742, 3.9870620177770886, 3.9870580065078443, 3.987109017145174, 3.987163632208617, 3.9873530275874756, 3.9867661041888174, 3.98647573763255, 3.9864646844155214, 3.9857963495222157, 3.985705872387329, 3.985684252612573, 3.9857191051309413, 3.9855033218604006,
 3.9854403499721185, 3.9855536003669307, 3.9856486932305217, 3.9855985851075433, 3.9854996880375135, 3.985680309063979, 3.985662717443155, 3.9857913348466005, 3.98589850601731, 3.986083528929933,

--------------------
2020-03-25 01:44:42.398005 - 0.56869

굉장히 유의미하다고 본다. 데이터는 2/13  (8주 / 52주) 로 줄었는데
정확도는 이제 거의 비슷해짐. 여기서부터 피쳐를 추가하는 식으로 작업을 해야겠다. 모델 train 속도도 훨씬 빨라짐.

item_id  dept_id  cat_id  store_id  state_id  year  month  week  day  
weekday  event_name_1  event_type_1  snap_CA  snap_TX  snap_WI  sell_price  lag_t28  lag_t29  lag_t30  
rolling_mean_t7  rolling_std_t7  rolling_mean_t30  rolling_mean_t90  rolling_mean_t180  rolling_std_t30  price_change_t1  price_change_t365  rolling_price_std_t7  rolling_price_std_t30  
('boosting_type', 'gbdt')
('class_weight', None)
('colsample_bytree', 0.8)
('importance_type', 'split')
('learning_rate', 0.1)
('max_depth', -1)
('min_child_samples', 20)
('min_child_weight', 0.001)
('min_split_gain', 0.0)
('n_estimators', 400)
('n_jobs', -1)
('num_leaves', 2048)
('objective', None)
('random_state', None)
('reg_alpha', 0.0)
('reg_lambda', 0.0)
('silent', True)
('subsample', 0.8)
('subsample_for_bin', 200000)
('subsample_freq', 0)
('device', 'gpu')
11.759713105142414  10.462374507646725  9.427423766850062  8.555125734793853  7.85922437940718  7.288216843459502  6.8280820079037925  6.449332962963806  6.134143578651336  5.864784503122146  5.645402593140067  5.456973714929176  5.313291620394311  5.188394350788444  5.084901037602592  4.9971230416335  4.924375126913179  4.860723868390706  4.812063981828502  
4.773025706366728  4.736405675826197  4.70059060854503  4.667634148609756  4.639282125408634  4.6157957140579216  4.593501263116405  4.556514242790125  4.538017477201465  4.5187671975884305  4.496537053480895  4.477865328861987  4.464189981870377  4.450408841578307  4.440324871000411  4.432038898489789  4.420110511364022  4.405044490335491  4.390177136291065  4.381877576619264  
4.368109407990759  4.3601923180598074  4.3526750425679985  4.344032096227365  4.337431690275257  4.332073092639857  4.319956930168917  4.314260780035958  4.312183335772371  4.306741442585193  4.293137544873124  4.28514253530337  4.274112441413919  4.271962987771563  4.271110082886028  4.268681516700165  4.25347534559646  4.246934013026444  4.245181209012507  4.231714729014436  
4.229604685735997  4.221655117844561  4.219054116907425  4.217256345867415  4.213784985794119  4.212082809354763  4.199070147849825  4.187571047575863  4.1837514220782905  4.180206724997121  4.166624223960965  4.165013290185197  4.162764594461652  4.160914524319257  4.157681636675392  4.147982613880962  4.147035143849448  4.1415003690338255  4.1408363762708404  4.136969158283431  
4.135243863310288  4.131031111406348  4.1278437790166675  4.125412179932577  4.121420551038684  4.120884003257517  4.113095306857793  4.11354911697572  4.11251552997097  4.108500213141436  4.106173339291803  4.105360474278477  4.105314488352032  4.102830790992612  4.10274879305119  4.101694073789756  4.098010327792462  4.096555132085096  4.092455440624593  4.0905069767937  
4.087545098940856  4.084222434943568  4.0842639689511575  4.083032593477936  4.0799024366113965  4.077032851406997  4.076809365509717  4.074717929068709  4.0728444293895665  4.073285574248219  4.072885269224082  4.072893254789865  4.071872927723142  4.070920422213177  4.070078628828694  4.068257764671846  4.067821028079875  4.064460939455148  4.063338119159578  4.062908299319405  
4.056105930990658  4.053408696422536  4.051748646470587  4.051275064793169  4.050671923178907  4.050158162742368  4.046825711933691  4.044006797158395  4.0439013557659  4.042691220840701  4.042569839055631  4.04243530230304  4.043089702740345  4.043720309145882  4.04284304518883  4.042503945382243  4.040812925210635  4.0406532905815284  4.040557234359179  4.040620718974375  
4.039732146236066  4.039464130279006  4.037926639800087  4.036811340629354  4.034025747928532  4.031375285788256  4.030620977590365  4.03017567246387  4.029771298301181  4.028911785276618  4.028394595419487  4.027808531476116  4.02619686946089  4.023420076043673  4.02146553479221  4.0196180848644385  4.019753075524893  4.0170184435671485  4.0173808111952045  4.0178221018103235  
4.0173295108215346  4.0159447240762915  4.01605136312215  4.0151516546149235  4.015667031308675  4.015678664744463  4.014624132718639  4.014239725128474  4.014349073820584  4.012862190291216  4.012336571343285  4.012105290015917  4.012092611431283  4.012102453350504  4.012083301807889  4.009387382368579  4.009574345616532  4.008692108067986  4.008590753799338  4.008485990377773  
4.008024386370686  4.004267623105147  4.004446359601253  4.003115162711728  4.003279357785456  4.001080163119841  4.001077746754454  4.000907453176647  3.999798598646896  4.000007953807482  3.9998302057159854  3.99918380431243  3.999370750743786  3.9988885380111925  3.997946465632354  3.997925340769698  3.997572137311859  3.997692955183865  3.99740976924752  3.9947642783129957  
3.9945097008336625  3.994567399030122  3.9940300581819663  3.9934901427778406  3.9920819613709932  3.99187490396992  3.9902589232238133  3.9903148802815562  3.989385519289724  3.9888768290795404  3.9884614581808027  3.987888603095111  3.9877760750880613  3.9878653484007245  3.9880427037685373  3.987882408585805  3.986749867184649  3.9865527541064245  3.9854705669497523  3.9856251881808413  
3.98561991098491  3.985690026263125  3.9847928529553673  3.984555740337202  3.984059094523119  3.983713004946015  3.983602663594041  3.9834408080298975  3.9829476905221926  3.9829869575035306  3.9828953662701885  3.9829629579653556  3.9819545075675644  3.981627487802431  3.9816412568899664  3.981653276485103  3.9819002620328665  3.9803203104766243  3.9798389849103453  3.9799324780865866  
3.9800425568220517  3.9801251689045647  3.980421835121302  3.9804843989319667  3.980787447360709  3.980123968017899  3.97859859761032  3.978780624997226  3.978170158960212  3.9771125569444505  3.977195491202217  3.9769584725772873  3.974649759532211  3.973802499044158  3.9737476036456205  3.973367717099124  3.9707808125072876  3.970832375541433  3.9705016947420995  3.969153142784686  
3.9689556899674883  3.9680543466142915  3.9653902011085838  3.9654025407452393  3.96513195814111  3.9654328350512427  3.9655942254799577  3.9655685346007994  3.965756510058429  3.9658339808860448  3.9658788673035947  3.965755262991144  3.966270513460971  3.9664553024623705  3.9649405203282133  3.965132217238255  3.9654188163583375  3.9654251195370005  3.9655177727105184  3.964046133754  
3.964197162236206  3.963128293408453  3.9630410901872435  3.9602822169234084  3.960430423190082  3.960304116490064  3.9603694422303195  3.9594990304120166  3.9581673471590957  3.9574074033902837  3.9573859808921568  3.9576279725299304  3.957301209616019  3.9568399847606566  3.9565054815028624  3.9557159703177396  3.9549944190417996  3.954835686020192  3.9542038059547715  3.9539546528168694  
3.9538870144710594  3.9537061454510805  3.9536329976990916  3.9539637681283413  3.953916923578776  3.9537850669600654  3.9529524022996694  3.952823001721889  3.9528521304235125  3.9522346977908804  3.951991203399997  3.95182455589466  3.9517218165339383  3.9519247162278637  3.951600434690158  3.9503315896474027  3.9500074906372014  3.9493853767201395  3.9487681410455076  3.9486618164223053  
3.948276188197187  3.9479264445649234  3.947746241132103  3.947565272757334  3.947492622499852  3.9477840236450366  3.9472479874746758  3.9473983218374182  3.947429402216896  3.9467844473279787  3.9461324374530293  3.9460574114233378  3.9459778193722523  3.9454936690424827  3.9454005305589948  3.94562083511161  3.945102428131971  3.9447430715444534  3.9444608564528623  3.9442344175079738  
3.944220843289682  3.944305858078062  3.943808078577235  3.9439498408883376  3.9437919213987445  3.94373559195056  3.943234945311021  3.943038542532297  3.9425308956053495  3.942414675761009  3.942173119850754  3.941443256241735  3.9415545426181264  3.9415071749650457  3.9409450994226947  3.9407099967407273  3.9405504272489447  3.9406117089323756  3.940262842988367  3.9403536603820446  
3.9403930715285083  3.940276149480303  3.940120840928265  3.940123076992581  3.940160579357251  3.939911849061932  3.9397655564302863  3.9398977050056936  3.93989792829331  3.9400814162730264  3.940331131273312  3.940065706155601  3.9403446273203033  3.9398168860301093  3.9397609422423145  3.9397133146091785  3.9397366082433014  3.9398102679473923  3.9395621923602353  3.9391441075307685  
3.9392400587916994  3.939140232016072  3.939031700933844  3.9389956858529476  3.939054929185361  3.9385182173511413  3.9374837231809705  3.9372547195069427  3.937251155326636  3.9371574129156937  3.9365115816536993  3.9363940125160166  3.936282596524423  3.936289931757252  3.936213867355716  3.936183847925741  3.935899855877413  3.935680004898306  3.9349745734689465  3.9347516570483703  
3.9347289605286924 
 --------------------------------
2020-03-25 02:30:15.668759 - 0.63846
확실히 과적합됨을 확인할 수 있음

item_id  dept_id  cat_id  store_id  state_id  year  month  week  day  
weekday  event_name_1  event_type_1  snap_CA  snap_TX  snap_WI  sell_price  lag_t28  lag_t29  lag_t30  
rolling_mean_t7  rolling_std_t7  rolling_mean_t30  rolling_mean_t90  rolling_mean_t180  rolling_std_t30  price_change_t1  price_change_t365  rolling_price_std_t7  rolling_price_std_t30  
lag_t24  lag_t25  lag_t26  lag_t27  rolling_mean_t60  rolling_std_t60  
('boosting_type', 'gbdt')
('class_weight', None)
('colsample_bytree', 0.8)
('importance_type', 'split')
('learning_rate', 0.1)
('max_depth', -1)
('min_child_samples', 20)
('min_child_weight', 0.001)
('min_split_gain', 0.0)
('n_estimators', 400)
('n_jobs', -1)
('num_leaves', 2048)
('objective', None)
('random_state', None)
('reg_alpha', 0.0)
('reg_lambda', 0.0)
('silent', True)
('subsample', 0.8)
('subsample_for_bin', 200000)
('subsample_freq', 0)
('device', 'gpu')
11.829833634860824  10.546370102654437  9.507746808951174  8.66424483946897  7.962201235452505  7.389846455804063  6.922372581012834  6.5345164172865  6.222626950381021  5.969612334246473  5.76084710472015  5.58398857343533  5.4308919347616  5.305800786704105  5.202706624891586  5.102249906466341  5.032024820370321  4.974466352688246  4.923110664931839  
4.874337286384274  4.8357495395525385  4.8007957564167  4.769656285647138  4.745738966604448  4.721991243034985  4.7044759491993196  4.687305078140836  4.663529929473771  4.637936814294477  4.617953934138952  4.608122290853324  4.597308406314141  4.584235877763769  4.574650546807549  4.568602039703823  4.556938718583508  4.5472449714027245  4.538033156966453  4.530521331416844  
4.521642706913332  4.507347518348445  4.504836291867944  4.4941647961201  4.47616304246971  4.4728478910408125  4.460266491833073  4.449690041577564  4.4463512435882855  4.437727803188135  4.4300344763832085  4.423565072493689  4.4192492174438485  4.4121592939948195  4.410603522904746  4.397776286624568  4.384216505841587  4.375325749712732  4.359361835475671  4.354194692178408  
4.351789401174003  4.344619766550999  4.343706293137272  4.331047472308889  4.318837312504838  4.312827666118114  4.310789453048846  4.3044398364889  4.298723976678258  4.293924179781794  4.289701099361693  4.288799384089756  4.2849351601715115  4.280917287457258  4.278652428723029  4.274360448942394  4.267979764213944  4.267680970268054  4.264887126973726  4.263293258410069  
4.263607647332135  4.254954286518288  4.2543202845142325  4.252087658336682  4.249672335413523  4.244657741069647  4.244047720405749  4.243369170345802  4.24142646190882  4.240582811046098  4.237648515740993  4.235683937850644  4.228603310579356  4.228324305748172  4.227007573138124  4.226469326143445  4.222690959447664  4.221745752515925  4.221203194366648  4.21795651504976  
4.21830716100278  4.217421176078592  4.215775403512576  4.211666271939441  4.211075129255709  4.2100861284453295  4.208361237270766  4.2070453823963625  4.2061818003871965  4.199259061803581  4.198998099581852  4.19699522583855  4.195210614981883  4.192607878851252  4.192405672552267  4.192267183840916  4.191694660375814  4.188653016727914  4.187371846556728  4.185540167828653  
4.182090594226934  4.181156862358091  4.180742214259372  4.1804510358783045  4.1762150009836665  4.175871024494087  4.17537503128144  4.174404268092227  4.174440299588215  4.174590564706053  4.169907357057216  4.169949697422609  4.169655349075084  4.167449498960475  4.166112161324909  4.165704823362988  4.163142764697524  4.1626493913428195  4.161189396348792  4.1610150048094585  
4.161049757631729  4.16050617382857  4.1605289441619515  4.158270107919369  4.157337686527929  4.1571396112646815  4.156701687119222  4.155697103721525  4.155697282050253  4.155761284042254  4.155554681173376  4.154472068678742  4.153992270588078  4.151898382665769  4.150852042973382  4.15105493371635  4.1496151182634105  4.149489054208284  4.148698188741346  4.148776699146804  
4.144922474960311  4.144902075011978  4.144962028271691  4.144473155398706  4.144296071328348  4.144119941724707  4.14397680941463  4.142526387807928  4.141990387037421  4.14163116969276  4.1416547366626615  4.138304697654806  4.137583356062649  4.1376294841309535  4.137015572045799  4.136867586541799  4.136141685182439  4.136027652591503  4.135482306877207  4.13456303045263  
4.13327703578638  4.132909827194015  4.130601835269316  4.130224459202271  4.130011365772512  4.126772450884818  4.126560636906625  4.126483598386872  4.126711599858157  4.125005005352141  4.124926195217479  4.124542449765528  4.124621578391774  4.124531665565166  4.123298570159176  4.122678462390845  4.121080318440062  4.1209742365202855  4.121381802164739  4.121369628427986  
4.120806610146835  4.11891647428811  4.117930856092225  4.117613012808517  4.11759099256566  4.117539946165876  4.11749135205511  4.117491920427557  4.1161609635122565  4.116308389558358  4.115626544781608  4.114605640233802  4.114175865512791  4.11273040988031  4.111364528267195  4.111444680704921  4.111584708635765  4.111333237188216  4.111001454082377  4.111199088989206  
4.11095144574485  4.109006840786354  4.109073717215433  4.108580761327549  4.107842029540839  4.10782431365086  4.107852797401779  4.1070758379835235  4.107151817448031  4.107139046245363  4.106495159483246  4.106508338377549  4.104033585237198  4.103614973775357  4.102736175629167  4.102745758250552  4.10266235268433  4.1018216102367075  4.101657054830104  4.100495966349257  
4.100625677519366  4.100288391537928  4.099988087823024  4.100265162648965  4.100164221937808  4.1002464735917465  4.100113115611911  4.098750991170541  4.097558054993227  4.0970565230723315  4.097114380792457  4.097209965659444  4.097309232375737  4.097343533370217  4.097437957749729  4.09633668847007  4.095997468974236  4.095750623315087  4.09418583493885  4.094367227787774  
4.09436294085398  4.094281709770309  4.093641693938719  4.092939848157471  4.0926196128993935  4.09250043098838  4.09266703568895  4.092594332486573  4.092584364192541  4.092375073508052  4.092082580548509  4.092123870170817  4.092225963825473  4.091607843004465  4.0918153068165815  4.091132554399111  4.091231494906249  4.091051597870899  4.091181429198003  4.0910312501772745  
4.090729476601735  4.090967047360099  4.08920304269243  4.089371720510858  4.088865807781974  4.088599527686979  4.088468004467694  4.087797831728402  4.08744531283653  4.087586322919583  4.0866167233744335  4.08674618539947  4.086603548946974  4.08670541251275  4.085306540577836  4.0851923705179525  4.084997179631626  4.0848645896445435  4.084695927320903  4.084621153126598  
4.083562772807905  4.0833125510229324  4.083495943852111  4.083395523460729  4.08286318144897  4.082684613607558  4.082860212001857  4.082384552832263  4.081648478992959  4.081504125872105  4.079974040094932  4.080130891761031  4.080106007291449  4.0801577019531585  4.080069090183915  4.079622693460064  4.079506733367148  4.077712350789097  4.077740479685254  4.077477513931865  
4.077418315415239  4.077487177582036  4.0773421195133785  4.077375102361346  4.077471569210515  4.076978507067295  4.076610095891936  4.076580864388546  4.0755421124935465  4.07557864317923  4.07566461870753  4.075603321597815  4.075659907960478  4.074734895127505  4.07485030008983  4.07500998432582  4.075014395322483  4.075087731861794  4.075155750952099  4.074377307638331  
4.074007242046641  4.073956986262257  4.073559290327696  4.07272233694711  4.072642096698499  4.0727073003042555  4.0727238002108175  4.072083852074596  4.072244808630535  4.072275527340992  4.071779928357452  4.071851273721449  4.071587188490036  4.071283797636741  4.0713904369087865  4.071317509821903  4.070739021802232  4.070796582772915  4.070513019561703  4.07047515976245  
4.070534306282197  4.070594299735142  4.070433542485489  4.0703284744313315  4.070356038355711  4.070479492959528  4.0701847175501475  4.069820657976343  4.069446332014896  4.069412321311574  4.069410073750263  4.069633122560393  4.069761379596331  4.06987639942772  4.069860082071664  4.069611151018295  4.068514937197418  4.068547789441425  4.068338063373703  4.068193460737216  
4.067790919825845  4.06782164780328  4.067848407167102  4.067639370960716  4.067391193468347  4.066651762774974  4.066706318656796  4.066845037586686  4.066764013030759  4.066722982944876  4.066161469783344  4.06622056767254  4.065992655399754  4.065600061540001  4.065625460548592  4.064771377807924  4.06474754854468  4.064931530654469  4.064963578429294  4.0643064247277705  
4.063728790198981 
--------------------------------

2020-03-26 00:55:30.120023 - 0.57023

 0.56869 에 비해 점수 떨어짐

item_id  dept_id  cat_id  store_id  state_id  year  month  week  day  
weekday  event_name_1  event_type_1  snap_CA  snap_TX  snap_WI  sell_price  lag_t28  lag_t29  lag_t30  
rolling_mean_t7  rolling_std_t7  rolling_mean_t30  rolling_mean_t90  rolling_mean_t180  rolling_std_t30  price_change_t1  price_change_t365  rolling_price_std_t7  rolling_price_std_t30  
lag_t27  rolling_mean_t60  rolling_std_t60  
('boosting_type', 'gbdt')
('class_weight', None)
('colsample_bytree', 0.8)
('importance_type', 'split')
('learning_rate', 0.1)
('max_depth', -1)
('min_child_samples', 20)
('min_child_weight', 0.001)
('min_split_gain', 0.0)
('n_estimators', 400)
('n_jobs', -1)
('num_leaves', 2048)
('objective', None)
('random_state', None)
('reg_alpha', 0.0)
('reg_lambda', 0.0)
('silent', True)
('subsample', 0.8)
('subsample_for_bin', 200000)
('subsample_freq', 0)
('device', 'gpu')
11.963631495369789  10.663359124409444  9.601483464964607  8.746016438769159  8.029527562145082  7.452124490659727  6.9819529957218815  6.592068106030472  6.2624023749893185  5.99831458335742  5.77586573500191  5.604559039199877  5.453575596316947  5.331182497882698  5.229406783675892  5.14711979344824  5.066111658017016  5.004490042846478  4.94833125169826  
4.903238037478823  4.870036592033269  4.835073241155873  4.805089843544983  4.777318348276468  4.746394929807077  4.7266425382091555  4.704670295470789  4.684209205067906  4.649936764933731  4.627646710976233  4.615473930245144  4.5929415683355295  4.584117779495724  4.574336893356412  4.563827677216429  4.555047738199736  4.545226544672536  4.536687675955201  4.526771494719356  
4.519878962956862  4.515503320045525  4.50180366099839  4.48963466510601  4.472058220906025  4.465266856626802  4.462329419389446  4.450308011747981  4.4380426789894365  4.433530738292708  4.423332369604575  4.407700877532632  4.398149199329312  4.390683341914185  4.373356635639804  4.3629214842736745  4.344460469300582  4.342247383249144  4.339435849316312  4.337314559146792  
4.323622942609752  4.321318404368668  4.318497542851023  4.310628384691865  4.303312766282943  4.298365654024711  4.294348240650291  4.284613779950262  4.282333639722434  4.28152858223747  4.274827337898445  4.264637100835522  4.261446499713985  4.254949427438468  4.25179251389163  4.2474495330769315  4.245138684917208  4.241835047769943  4.241232829451252  4.2376920591673874  
4.237061692955516  4.234298399040306  4.228551175370982  4.227733111286157  4.226758070382983  4.223671380552587  4.222932185512441  4.221667595720178  4.222131646456555  4.21590202506808  4.211006816366518  4.209923324095411  4.209215681739608  4.206484367922393  4.2042624989448045  4.203233985046747  4.202682064718943  4.198610983021367  4.198440440258596  4.196789755277968  
4.1966525907078225  4.196008151342731  4.193850317381029  4.193569510979327  4.191687450063105  4.191473425650256  4.190887911746551  4.18769014705832  4.187386285357419  4.183706561402608  4.182594436339565  4.1825150336715335  4.179679067760506  4.179487702395611  4.178354232036026  4.176746899017368  4.175857711957246  4.1759402074853345  4.175512519909803  4.175084257199124  
4.174975819882913  4.171597442569175  4.170005805204028  4.167866383962532  4.1679878371535635  4.165338819464268  4.165098866043066  4.163214581755794  4.163096702859358  4.158750376654795  4.158666804357267  4.15840226083563  4.1586923637038735  4.1571470730228866  4.1568573107315485  4.155941158545229  4.153364537082436  4.152447806898837  4.151149775947313  4.14884533581654  
4.146833492420813  4.1467263725666355  4.146073020950078  4.145266231792614  4.145567184607086  4.14432667643524  4.142962915080955  4.141223062302907  4.140702819116272  4.140719053516992  4.140819220550876  4.1394023414026435  4.139627031905455  4.137626524089521  4.137462884858372  4.136032840938874  4.132937551449791  4.132196473421797  4.131730376832978  4.131423873946944  
4.131603234718512  4.1307648473914655  4.129011746403377  4.128599359193151  4.128379023956936  4.128095212802447  4.127932719655382  4.127256490814191  4.1268583036784525  4.1259307328758466  4.125099173526312  4.12499832138621  4.12361641030682  4.123432734207134  4.122392047638353  4.121683566698728  4.120760424513683  4.120775332599687  4.120462871271048  4.119806729446456  
4.119862160546827  4.117565052738243  4.117076271565432  4.116990752631606  4.1170053886184945  4.114336491081557  4.114009933199914  4.1140215591113956  4.113169115026651  4.112898649063311  4.110726847366579  4.110086585524614  4.110160751152539  4.109940270727623  4.10959253891381  4.108338023610792  4.108240336726042  4.107967628630141  4.106521846649849  4.106532342773193  
4.106116254124877  4.106079180999867  4.106319950515977  4.105437746944338  4.1054387879534895  4.104941047276012  4.102861152513905  4.102048588412689  4.101441591862836  4.101254624106882  4.100469311118642  4.100587804708713  4.100746041031477  4.100276402444305  4.098244473749314  4.098031960641007  4.096086530112876  4.096007072880286  4.096014459819094  4.094573593044448  
4.093562206106081  4.093090343120883  4.093365383088157  4.093385770249915  4.093358791893434  4.093130813450858  4.0926774587327674  4.0919610958305626  4.091959174646659  4.091085408002828  4.090239464244108  4.090438794604119  4.087633787540398  4.087609525781049  4.087411275007087  4.086827716528691  4.08712013950387  4.08686349642475  4.0866736746811085  4.086181849095909  
4.086086616067204  4.084973207706562  4.085097167240272  4.084781279944568  4.084846719034912  4.085157827444338  4.083660928186232  4.083805359076262  4.083878981223946  4.084034936532407  4.084059003590294  4.084089731516809  4.083210334365871  4.0838493359585  4.083737398621156  4.083691384991331  4.083689102467924  4.082829570505462  4.0829839263640855  4.082614150241437  
4.0826276798265795  4.0827066397060054  4.083068122184804  4.0830032013827795  4.0829127865116215  4.082633143297481  4.082654376354113  4.082818508511258  4.0824830496389275  4.082525168571639  4.082053411606353  4.082168099509695  4.082308215813476  4.082356638491077  4.082642463417493  4.081459312303474  4.080424887683889  4.080386762244631  4.080649919060212  4.080814992474678  
4.080810364582963  4.080956693896004  4.080508155496689  4.080518813378135  4.080544771107681  4.080687679649585  4.0809081790068005  4.079582596472893  4.079783243072884  4.079603052238119  4.078005202360525  4.077760334886432  4.0773089162295335  4.077393434810711  4.077389659389101  4.077263592681355  4.077297677406219  4.077306447703908  4.075620447619799  4.075630873269874  
4.075514459165654  4.075370634554326  4.0751058891391745  4.075303498048468  4.074762408262134  4.074723895380607  4.073984852801832  4.07295242372082  4.07246313811175  4.072355293179245  4.07221670511342  4.072618997234396  4.072707114130612  4.071647376575226  4.0717882132515255  4.071927745356126  4.070788825882663  4.070777218588717  4.070560362179979  4.0705706764265255  
4.070499082884411  4.070273441201963  4.070292445540443  4.0703815494215325  4.0707014709593485  4.0707547815205904  4.070124440674721  4.069855849909391  4.069841900240993  4.069525224165082  4.069522055712439  4.069629290607499  4.068947973777305  4.068778805320473  4.068953816640811  4.067228211604342  4.067422089680074  4.067344190803442  4.067240458410913  4.066876635984392  
4.066587224614649  4.066577273700103  4.066249775224421  4.064532514975566  4.064720099004968  4.064678575614536  4.064828215817597  4.064203033556324  4.06393981503536  4.064005093463287  4.064161781987346  4.063415188197249  4.063532561947749  4.063535055908754  4.063518692365931  4.0635918769563615  4.062046184755598  4.061722497583125  4.061730038893956  4.06121864643523  
4.060748177293254  4.060355668666203  4.060501674795916  4.059942025342857  4.059281847654553  4.059260283287246  4.05937421907964  4.059416837673816  4.059617351630895  4.059688248244834  4.05973402769342  4.059809875193978  4.05974483672668  4.059563013971474  4.059743612012297  4.059731996495228  4.05973997465876  4.059683697647587  4.0597285548880695  4.059977742668794  
4.0597418271601695  4.059264320280649  4.059128859368508  4.058847397833021  4.058964722270544  4.058911967047901  4.058776878136055  4.058964553844942  4.058750181225156  4.058726635884912  4.058659238949608  4.057941471601525  4.0580897536840395  4.058156374783285  4.05828087574532  4.0582930131015855  4.058394016499812  4.058297806431754  4.058396381557216  4.05870548167215  
4.058598134575161 
--------------------------------

2020-03-26 01:26:35.727431

0.56199

롤링60 추가한게 도움이 컸고,
래그데이터가 생각보다 도움이 안됨을 확인할수있었음

item_id  dept_id  cat_id  store_id  state_id  year  month  week  day  
weekday  event_name_1  event_type_1  snap_CA  snap_TX  snap_WI  sell_price  lag_t28  lag_t29  lag_t30  
rolling_mean_t7  rolling_std_t7  rolling_mean_t30  rolling_mean_t90  rolling_mean_t180  rolling_std_t30  price_change_t1  price_change_t365  rolling_price_std_t7  rolling_price_std_t30  
rolling_mean_t60  rolling_std_t60  
('boosting_type', 'gbdt')
('class_weight', None)
('colsample_bytree', 0.8)
('importance_type', 'split')
('learning_rate', 0.1)
('max_depth', -1)
('min_child_samples', 20)
('min_child_weight', 0.001)
('min_split_gain', 0.0)
('n_estimators', 400)
('n_jobs', -1)
('num_leaves', 2048)
('objective', None)
('random_state', None)
('reg_alpha', 0.0)
('reg_lambda', 0.0)
('silent', True)
('subsample', 0.8)
('subsample_for_bin', 200000)
('subsample_freq', 0)
('device', 'gpu')
12.017933377097634  10.70480465009703  9.637788616532337  8.770706397143618  8.065179451932066  7.479498348664927  7.002795309207567  6.611810120206924  6.286298926192589  6.028368566015593  5.804048257435084  5.6193363145822595  5.472170994323355  5.352725450018375  5.25792344615689  5.164549407454239  5.091777100452554  5.030193304328035  4.970593794053074  
4.918046136279668  4.871195809872277  4.829725182204851  4.8005452165082865  4.776397883818088  4.755524799841482  4.742806539394747  4.724345940046491  4.709361668881846  4.696625597219019  4.679681176380091  4.6677251729558895  4.635791980869241  4.616143156070073  4.59657805756276  4.582177162262076  4.570741960900319  4.562813906868841  4.5469991412304145  4.537981775877911  
4.52241329887071  4.507812840381383  4.490107555653179  4.484896253994223  4.47754648086666  4.468637560615045  4.4621539974774  4.458606743426166  4.440325604360067  4.42791553313175  4.423837156111938  4.417650190000711  4.413742434671036  4.406037228572445  4.402230463109257  4.394388496105248  4.384484626059891  4.3688223017247765  4.357507875310713  4.35550814718163  
4.349415871539719  4.347297910379043  4.345421182819181  4.344179452013427  4.337283857209818  4.333832315186403  4.328335576894722  4.324297409831239  4.316438430494553  4.315915586158247  4.306766837769231  4.304102910241532  4.303379694082264  4.299026915492323  4.29146939433399  4.291542572303554  4.283060197771832  4.281380857674672  4.2741115961288445  4.2723435505936935  
4.262704074393979  4.262372316348131  4.261369970434485  4.261388892357058  4.253719195646278  4.253259557986897  4.251792493928507  4.251244221145984  4.247717917765185  4.242693412837322  4.242285969880567  4.23682996809076  4.23435983780938  4.232072566373401  4.223622887926242  4.221551933313467  4.220025041709947  4.216281856178593  4.215172988123899  4.213315364918201  
4.211713350470415  4.209043240525012  4.2039407267809334  4.202613350228201  4.200064935932779  4.197710191896128  4.192548520060304  4.19109122095531  4.190576496210358  4.189899913844533  4.188361498594861  4.18765821620529  4.18666244439589  4.183977465369092  4.182444279481208  4.182272522802262  4.181473056016654  4.1805483263542635  4.178872270484419  4.17590919831838  
4.175400574291167  4.173145735608005  4.172176770738998  4.170913740926624  4.170603173736825  4.169090800042178  4.168593620580347  4.168273337840661  4.16813935590748  4.167751058742838  4.165295152226127  4.16223576554107  4.161487705494044  4.161780954198496  4.160619274199326  4.1609804664519  4.159542780593608  4.159250410056353  4.158019695721468  4.1558448284063125  
4.155371328015202  4.150656409270353  4.149652266798605  4.149398428016382  4.147181107120525  4.146020291510636  4.146055362847177  4.144477028678764  4.142584357840292  4.142616207655739  4.141700073545784  4.140333312983914  4.138658585339934  4.138189224281653  4.137935537229366  4.13817676468079  4.137172706448891  4.136471706240107  4.134662535926385  4.134028418880112  
4.134272867932893  4.130605176327458  4.1267222154000365  4.124822694727167  4.124901757716389  4.125019754030972  4.124779308749134  4.125261150488657  4.122306483157372  4.122553431158137  4.122020933924353  4.122443723903595  4.121256622686299  4.12117606045633  4.120776130209901  4.120280680949437  4.118763247091553  4.118491085830459  4.118160541185541  4.117493273465119  
4.113713109429503  4.112065653931521  4.111823808527822  4.110109065344251  4.110015036039119  4.1089851839496925  4.1081122581308325  4.108060037630154  4.10776567735305  4.108005459856412  4.107997184085429  4.107771626626229  4.106413107467883  4.1060027255316  4.105749713684873  4.10433694602597  4.104114601574068  4.102278036987023  4.102371873084609  4.102691902959396  
4.10152386329482  4.101550525560942  4.100540203894257  4.099919415695952  4.099759560009045  4.099921697592028  4.099044901281853  4.098932855494192  4.098734700918697  4.09867464457526  4.098647085349722  4.098284910891272  4.096446584693352  4.095518307815109  4.0960400278393045  4.096387029953708  4.094912919800322  4.095077980244224  4.092886365648115  4.0925295241805015  
4.091315714596149  4.091150376445288  4.090714568849536  4.090376157321243  4.090573156091091  4.090492329543731  4.089385987977988  4.08933432189557  4.089387141031176  4.088195736346546  4.087882021481126  4.088392698066007  4.087161437624567  4.086018479028381  4.085206943829067  4.085167585518696  4.084952521288012  4.085126022092324  4.084077745937938  4.084070513273699  
4.081605615065405  4.081639929178565  4.081596345470266  4.0806028680216375  4.079724956436281  4.078890978776754  4.078782497164088  4.078894596481246  4.07833085761422  4.078447799572567  4.078481929567812  4.078286139348168  4.078333694590462  4.078352705459906  4.078454496032225  4.078315908108384  4.0782051517581515  4.078098763950324  4.07768603940352  4.0767560728040415  
4.077226371295276  4.077120985907026  4.07542156844174  4.075444990224144  4.0739963267823205  4.074320872180492  4.073781336651171  4.074064720193867  4.073898648020372  4.073958049382422  4.073916926504765  4.07357146365085  4.073206625314599  4.073305538385064  4.072583812872013  4.07250151487909  4.069869195564183  4.069863128189555  4.068973949904689  4.068898271823908  
4.068369907600183  4.068625021602904  4.067855011595012  4.067507136538438  4.067428650801348  4.067446611145349  4.067619428735048  4.067195775407537  4.067160139696227  4.06698963033082  4.067084741826889  4.066983456524039  4.066982512920288  4.066566997958535  4.066410478685249  4.065878581155351  4.0649995870131965  4.064720501579485  4.064254917117065  4.063244725061216  
4.063108726587808  4.062978059537963  4.0627729269440325  4.062721105880257  4.062028600303671  4.061844432475304  4.0618173797247135  4.061543794820996  4.0616982042647285  4.0620690040448535  4.061642651247794  4.061660319301758  4.061916425630642  4.06237463893002  4.062370300844292  4.0619825673303085  4.061344197078423  4.061630156250274  4.06080665029824  4.059661372298314  
4.059650191210026  4.059589989393509  4.0591628316553585  4.05917546297892  4.058753557181774  4.058815038231186  4.058342103693587  4.058346835560426  4.057571969808033  4.057287525565371  4.05742684927876  4.057347458332732  4.057088920837899  4.056638465927577  4.056480535439628  4.056388481966131  4.056252318164703  4.056480478232096  4.056775810673754  4.05681967055018  
4.0550129540182605  4.053996835188198  4.054002059867724  4.053994075779575  4.05422311024366  4.05433150185011  4.054367018784974  4.053394816383159  4.052974150380655  4.053000543285416  4.05297002607837  4.053099593590147  4.053289350656771  4.0531775735617055  4.053041929609883  4.0532621403080915  4.053134566977937  4.052018608335522  4.051844654048798  4.0517695060642085  
4.051912286984262  4.052133059916465  4.052138295694885  4.051863151988878  4.051457069614619  4.051002782766887  4.051241030712455  4.051233946282952  4.051094895718552  4.051175859531206  4.051284288627738  4.050719611822821  4.050602740516654  4.050470385853299  4.050182154828278  4.050186403521275  4.049703816617356  4.049723211574264  4.049294523035591  4.0493005280190095  
4.049273449133243  4.0495773601253315  4.049498844163414  4.04904702508737  4.04889525889295  4.049041026745266  4.049166463689425  4.04948047561537  4.049244459678162  4.048618271210743  4.048602903591968  4.0486167156733215  4.048571999087639  4.048592792298096  4.048336222604948  4.048076559820178  4.047907046342795  4.047763391943498  4.046826192513992  4.04618948048938  
4.045202881142823 
 --------------------------------

2020-03-26 02:03:24.309281

0.55681 - 래그 데이터 2개를 빼니까 점수 많이 오름. 전부 다 빼봐야겠음

item_id  dept_id  cat_id  store_id  state_id  year  month  week  day  
weekday  event_name_1  event_type_1  snap_CA  snap_TX  snap_WI  sell_price  lag_t28  rolling_mean_t7  rolling_std_t7  
rolling_mean_t30  rolling_mean_t90  rolling_mean_t180  rolling_std_t30  price_change_t1  price_change_t365  rolling_price_std_t7  rolling_price_std_t30  rolling_mean_t60  rolling_std_t60  
('boosting_type', 'gbdt')
('class_weight', None)
('colsample_bytree', 0.8)
('importance_type', 'split')
('learning_rate', 0.1)
('max_depth', -1)
('min_child_samples', 20)
('min_child_weight', 0.001)
('min_split_gain', 0.0)
('n_estimators', 400)
('n_jobs', -1)
('num_leaves', 2048)
('objective', None)
('random_state', None)
('reg_alpha', 0.0)
('reg_lambda', 0.0)
('silent', True)
('subsample', 0.8)
('subsample_for_bin', 200000)
('subsample_freq', 0)
('device', 'gpu')
12.015635337641402  10.701233864134375  9.642017140729724  8.758381291281097  8.0470257263974  7.4796666453323  7.006341373448019  6.618377493268625  6.299976276986325  6.016528707687347  5.790486862738778  5.600711403203317  5.455317701986902  5.316418749535575  5.20690975470645  5.117830942723502  5.042277403613288  4.9666303049219165  4.920639812663979  
4.880580388072705  4.839963569414521  4.799985979808719  4.762915041943081  4.732230760895729  4.707310428844926  4.678990972461166  4.658793248543266  4.641284652887518  4.616975570388506  4.5954402900586375  4.570685634405261  4.559608982106377  4.5413567153860495  4.528735461546744  4.520848856318857  4.508171964822948  4.494125247616235  4.479682074231754  4.459698192978463  
4.450994740115366  4.435574355180798  4.425932657766445  4.411672879159397  4.406412796147376  4.397475917073998  4.389885189606085  4.3798100756090115  4.367724971335499  4.360258800625141  4.346486372658639  4.341786522782765  4.327966982849488  4.325130599514144  4.3208593458073254  4.3077385890173385  4.292979511772233  4.2862265879103365  4.284139694076725  4.272271829392038  
4.268920949017378  4.262765828475749  4.256358270548314  4.254834520622098  4.2451994305713905  4.243327947149813  4.23364482643939  4.222238331341425  4.215736719148268  4.209963413754996  4.207632347237336  4.204993223938326  4.200957251589349  4.197195126856809  4.186803266183081  4.185702828499746  4.18325018131606  4.18150454458544  4.175924757431018  4.174407690147252  
4.171991573875491  4.1641981119021425  4.163648118341907  4.162591780502292  4.157873106416422  4.155869655395961  4.1481141902635  4.146664548594354  4.146608805447567  4.143385519264443  4.139447342390863  4.1376420870579524  4.136095947675876  4.135145071135415  4.134088621888306  4.132842757840061  4.128324405480078  4.126993810276231  4.125274925256581  4.121764295556319  
4.120981153582455  4.115171608098304  4.114432814677142  4.112711158291446  4.11241364150094  4.108550196496517  4.107752474794347  4.105843512052012  4.100844559348355  4.100194382711365  4.099751721861831  4.09649923620098  4.094984367928971  4.093922280518211  4.090772930187758  4.088049596774043  4.086758989195495  4.085017250639707  4.085111931008263  4.084141847751357  
4.0828509696981765  4.080460641152608  4.078519446676457  4.077416161861379  4.077308462315739  4.0767773173688875  4.075018066445704  4.074806788498416  4.074188676291283  4.0741593798063365  4.073282167419853  4.070165384595685  4.066988173763954  4.067251734172112  4.066405516048644  4.0659433537005265  4.065404652137677  4.065440163251941  4.063937577205271  4.063878324120342  
4.0638643062704265  4.062994104653141  4.062686565405235  4.062430685208747  4.057620067484525  4.0561823088131925  4.05467966599801  4.053179576976353  4.0523134984684654  4.052539137331506  4.0511194570894355  4.049359457309878  4.049465280364109  4.048653691969557  4.0479911213097095  4.047702226904668  4.047419255695593  4.046373221454606  4.0417723217701385  4.039369444490366  
4.038643595294454  4.0384696298920355  4.038625236465189  4.038396423301242  4.038155732668238  4.038593583319399  4.037226778261369  4.036450117360109  4.0350144424953145  4.034224070761862  4.033528444275944  4.0327367856207195  4.032840698538925  4.033138747722093  4.033249415253019  4.033024086202726  4.033241000355848  4.032684431335802  4.032633093591178  4.03154641791517  
4.031024030510214  4.030765235588729  4.030611967320982  4.029580035146932  4.02932056219152  4.027604473747517  4.02771832701299  4.027720054792202  4.026502077134948  4.026560604748684  4.02669465955489  4.026908269190043  4.025090141474917  4.024615179181447  4.0237440900754615  4.02389332189293  4.023605246609504  4.023451857756435  4.023367148861274  4.023044922491341  
4.021473116902606  4.0206272575919115  4.020098285310288  4.0189317594019585  4.0187950131110375  4.017993828217719  4.0184254772475  4.017741984045098  4.017447837643698  4.015969214135269  4.014796483869675  4.014400069675245  4.014270738650046  4.013885978319342  4.0135846449478425  4.013389011820213  4.013568540751684  4.0121216381992  4.012261536668401  4.011592850950434  
4.0117810661492594  4.011526288263614  4.011297487671714  4.0117582473437015  4.010969482481303  4.010955173679391  4.009246318994155  4.009030864656535  4.008069420083376  4.007494603320735  4.007287736722357  4.005556991199312  4.005414022355322  4.00469802476802  4.003853759467443  4.003958625890892  4.004398030214644  4.004146473098939  4.003145842652487  4.00167244237216  
4.000882047618898  4.000447906001847  4.000187488862975  4.000405454472616  3.9991717762498116  3.9991758074015293  3.998931178250879  3.999349915104722  3.9994189299265575  3.998426476587275  3.9983807117192565  3.998322195581533  3.9976310993168984  3.9960297577441097  3.995606354972844  3.9949580714062103  3.994460205006721  3.9937241253552207  3.9936651326333625  3.993585389377194  
3.9923263527315465  3.9907887829794806  3.9908712595590026  3.990741022956302  3.990126428756416  3.9890610308647054  3.989238738341413  3.989227835650789  3.989067828745699  3.9887211628935497  3.9885559861980195  3.9886685067848378  3.988467453128303  3.9881556530487208  3.9882030169277978  3.9881918804145573  3.988235012470218  3.9871286544661806  3.9873202858139396  3.986951282798501  
3.9866339922695495  3.9866549834311966  3.9852286417645164  3.983478971241937  3.983301942628836  3.982990661900354  3.9827259053639468  3.982763260223869  3.982691917007402  3.9827863767606906  3.9828407659271536  3.9815228886653298  3.981022391472241  3.9810916455678687  3.981159815694352  3.980836452635474  3.9806613152418215  3.980845647592322  3.9807280658429494  3.9797551710049763  
3.9798573782477717  3.979470143121292  3.9796164147917246  3.979783688914263  3.9797224878257023  3.979578898805915  3.9784462370856124  3.97851433373456  3.978569811184143  3.977850231673639  3.977953940203923  3.9778785523227334  3.9782971338062647  3.9781960641628666  3.9782890502446993  3.978224028857414  3.9767217400796904  3.9768093553822244  3.9768574652636133  3.975707675510795  
3.9756915546213616  3.97547327841015  3.974754707818708  3.9747764190814685  3.9751822227528852  3.975334792665654  3.974957913542205  3.9749374277572214  3.9744852409648854  3.974367600133097  3.9744870323752868  3.9742845312197335  3.974334852964593  3.9738872515721146  3.9738930742155265  3.97338895851528  3.9731159899029937  3.97345963836808  3.9725553739258737  3.97312784180675  
3.9725764262687635  3.9722393027052068  3.9719567450179585  3.972118889360616  3.972185074616891  3.9720575981021855  3.971798137835533  3.970065201625736  3.969302111513344  3.969379782407179  3.9695185015572525  3.9685823032114045  3.9684213841967635  3.9684076945555065  3.9683359359198787  3.96832424773318  3.9675916203705826  3.9673844613830265  3.9670042199504536  3.966606396005962  
3.9666662136190918  3.967065689601471  3.967389915717237  3.967598791405856  3.9673451863914746  3.9666972118632717  3.966304067782871  3.9663973386854643  3.966291820986657  3.964600585004609  3.9646841138027096  3.9645150816346795  3.9647596236290994  3.964464687439169  3.9645368541572554  3.9644002772122753  3.9642327815438914  3.9642018497325258  3.9642722359086147  3.964018683238263  
3.9638041808231463  3.963603641218789  3.9637286471225375  3.9632960934050545  3.963404468650742  3.9636648940542125  3.963648065295561  3.963787890795979  3.9635293843079995  3.963079928937862  3.9631773475171044  3.963133112104216  3.9626540817753866  3.9627158780201155  3.9627670071738477  3.963065251712859  3.96307426145033  3.9630818500865947  3.9625139795794424  3.962201378631475  
3.9616003086509037 
--------------------------------

2020-03-26 02:31:17.012183

0.55045 래그 데이터가 불필요했었나 보다. 다 뺐더니 점수 많이 오름. 피쳐 중요도는 꽤나 높았었는데 과적합을 일으켰나봄.
	   
	   
item_id  dept_id  cat_id  store_id  state_id  year  month  week  day  
weekday  event_name_1  event_type_1  snap_CA  snap_TX  snap_WI  sell_price  rolling_mean_t7  rolling_std_t7  rolling_mean_t30  
rolling_mean_t90  rolling_mean_t180  rolling_std_t30  price_change_t1  price_change_t365  rolling_price_std_t7  rolling_price_std_t30  rolling_mean_t60  rolling_std_t60  
('boosting_type', 'gbdt')
('class_weight', None)
('colsample_bytree', 0.8)
('importance_type', 'split')
('learning_rate', 0.1)
('max_depth', -1)
('min_child_samples', 20)
('min_child_weight', 0.001)
('min_split_gain', 0.0)
('n_estimators', 400)
('n_jobs', -1)
('num_leaves', 2048)
('objective', None)
('random_state', None)
('reg_alpha', 0.0)
('reg_lambda', 0.0)
('silent', True)
('subsample', 0.8)
('subsample_for_bin', 200000)
('subsample_freq', 0)
('device', 'gpu')
12.2830993312115  10.945618532134379  9.879596394555707  8.977474395233404  8.251407971466525  7.64793105068241  7.16341376251586  6.7554990647615725  6.416099868115397  6.145209657624691  5.914307074294082  5.73103377837839  5.569628809543054  5.438220689361769  5.324720013965359  5.221508842554996  5.144977697375925  5.077011154366569  5.004614165264734  
4.950234239345866  4.911188540089513  4.8632324915003435  4.834201616471236  4.8022797409145825  4.767367296558988  4.74628073358259  4.731065113507743  4.697001320465497  4.685351795936599  4.66678788749384  4.653365518377726  4.636015834257403  4.6060514934146495  4.578965396477988  4.5690044644910115  4.55951811340347  4.550067237972545  4.54014845422627  4.526245899615802  
4.520132094442581  4.509114964256459  4.496821884848565  4.487848132856308  4.478084731937538  4.467776540481101  4.456093293322826  4.447547953665383  4.432520391596987  4.422994336051551  4.416523475550336  4.40691995211218  4.397265707018927  4.3895089219292  4.38304255844457  4.369352779276398  4.363858600681283  4.357607750977599  4.345597421481212  4.335268980981076  
4.331511162717348  4.321486970123371  4.315775173165897  4.3107257825293495  4.307864552769773  4.303170036827843  4.300318701839699  4.292458498625496  4.289936303404612  4.283934626651724  4.274920087030868  4.272590263929545  4.267877697108849  4.259903117169142  4.252894451899453  4.251452949943249  4.250135867297968  4.246342097387103  4.241181541090813  4.238585608671529  
4.235102878519952  4.23245827981877  4.226160161536033  4.225752222280167  4.223551154156446  4.217719375850015  4.215765171827117  4.214938902155853  4.21434685035084  4.2119523965792585  4.208827590043088  4.206703763460233  4.206111489191782  4.20355052759388  4.202242979565462  4.202598229486274  4.197497478128695  4.195945066255034  4.194354821443396  4.19348499527482  
4.191388326713017  4.188465916582824  4.187552388872422  4.185858014927706  4.183222724352516  4.182019297338782  4.178983863996646  4.179475511099742  4.1750714167323375  4.1715231720975146  4.167063152723082  4.166831722582916  4.166528484436393  4.162930953222742  4.160610448328651  4.160014111476044  4.159540150647365  4.1584490241678775  4.157955199736485  4.1549906567582635  
4.153816610906788  4.1524928305528634  4.149591095571466  4.148974951891201  4.148587150627692  4.1487658859653305  4.147005507673822  4.146648574966652  4.146163618518941  4.1449295192987305  4.1446845550312394  4.142617919733685  4.140493843740219  4.139258821801513  4.137726617170331  4.136331481290104  4.135835834809255  4.134922276844942  4.132297435205097  4.131007558813361  
4.130533921174966  4.130203711287292  4.129906723166743  4.12992844245518  4.128934965826647  4.125364524420512  4.124870470813888  4.1237944178640795  4.12148015035088  4.117619743855217  4.1169710804308535  4.11480247240245  4.11244259134736  4.11181719770576  4.111904336563111  4.111587222346772  4.110718835931871  4.109623979077457  4.109570889870974  4.107636706312355  
4.106288026285495  4.1054986252715135  4.104918192079376  4.104135681562239  4.103037860763684  4.102646457611002  4.101925197401414  4.101539469076338  4.1012515839420365  4.100905998553134  4.1007462153625935  4.100572700054873  4.0967443921350775  4.09491324498342  4.093998819105773  4.094032448153093  4.093354801172304  4.0933161507275  4.093210737633562  4.091475475894014  
4.090216545385097  4.090083367743306  4.090104559743673  4.088953231841482  4.088544840703817  4.088346680905035  4.0885041604371795  4.0865277627135805  4.085227633354243  4.084001502375865  4.083267847333909  4.082108272360645  4.081652488172442  4.0814280022960885  4.081870486873373  4.081798713552091  4.080996333942309  4.080972770600393  4.080433500002779  4.080411229214956  
4.0797882064782325  4.077153590260097  4.07732893502653  4.076989387857089  4.077451510319191  4.076694459930067  4.075403026058826  4.074999195338366  4.07480955909212  4.074256492742546  4.074180871246024  4.074395443025726  4.074704349147759  4.074128823636621  4.073576830311807  4.073451680164464  4.073335579982194  4.073166695117925  4.072826194122056  4.072889974916651  
4.071703680417203  4.071042279594151  4.070844429336469  4.071122446687198  4.070907781956976  4.068954138615461  4.068099098360503  4.067533429530333  4.066830440809321  4.066870355472444  4.06584573522599  4.065529156601487  4.065295044777569  4.064500794707108  4.064863250425958  4.064781433060529  4.064894216560827  4.06391501398899  4.063952684865386  4.063992985485618  
4.063676454321808  4.063641391926123  4.062297387016198  4.0622111159395775  4.061307879343921  4.060805660361293  4.059957900757763  4.059979989255877  4.0593474551311655  4.059423405489426  4.059227295804364  4.059657212619652  4.058119915284005  4.0584145311534  4.058504610485752  4.057826336201753  4.057090355515534  4.057190856703053  4.056778874307245  4.056666874784765  
4.056362855183529  4.056815099636147  4.056658087543116  4.056110181321559  4.055897473916561  4.054864524587306  4.053911587561847  4.053197997889207  4.053170156249612  4.0528764287872034  4.053076192296637  4.05287096727945  4.052763059643066  4.052300190675415  4.052084805532796  4.051842239176559  4.0513311746678955  4.05061458532212  4.0503868625647215  4.0504779608352806  
4.050599947768533  4.049722595164991  4.05021363984291  4.050344098931724  4.050163904856166  4.05025522477192  4.049636001998459  4.04939445290623  4.048730641539935  4.047794503895167  4.046329287923813  4.046342431982831  4.046211939658995  4.046134196376512  4.0459144016030235  4.044750452901028  4.044840804704786  4.045076999272974  4.045236840367119  4.045206527373008  
4.044659215877884  4.044762402179129  4.044774583575096  4.044628603963868  4.044207765392323  4.044659661816394  4.044632459169549  4.044475532587392  4.044150972779099  4.044369416110565  4.0444235904874475  4.044337413473631  4.044697717770448  4.043865110052015  4.043725543422105  4.043410605453715  4.043068841284456  4.0425765330978205  4.0427044419170635  4.042704238364881  
4.041888457973951  4.0414917309332585  4.041817453711189  4.04150099917412  4.0412228329544675  4.041345757535147  4.041469803890222  4.041307292816115  4.041645014015173  4.041066673459533  4.040700298674503  4.040471163069259  4.040244985597203  4.040244874295183  4.039795138246767  4.040314258789513  4.0399363151893555  4.039704753363991  4.039739484737395  4.039807098694106  
4.038684852127696  4.038351955177082  4.037716019924919  4.037550879739168  4.037900897781914  4.037761440758938  4.037527489343773  4.0378502910070795  4.037108212830905  4.036869313706349  4.036650469552585  4.03673052053832  4.036793778740875  4.036654637545266  4.036349371333672  4.035416408441563  4.035095617038245  4.033932215123722  4.03403625103874  4.033390022472606  
4.033005843444526  4.032886337694615  4.032827033228095  4.032738017759789  4.03300664823361  4.032176149580882  4.0318635425250955  4.031906376330153  4.031810459964588  4.03225051951084  4.03203631433986  4.032155109530873  4.03153221177598  4.031383111766966  4.031191129924887  4.03123259042318  4.03072869644616  4.029432806735729  4.029343539534991  4.02962012926407  
4.029481974039487  4.0296289903775  4.029701095474627  4.030058141796728  4.0304693032768455  4.0307463788207105  4.02990186387069  4.030067942977196  4.029529800545949  4.029265460793711  4.029919187872085  4.029678695137424  4.029579418895715  4.028960995577963  4.028750365513041  4.028643033566463  4.02895630830736  4.028961450226618  4.029302364197654  4.02925179441791  
4.02939772710603 
--------------------------------

2020-03-26 03:07:29.535112

0.55545 - 28일 단위로 했더니 점수가 소폭 하락함. 왜그랬을까???

item_id  dept_id  cat_id  store_id  state_id  year  month  week  day  
weekday  event_name_1  event_type_1  snap_CA  snap_TX  snap_WI  sell_price  rolling_mean_t7  rolling_std_t7  rolling_mean_t28  
rolling_std_t28  rolling_mean_t56  rolling_std_t56  rolling_mean_t84  rolling_mean_t168  price_change_t1  price_change_t365  rolling_price_std_t7  rolling_price_std_t28  
('boosting_type', 'gbdt')
('class_weight', None)
('colsample_bytree', 0.8)
('importance_type', 'split')
('learning_rate', 0.1)
('max_depth', -1)
('min_child_samples', 20)
('min_child_weight', 0.001)
('min_split_gain', 0.0)
('n_estimators', 400)
('n_jobs', -1)
('num_leaves', 2048)
('objective', None)
('random_state', None)
('reg_alpha', 0.0)
('reg_lambda', 0.0)
('silent', True)
('subsample', 0.8)
('subsample_for_bin', 200000)
('subsample_freq', 0)
('device', 'gpu')
12.086251311846587  10.749553732411677  9.679431564138039  8.780918681514237  8.068886838933341  7.467531633731019  6.9848406092562465  6.580357093167513  6.244472510243331  5.974578472950466  5.74762427972344  5.563053487056831  5.404618405577328  5.276511527975388  5.168124606251985  5.065338744235025  4.988802865755077  4.920347700857075  4.853210682286996  
4.7960059546873754  4.755074925614659  4.709420133025456  4.682752288118261  4.651237064491208  4.614613896119325  4.588998231994932  4.57153213858752  4.540053932483681  4.528688882607804  4.499533821571042  4.4870696948154976  4.471134871438217  4.441108563229155  4.416982937884787  4.406550825755517  4.399276075150264  4.3861620228017815  4.376404025182608  4.360106696040199  
4.35477852852305  4.344484721954714  4.3303019129478235  4.32064443355769  4.310070440253125  4.298961188734216  4.289145532536492  4.273483710559642  4.258049887964828  4.248726509404536  4.245804427572937  4.234365650482065  4.22689104500295  4.220803136836813  4.209462962294212  4.204445340450828  4.200751640383907  4.198949718113044  4.186611731554358  4.180512796815711  
4.172609316726496  4.169573756295299  4.166895660502722  4.1569911278909375  4.153027195394832  4.150130177974975  4.1457445026461635  4.140742461423932  4.129389448178626  4.124229695259658  4.120546040389167  4.114079843300872  4.110405015736837  4.109078427190323  4.100797454587709  4.099345305835151  4.096761603221331  4.0956164940163005  4.093104780232092  4.08564278149175  
4.076164696422132  4.071751160089108  4.070597772350825  4.07023417784392  4.0671396280877365  4.065735174379332  4.06331960918305  4.061142212665777  4.058420131947029  4.056040350973344  4.050624448015758  4.049803512131056  4.04870577288785  4.043815252191738  4.042915892169381  4.042957939658724  4.038696030885363  4.0364822163786265  4.034678121155592  4.03423738759  
4.033268402685042  4.033045497100619  4.032716723531139  4.026233029579642  4.024817941337416  4.024218937537755  4.022687535804664  4.020340051843842  4.019795903234926  4.017858097028184  4.014561984986734  4.013875816551252  4.011222761857693  4.01039053332382  4.007269895435581  4.007180014590265  4.006277585586178  4.004527392311041  4.003093806901193  4.002612985266542  
4.001519231863097  3.998734733886073  3.9988482577496027  3.998598013083482  3.9980937388536084  3.9973466573079057  3.9915812007329166  3.991302469385434  3.990941649842648  3.9907787584286556  3.9903321733700343  3.9901814679434104  3.988835437755936  3.988663855944779  3.98689573722329  3.9865863640678176  3.9863799008669094  3.9846967919245975  3.9848211110287743  3.9846354364665495  
3.9822500780702454  3.982135162680998  3.9786678448541917  3.978133508724884  3.977371671454857  3.9761631288214234  3.9732499163981436  3.9726676982026836  3.9712153410296422  3.967877903049875  3.966912523677461  3.966514068397972  3.9654163539848595  3.9652846205793577  3.965089856619701  3.964385438227116  3.963116157575794  3.959449451570868  3.95954849980626  3.959525997014057  
3.956461255072757  3.9548832145970425  3.9546506985545884  3.9543804318606592  3.9527555172381867  3.9520334309732035  3.9517172272432655  3.9512951344928817  3.9510317656861815  3.949724425428172  3.950559756823578  3.950524607705152  3.948057998138992  3.9474815921918887  3.9468505249142694  3.9470437070293984  3.946890880319346  3.9459787838986324  3.9461637564848613  3.945391884274997  
3.9448461907031547  3.9447420098035093  3.944090262259819  3.94382912326178  3.94353664892281  3.943535809086968  3.9424136804418253  3.9420401269847307  3.9390986828793615  3.937968604255797  3.9366447594836695  3.93660006706542  3.93712623426183  3.9367510824005185  3.9366819174768977  3.936788267330605  3.9360391660910703  3.934953996549258  3.934878242427162  3.934763837208409  
3.9346434611543355  3.9340812272065246  3.9329297140201858  3.9309208343320168  3.9300877778220973  3.930131730500989  3.9299523564853507  3.9302573403013064  3.930331901228379  3.9301258244468213  3.9298811452356768  3.9292316973958648  3.928711032772395  3.9281034681513876  3.92760854195072  3.92672627614349  3.9272535754237405  3.927026963953944  3.9262056571481017  3.9259837635891532  
3.925516335145667  3.925194986049082  3.926357098417579  3.926665705030928  3.926432960798259  3.9262697868833554  3.926214105102744  3.9254534007759645  3.925409722511414  3.9254258354349356  3.9246740952840447  3.9246393352270528  3.9245790479029927  3.9238774813502015  3.923418214058733  3.9226131622577576  3.9221823774157216  3.921746628582975  3.9218120270927117  3.921194794425565  
3.9205086482220675  3.9203992031799926  3.919976784063886  3.919513276659186  3.918690741286865  3.9183347833295787  3.91799979142998  3.918062679776708  3.9179216387602946  3.917594869970252  3.9170586900117907  3.9173271197731983  3.915919843456495  3.916307126014913  3.916018261183789  3.9147153768217025  3.914495950075469  3.9149435119993736  3.914420288200638  3.914608374609841  
3.914486212211877  3.9136004329007408  3.9133341100566432  3.913592536098391  3.9140281336167564  3.9137840752484205  3.9134538323924537  3.9135488644395555  3.913390221231141  3.912911613078184  3.9125005601744682  3.912183506552936  3.9120147639733456  3.912292307039337  3.9130140813685763  3.913220190929389  3.912880139145082  3.912880147632608  3.9127904201466253  3.91276623202967  
3.9123139213160307  3.910482590759626  3.9104571623332176  3.9104256280372183  3.91037437396969  3.9100670112217926  3.910164515440673  3.9103422988520964  3.910653902278363  3.9109196080418798  3.910794276955531  3.910940713899332  3.9104736927025296  3.9105097176170553  3.908897251062714  3.90886389286867  3.9084957281516868  3.9080812141104517  3.907507407560058  3.9062654990559333  
3.9046036180504866  3.904070515623294  3.904138577291697  3.903539982858129  3.903195310065866  3.9032853173825983  3.9033072984274155  3.9031447670225394  3.903075463990806  3.9033174375483983  3.903291872724896  3.903925012341963  3.90404837017973  3.9037295813622728  3.9034376481414235  3.9033635171019228  3.9026883890779387  3.9029424078953503  3.9030938020239234  3.9032185811916222  
3.903118310095659  3.902855463184083  3.903548554470118  3.9041434541790734  3.9028943843023725  3.902964149892806  3.9026149941833497  3.9027585201186055  3.9016486769900336  3.901351826531321  3.9011606044248053  3.9009877486155937  3.9009575099452096  3.9012161025058965  3.9009982015056406  3.9015682355785177  3.9007047590122044  3.900448224685821  3.8999367290862197  3.89816522154911  
3.8976398976583617  3.8970970619315293  3.896851856935491  3.8968433317682005  3.89656243337841  3.896447434074532  3.896626835834928  3.896481758537685  3.8964285263434864  3.896846139780637  3.89654603331812  3.8962239877976703  3.8960582604936276  3.8958583495831434  3.895898961562108  3.896045441745519  3.895518488917688  3.8953989747484603  3.895419154553245  3.8943059830648354  
3.8939264204541693  3.893649896298505  3.8930379986439583  3.892934245539849  3.8928707698250635  3.8931052461267446  3.8929473641070746  3.893116580142312  3.8935183543436547  3.89390261244653  3.893621786129787  3.8936493918347166  3.8942832734709194  3.8941414887875947  3.8935472255498405  3.8936429327252413  3.8934764653222667  3.8933582804327993  3.893196755284736  3.893297340604912  
3.893038292432962  3.893144495467717  3.8938110085874897  3.8944070628085776  3.8943691618826
--------------------------------

2020-03-27 01:33:52.975985

0.56003 점수 나빠짐

item_id  dept_id  cat_id  store_id  state_id  year  month  week  day  
weekday  event_name_1  event_type_1  snap_CA  snap_TX  snap_WI  sell_price  rolling_mean_t7  rolling_std_t7  rolling_mean_t32  
rolling_std_t32  rolling_mean_t64  rolling_std_t64  rolling_mean_t96  rolling_mean_t180  price_change_t1  price_change_t365  rolling_price_std_t7  rolling_price_std_t32  
('boosting_type', 'gbdt')
('class_weight', None)
('colsample_bytree', 0.8)
('importance_type', 'split')
('learning_rate', 0.1)
('max_depth', -1)
('min_child_samples', 20)
('min_child_weight', 0.001)
('min_split_gain', 0.0)
('n_estimators', 400)
('n_jobs', -1)
('num_leaves', 2048)
('objective', None)
('random_state', None)
('reg_alpha', 0.0)
('reg_lambda', 0.0)
('silent', True)
('subsample', 0.8)
('subsample_for_bin', 200000)
('subsample_freq', 0)
('device', 'gpu')
11.94289851348719  10.623894388952195  9.568313217873856  8.68022026541041  7.968595521521451  7.3766872099373915  6.906873508030715  6.507567776761882  6.174619612959376  5.904069769588658  5.6789552990194805  5.4975642339293485  5.335453326344393  5.213317113151067  5.101583979057128  5.000889969521658  4.923343457903412  4.85724673063931  4.787517122833249  
4.733875918669939  4.6966158034527465  4.653587259504075  4.62962170763632  4.601866756423586  4.568720534810826  4.54831198561958  4.534023397333373  4.500255127879811  4.490481203802273  4.468168003061019  4.455698278029481  4.442030955726576  4.415783294342481  4.391625655514905  4.381883280058987  4.3719652511080325  4.357981274843871  4.345618209058215  4.331368322480863  
4.323789456843938  4.3178752499483215  4.3084275921398545  4.29566460977417  4.283436745932379  4.274328366593271  4.268528014977526  4.256478441640754  4.2399043612993585  4.231218165393955  4.222941853045722  4.21771898474676  4.210106706768748  4.204013434098743  4.192107989519064  4.179279490542039  4.168508918079417  4.165592191528084  4.154823190852624  4.145699768800706  
4.1361077450885855  4.1342000758989235  4.130287279320323  4.123908119184933  4.121639008075131  4.116659801350144  4.1127377911480885  4.106281371029539  4.105253876005272  4.102778424451461  4.097949175251904  4.093109163412558  4.091586177592627  4.090070259837767  4.078927193828003  4.068897905154459  4.068085290496868  4.067915795935863  4.062747063325818  4.0585744440571965  
4.051887814869503  4.049261909863002  4.048254050760203  4.044652263281942  4.041031951537287  4.036657130691909  4.0324236848647335  4.031365791716086  4.026583891997982  4.023912144837931  4.021069166353039  4.018799905148119  4.017188884255304  4.013062459411419  4.006889113588184  4.006249715307819  4.00280804474823  4.00157071306781  4.000768439408593  3.9999567901445374  
3.9986682528995314  3.9954905063559347  3.991943388000062  3.990439157941771  3.9897280236090764  3.9884506609657118  3.9850108160386837  3.9810248030428736  3.9797119072078053  3.976079807913102  3.97235777355082  3.971554166374705  3.9699884738966915  3.969963075712998  3.9684922752768097  3.968188439119297  3.9656566477488053  3.965324942912383  3.9646909512524138  3.964226194976853  
3.9617390267838233  3.9610949835693456  3.957549390829097  3.9557005661540834  3.9537625834354553  3.952851720141854  3.9505408534670416  3.95067157940166  3.9501568404740697  3.949914214696012  3.949376075518658  3.9483545271298777  3.9481580830427956  3.945024307952553  3.9447922069053973  3.9432452454422555  3.9416934029345985  3.94082730180641  3.9405351582232453  3.9397798092332112  
3.9383114542342716  3.937456813718986  3.9371121640538527  3.9357341856166705  3.93508337325948  3.9343218965600766  3.934123602943636  3.9336708766903024  3.9300705383868895  3.928759971892031  3.923929101225216  3.922696618928657  3.9208371355664124  3.9201591287225037  3.919795011293118  3.9197623647756594  3.9177603597046087  3.9140268911794975  3.912426400580285  3.9124062522854035  
3.909252773055118  3.908805500998793  3.908467145855476  3.9085476276718585  3.906384957354376  3.906141129072324  3.9050665557695816  3.9048184776065358  3.903532732403655  3.902033553660121  3.9017905522909277  3.9004484841226095  3.9000365530625603  3.8996041173271183  3.8981628044008896  3.897734982646544  3.8976995626420132  3.897044965377146  3.897004272613461  3.896546782039281  
3.8954516569539277  3.8953331968156766  3.894901420767597  3.8947128982618975  3.8948264605680496  3.893872928442631  3.893449859225423  3.89179935979182  3.890732994354229  3.890756450980804  3.8904502516924757  3.890404712735383  3.889349138985074  3.8889726406817133  3.8890585289861845  3.8885603118390977  3.8874867855758777  3.886618124397994  3.8863987722225657  3.8862492380444276  
3.8858108100890725  3.8852485295378134  3.8851702561336414  3.8856794005166004  3.883918582426978  3.8832976168312947  3.8826376498599307  3.8825955341551133  3.8824230364632184  3.8827249238584214  3.8826551355278536  3.8822158900594035  3.8821216422596585  3.8815465421413906  3.879037405664717  3.8780246306613324  3.877979613538389  3.8776232921829124  3.8774096098104964  3.8765642934680713  
3.876489773780434  3.8761698731313152  3.875775653118618  3.87458741352262  3.8748295378020323  3.873766937434032  3.873724335361493  3.8733394531862113  3.871236039074026  3.871133805698855  3.8711646275524236  3.87095454451941  3.8703980228808708  3.8697738444169407  3.869022431477874  3.8689086743156325  3.8688425645203632  3.8686230072416543  3.8673626937108616  3.8661411288714174  
3.8656576147936317  3.8652857792461077  3.8652968743772442  3.864693321541337  3.86487121294819  3.864958036628634  3.8647267882894045  3.864735392514229  3.863761322876814  3.863537693758907  3.863415342849431  3.8621673766958944  3.861661556900979  3.861197706307863  3.8612393816758037  3.861228588681777  3.860939616178516  3.8603921036210482  3.860192778906632  3.8599369453291126  
3.860279958341458  3.8604718148242165  3.8595019042384258  3.8588266088983523  3.8588573026614803  3.8588978901041555  3.8590835783430055  3.859357415792812  3.8593276567730013  3.8590841645798606  3.859113633833291  3.8587211673162565  3.8582888183574315  3.8573667083603285  3.857747923901976  3.857814647169945  3.857716726730714  3.8581066910966926  3.8576388075780335  3.8570264638358114  
3.856566434735555  3.8565279255526224  3.8565654120839983  3.856507983080513  3.8562463032869174  3.8556805643527587  3.8552835740334555  3.8552705336636826  3.8553637954259115  3.8555114454088004  3.855905166780212  3.855539543770691  3.8546054787322164  3.8551005876636717  3.8547404228137885  3.8548473954720066  3.854957913016991  3.8545307829776445  3.8535725855696286  3.8529538769230154  
3.852582552606235  3.8517192129207367  3.85157141529205  3.8512448190157147  3.8512199796820545  3.849897347068257  3.8498975526269095  3.8491844560763404  3.8490664149904066  3.848455854793868  3.847932338668392  3.8480220498745803  3.8477491672196695  3.847858098567566  3.847971157950583  3.8477883542001834  3.847678352392123  3.847212125331058  3.847213137402674  3.847322446295775  
3.84698039900416  3.8469847328334352  3.846075883791709  3.8461182627781674  3.8454793516091668  3.845347308245795  3.8450614931044753  3.845108032854583  3.8456141639675465  3.845558843617174  3.845689382614755  3.8454418014936764  3.8457400550684606  3.8457753569433284  3.8457274890469537  3.8452094602413434  3.844969735108064  3.845059724286227  3.8451159970525928  3.844961546495247  
3.8440687407933454  3.844045626162809  3.843849336882633  3.843712408236026  3.843435902714974  3.8435499124208587  3.8427473047422724  3.8423120384754528  3.842056774591884  3.842219636079594  3.842117422276824  3.8414972599942483  3.8412085844126618  3.84114248213038  3.841335329705254  3.841493591700961  3.8414762909429827  3.8417257737927915  3.8414807096418455  3.8406878594421485  
3.8399661698626404  3.839370613606987  3.8390991541167936  3.8391605459078857  3.8391421081441983  3.8388176383099726  3.8388436893694946  3.838973348361064  3.83892649403188  3.838577905048816  3.8385082378711117  3.838835523967792  3.838892354346775  3.8381073505740986  3.837906027207752  3.836947002464725  3.836724757380248  3.8366532794833414  3.836522613230366  3.8362380192028938  
3.8364752584150943  3.8364117441196335  3.836531869406474  3.8364073728157906  3.8363065484862338  3.835426825092207  3.8352445462059648  3.8352672290389607  3.83545670667146  3.835211856012338  3.8349248766767094  3.8347235103568837  3.8348311826797143  3.8346233887667296  3.834484924283349  3.8346691373583046  3.8349594190683787  3.8348397679960677  3.834804424752373  3.835091364444731  
3.835095352567346  
--------------------------------

2020-03-27 02:34:47.547694

0.55785  과적합이 아닐까 싶다.

item_id  dept_id  cat_id  store_id  state_id  year  month  week  day  
weekday  event_name_1  event_type_1  snap_CA  snap_TX  snap_WI  sell_price  rolling_mean_t7  rolling_std_t7  rolling_mean_t30  
rolling_std_t30  rolling_mean_t90  rolling_std_t90  rolling_mean_t120  rolling_std_t120  rolling_mean_t180  rolling_std_t180  rolling_mean_t60  rolling_std_t60  price_change_t1  
price_change_t365  rolling_price_std_t7  rolling_price_std_t30  
('boosting_type', 'gbdt')
('class_weight', None)
('colsample_bytree', 0.8)
('importance_type', 'split')
('learning_rate', 0.1)
('max_depth', -1)
('min_child_samples', 20)
('min_child_weight', 0.001)
('min_split_gain', 0.0)
('n_estimators', 400)
('n_jobs', -1)
('num_leaves', 2048)
('objective', None)
('random_state', None)
('reg_alpha', 0.0)
('reg_lambda', 0.0)
('silent', True)
('subsample', 0.8)
('subsample_for_bin', 200000)
('subsample_freq', 0)
('device', 'gpu')
12.012186448655823  10.681510841472168  9.58925510184447  8.704003186607315  7.9817038152928  7.393062678955544  6.919290497274601  6.518649849660928  6.171250149165942  5.898034115914915  5.6810528733463785  5.499308635872215  5.350129947853951  5.223227542888719  5.117502828560016  5.026774773812543  4.944527022369814  4.880449244057766  4.810247668463275  
4.7448147013103235  4.707019603627739  4.657516084908584  4.623719710774907  4.598906145023276  4.567154883925759  4.548252650494279  4.529146720843744  4.514823277819977  4.483035653376755  4.463098660332309  4.453842991028416  4.434651519344813  4.425506751288196  4.411334318762694  4.401676374867559  4.388422446496808  4.3769833082111  4.366923226621818  4.355340316839863  
4.347264231083113  4.341193778728329  4.33046172093904  4.309697962378884  4.292002725765953  4.277513758423652  4.272237278379925  4.264637240156101  4.25087054424844  4.24376546281727  4.237195749339269  4.223842848050122  4.210364542840595  4.20501325482398  4.188354435273097  4.176427751941156  4.168142729192702  4.162256435107692  4.158541224066382  4.152942746392337  
4.140908381036743  4.136254625484651  4.132229837754039  4.129244969812085  4.128506342025226  4.12360957428691  4.121251812821306  4.10689920970873  4.10121390645951  4.090865347112431  4.089129600085322  4.077531346219404  4.071995492943164  4.06734565138347  4.060433303430368  4.056923883862571  4.05421537864382  4.050112254223282  4.047436880927247  4.045545708762134  
4.042424352769171  4.040117094924184  4.037446339532361  4.035931315868679  4.032212016453292  4.0298097469762135  4.028011501073004  4.027653457858736  4.024184082664096  4.023222933065825  4.0213224722574  4.014323557996329  4.014064315382058  4.012278242774758  4.006615962925067  4.004768010028813  4.004156692085049  3.998553383916626  3.9961323794615113  3.995002925426458  
3.99276280995826  3.9916656013304355  3.987999417204761  3.986130254380373  3.983257543469545  3.980914672788464  3.9797233293415126  3.9772580033154696  3.9758582450925415  3.9755217900564985  3.9748177589672316  3.973072128143056  3.972227469124246  3.972012516228473  3.971802795655898  3.971136879084532  3.970152092843792  3.9694425841130525  3.967654479728302  3.9644340704236707  
3.9611529417601505  3.9586967627647582  3.9579705857116223  3.9576659048848057  3.9559263044281905  3.955102558004603  3.954901811085658  3.9527840510279595  3.952732881179088  3.9522591006826335  3.9511353494825157  3.951143652720226  3.950143802193441  3.947971508523352  3.94783352892771  3.947516652568103  3.946397460741354  3.945596796469433  3.94531807206846  3.9426451239122113  
3.9415688257983637  3.9402879474887245  3.939236080283979  3.938745431510237  3.936198892059602  3.935752296081825  3.93438872408068  3.933816699647462  3.932277659104189  3.931651991326261  3.9308573206496082  3.929283777674523  3.928840106627221  3.9284518327042197  3.928235081694468  3.9289775155262356  3.9286781868904845  3.9276039730757093  3.926531321669503  3.9254220961015394  
3.9249007845945054  3.9256416240317487  3.92528771558981  3.9220807321186015  3.920895798173815  3.9203035673558997  3.917913191248476  3.9172144638347643  3.9169330925190224  3.91562332263983  3.9148735819718437  3.913365424686467  3.912533714154542  3.912841518697719  3.9126595107663538  3.9119245110440115  3.9108447530342993  3.9104104268769473  3.9098625891977017  3.909592298895804  
3.9096927932372765  3.908661455380147  3.90694990644119  3.9067406184675777  3.9061833118875056  3.9060679133979157  3.905618540570132  3.9053715720284012  3.9047717083606  3.9051438097124525  3.9048020121463773  3.904297934895521  3.9048780778198475  3.90415952641688  3.9040256376087856  3.903802108746997  3.9037364517657984  3.902578573199156  3.9017015702457507  3.9017077796727118  
3.9013587372882554  3.9010245384027225  3.9005693936321237  3.8971254384350753  3.8967874898916603  3.8965411820529186  3.8957760709299802  3.895597526658612  3.8959497643577006  3.89476040092569  3.894859239427492  3.894092852088806  3.8937594300032807  3.893257310049812  3.8917018143237243  3.8918421010270006  3.890982634186029  3.8905517242616647  3.8904959251163964  3.8891589130211717  
3.88935923783798  3.8884101433616114  3.8881405920356378  3.888363111820447  3.8876756969131097  3.8859864239988937  3.88544010133278  3.885233602272574  3.8843630715008097  3.8842258612155462  3.883798833991988  3.883317201121884  3.8829963877631175  3.8825236159456566  3.8804928620648615  3.880099027386151  3.8799670876321257  3.878266660681463  3.878219463205482  3.87758712970533  
3.8774458885971654  3.877498702730988  3.8776504404371304  3.8780177995094816  3.8773530929619824  3.8772606631246793  3.87617922377673  3.8747225689888407  3.874090930179532  3.8739142373159487  3.873943918430157  3.874279809808443  3.873916950294023  3.87323551879683  3.873195835436049  3.873502513683512  3.8723069941338055  3.8721525293126557  3.872419076607025  3.872232650223933  
3.8724091091447574  3.870500477956635  3.8700091819318185  3.8703058007027304  3.8701146625368446  3.870153930328639  3.8699631031312025  3.870147255602624  3.870132234589578  3.869610128067978  3.8695256316866113  3.8698357265663743  3.869596561982838  3.86972049142447  3.869638238517056  3.869554832388323  3.86867419590867  3.868853277175024  3.8685107991678693  3.8686912266059443  
3.8689913948690386  3.8671247442580223  3.8673023732675142  3.867315572732908  3.867649893281482  3.8672147971662763  3.867164154611333  3.8667382668878174  3.8667964349661332  3.8673316327036567  3.866422838094298  3.8663931921335344  3.8661396323042867  3.865653241547261  3.8652162462881168  3.8649997368333384  3.8654576115871038  3.8653532669079684  3.8657395614058703  3.8656938177383267  
3.8659700751969877  3.8655111435568417  3.865556226423684  3.8641124280758983  3.863484200913176  3.86268464689424  3.862674767511908  3.8626414349904277  3.862132378936514  3.8615183530008497  3.861540349646181  3.8612300704439106  3.8605650572859713  3.860603109184262  3.860606101487361  3.860084676029748  3.859648633716261  3.859261597757207  3.8590592172845377  3.8591543085698357  
3.85833599940641  3.858151501380356  3.8577025680078734  3.8577616502346213  3.8576344449384874  3.8576704736828225  3.8574937981917246  3.857781755826208  3.858003289584049  3.857844155076564  3.857079103335207  3.857036074075258  3.8567093720959056  3.8557956869573893  3.855939654996854  3.85519909540253  3.85442013942369  3.8541138771534857  3.8532722395384993  3.853066486186579  
3.8529659713023725  3.852913798750937  3.852828962223879  3.852839335727148  3.8520365490045103  3.852130381666553  3.852099068683361  3.8520308550036924  3.851886883540756  3.8513044228624094  3.851229919921053  3.8511455124360863  3.8505640353109483  3.85079672539699  3.8511592130096557  3.851042761210738  3.850542652524816  3.8498265345848317  3.8498520210980756  3.850119378474679  
3.8498074829744744  3.8502032263267525  3.850254130014439  3.850084812325356  3.8504432088420617  3.850337920297556  3.850173160281888  3.850168063651773  3.84994366266728  3.849788479243831  3.8500577304207386  3.849986168581109  3.8497476388844714  3.8492446014058674  3.848447997281521  3.8485740456543422  3.848368631221364  3.848377954851747  3.8483909732008583  3.848198293102107  
3.8474924206137433  3.847403194092736  3.847399235707373  3.84688009201464  3.8468525264090276  3.8467936796607565  3.8458029434393888  3.845826196070802  3.8453221331402188  3.845137535796572  3.845070945196773  3.844406876937151  3.8445421467277945  3.8445640865643282  3.844536018275833  3.8443368484276434  3.8441564607523593  3.844208548570208  3.84415110355679  3.84417339648492  
3.8443291684986134  
--------------------------------

2020 03 27 03:30 - 0.57252  데이터 형 변환하는 1등 노트북 참조. 나름 나쁘지 않은듯. 피처 추가 해서 돌려봐야겠다.
1등은 현재 피처가 50개 전후라고 한다. lr은 0.05로 두고한다고 함.

'item_id', 'dept_id', 'cat_id', 'store_id', 'state_id', 'd',
       'release', 'sell_price', 'price_max', 'price_min', 'price_std',
       'price_mean', 'price_norm', 'price_nunique', 'item_nunique',
       'price_momentum', 'price_momentum_m', 'price_momentum_y',
       'event_name_1', 'event_type_1', 'event_name_2', 'event_type_2',
       'snap_CA', 'snap_TX', 'snap_WI', 'tm_d', 'tm_w', 'tm_m', 'tm_y',
       'tm_wm', 'tm_dw', 'tm_w_end'
	   
	   ('boosting_type', 'gbdt')
('class_weight', None)
('colsample_bytree', 0.8)
('importance_type', 'split')
('learning_rate', 0.1)
('max_depth', -1)
('min_child_samples', 20)
('min_child_weight', 0.001)
('min_split_gain', 0.0)
('n_estimators', 400)
('n_jobs', -1)
('num_leaves', 2048)
('objective', None)
('random_state', None)
('reg_alpha', 0.0)
('reg_lambda', 0.0)
('silent', True)
('subsample', 0.8)
('subsample_for_bin', 200000)
('subsample_freq', 0)
('device', 'gpu')
--------------------------------

2020-03-27 03:53:05.171107 - 0.56684  id 추가했을뿐인데 점수 완전 오름.  시계열 피쳐들 추가할 시 기대됨.
id  item_id  dept_id  cat_id  store_id  state_id  d  release  sell_price  
price_max  price_min  price_std  price_mean  price_norm  price_nunique  item_nunique  price_momentum  price_momentum_m  price_momentum_y  
event_name_1  event_type_1  event_name_2  event_type_2  snap_CA  snap_TX  snap_WI  tm_d  tm_w  tm_m  
tm_y  tm_wm  tm_dw  tm_w_end  
('boosting_type', 'gbdt')
('class_weight', None)
('colsample_bytree', 0.8)
('importance_type', 'split')
('learning_rate', 0.1)
('max_depth', -1)
('min_child_samples', 20)
('min_child_weight', 0.001)
('min_split_gain', 0.0)
('n_estimators', 400)
('n_jobs', -1)
('num_leaves', 2048)
('objective', None)
('random_state', None)
('reg_alpha', 0.0)
('reg_lambda', 0.0)
('silent', True)
('subsample', 0.8)
('subsample_for_bin', 200000)
('subsample_freq', 0)
('device', 'gpu')
15.051385478275948  13.491900908415348  12.268401242339005  11.19852227137345  10.333243721405376  9.642090774862769  9.0353498599214  8.551844050623068  8.20495480096595  7.843427919486442  7.52206509153806  7.2785483811866944  7.09662762789801  6.91905784408036  6.760961390934843  6.631149267273331  6.523647592015398  6.417981156590171  6.321837334195851  
6.215215029336333  6.131615731220953  6.073340168414279  6.014701857942079  5.958939769907261  5.910901370932869  5.880217808598648  5.831599772032552  5.795388063369919  5.769260231909053  5.719854264596484  5.6796838115414925  5.657760869251659  5.6366743704384135  5.602905007725906  5.569872096978839  5.539217724098083  5.516593805759144  5.504773835788752  5.4684246030252055  
5.458908667689861  5.431690094478725  5.398460832925598  5.39059095462328  5.382898166926833  5.373904932841369  5.345198706593592  5.337350729363507  5.329781390432506  5.305733220590542  5.298395594634549  5.290402488019127  5.281894900598748  5.272057224523773  5.262237636808194  5.252199760965983  5.240470237473991  5.234509198103666  5.229743796259264  5.2244677595095235  
5.203310872727367  5.193333961715787  5.186747376537688  5.17030847814415  5.165020466064647  5.147383094073234  5.132898509262218  5.122242494207244  5.112417422562538  5.109365252639463  5.096713217170867  5.086815669645281  5.082577603066028  5.068334951852905  5.063414194085621  5.0565935920442  5.05256312911168  5.040647977865245  5.037743180601125  5.03023192085394  
5.026710163162004  5.021452435026693  5.013270866910997  5.003034501190885  4.994688960697589  4.990500405220124  4.982720548701941  4.978017700832095  4.97021831584774  4.963418867287459  4.95715914032972  4.949288762423579  4.9437138940407  4.93723966829551  4.932284925873467  4.927825491768978  4.925940680480978  4.922978005638485  4.9156809967778194  4.911382738845647  
4.907127143118535  4.90485975510813  4.89816832115329  4.8924349374218465  4.8895923536137085  4.88544702703268  4.8793806076448805  4.873096103934542  4.8704308862301  4.864841524674283  4.860156571946806  4.855831532958615  4.85083954013138  4.848295970306547  4.846791704362566  4.843682093029451  4.842576730763992  4.839162370681682  4.838325102870315  4.836433790383258  
4.833067462948199  4.828871836404912  4.824625464103119  4.821633204256073  4.8204145787226285  4.816794501396881  4.816306066622583  4.813922431236518  4.811170151784432  4.808225413860728  4.805270734220562  4.804698334109528  4.7986875787825465  4.795628750272215  4.7926127774470695  4.787908007584439  4.786310136160448  4.785515156292874  4.783549439682043  4.780908091498122  
4.778929745753541  4.778283458013275  4.775494683513942  4.774200569029858  4.7721210312887425  4.771044101461643  4.769861504160363  4.767564680455859  4.7647567040636405  4.7623769131835845  4.761587338541599  4.7587739099400705  4.757877718194892  4.7555222424778085  4.752614086015287  4.750878137285994  4.746834918823043  4.743054417375754  4.742280572537116  4.741644456018307  
4.739037302508869  4.737347796317231  4.735658914757512  4.734039793676748  4.733986753082693  4.731862755661675  4.73025204938824  4.729790198242191  4.727430231671079  4.72598733205218  4.724662642167872  4.723006526892655  4.721312073552348  4.720175618569876  4.719448139546291  4.7182690227359085  4.716313120669014  4.715101285186183  4.713412870752325  4.712659528200518  
4.711101177851492  4.710356896789391  4.709968014404076  4.7095835180631695  4.70866697163434  4.706979601921123  4.706188421517717  4.705054143267709  4.704376337668638  4.703525703776579  4.702108323365523  4.700737021247935  4.699390162667802  4.697605289785238  4.697518145829146  4.6965348729320695  4.6956996632675265  4.6953364927250885  4.694898396951508  4.693895219811395  
4.69311864761607  4.689885073035718  4.689835848423725  4.689551776460104  4.688958655723472  4.6891888348837565  4.686990798473036  4.685269549653723  4.683965077333169  4.682632007729066  4.682103350527006  4.681052784691571  4.680037277906641  4.6800206135488756  4.678554736212898  4.677401022115121  4.675138250286592  4.6742335386134055  4.673894427261611  4.672805033396808  
4.672832543906895  4.6713500626746765  4.670869115025673  4.6677497296319785  4.666780947563965  4.666810239058721  4.6667334979259705  4.665869208280268  4.6658066588656935  4.66530070907289  4.664558303664762  4.664097578581211  4.663369631177851  4.662933918433854  4.662695594341343  4.662300862029297  4.659665695677734  4.658517748473698  4.658071571607846  4.657179787322462  
4.656236753180935  4.655202667282417  4.654182698298578  4.654019157254578  4.6540096213373285  4.653488489632011  4.653274147227808  4.652195600070068  4.651844478294464  4.65119697032143  4.651482725111228  4.65112225172646  4.649625078599307  4.649632715395718  4.648406803238389  4.647692522287774  4.64746932909885  4.646816051793708  4.646127962461753  4.646207391074825  
4.64517167657785  4.644234449733547  4.643371530616793  4.64276818632003  4.642507637187639  4.641035852541612  4.64051237061546  4.6402734979542615  4.639962036396886  4.6395257136159636  4.637056371348854  4.636483051065695  4.635265782263267  4.635261300182011  4.634334541948623  4.633672530943372  4.633439025809617  4.63347214351791  4.632714063154222  4.6320814409481  
4.631153554170697  4.629547550843128  4.629144210940689  4.627962353494563  4.627395392015439  4.627080437775595  4.626274574138136  4.625174176870915  4.6248019316471485  4.624496817405159  4.6234748080771695  4.622703733874274  4.622412204872297  4.621423244166958  4.621465260676678  4.620787400189483  4.620448325015799  4.620485056151754  4.619843025219581  4.619266680609334  
4.618131699236892  4.615992949933851  4.615545807283311  4.6150699872145085  4.614999531679673  4.614967166898986  4.61483636718562  4.61462619085112  4.61366353229346  4.6132152589793884  4.613199053553008  4.612309810422037  4.612101542142345  4.6112195525174835  4.611259885739026  4.611025479700408  4.610915022729621  4.609985049574039  4.6086925984653515  4.608543976862921  
4.608216937268611  4.60688008279221  4.606621390649758  4.606601336458958  4.605501423544734  4.605463705171184  4.605528353336281  4.604145954727405  4.604069155529497  4.603121476908302  4.602915681714093  4.602755355341282  4.602910463740884  4.6024358997638215  4.60186214989539  4.6012025873847335  4.601374735440244  4.60082424923557  4.6005952345278365  4.60009739992194  
4.599766565489923  4.599334987234146  4.598832412304952  4.598618677415122  4.598235652396599  4.597753022811391  4.597335802921148  4.597393263600312  4.5975663752838685  4.5980502249778334  4.597440501897295  4.597293851747276  4.5965154934349375  4.595439200906094  4.595401690643791  4.595342983802653  4.595382985962013  4.594588762288398  4.594514086296632  4.593757100857233  
4.5936303657487185  4.59317597887275  4.5932991223331445  4.592884002383266  4.592734737470922  4.592846748793834  4.59206364959236  4.5916419050675765  4.591766252505839  4.591128994533767  4.591076788969211  4.591663474586764  4.590948532124887  4.590346012414007  4.5900937751437025  4.590137999230503  4.5898645446414825  4.5900466702497384  4.58973126197211  4.589712354853262  
4.59009916973825  4.589582043290736  4.589205270222742  4.589076618948699  4.589028229745142  4.589117168650068  4.588562167340359  4.58819587479366  4.587944187123281  4.588026344909896  4.587826093197686  4.587325677540527  4.587251468675204  4.587722350942173  4.587728355874732  4.587467960625866  4.58609356487049  4.585519950981422  4.585483320818533  4.585552560685374  
4.585560875021222  
--------------------------------

2020-03-27 04:14:45.391997

## 1등 노트북이랑 비교해서 카테고리형 피처 빠진거있나 확인하기

0.55836 - id 추가했는데 점수 안오름. 근데 이건 learning_rate를 줄이고, n_estimators를 키워볼만할듯

id  item_id  dept_id  cat_id  store_id  state_id  year  month  week  
day  weekday  event_name_1  event_type_1  snap_CA  snap_TX  snap_WI  sell_price  rolling_mean_t7  rolling_std_t7  
rolling_mean_t30  rolling_mean_t90  rolling_mean_t180  rolling_std_t30  price_change_t1  price_change_t365  rolling_price_std_t7  rolling_price_std_t30  rolling_mean_t60  rolling_std_t60  
('boosting_type', 'gbdt')
('class_weight', None)
('colsample_bytree', 0.8)
('importance_type', 'split')
('learning_rate', 0.1)
('max_depth', -1)
('min_child_samples', 20)
('min_child_weight', 0.001)
('min_split_gain', 0.0)
('n_estimators', 400)
('n_jobs', -1)
('num_leaves', 2048)
('objective', None)
('random_state', None)
('reg_alpha', 0.0)
('reg_lambda', 0.0)
('silent', True)
('subsample', 0.8)
('subsample_for_bin', 200000)
('subsample_freq', 0)
('device', 'gpu')
12.314419986826787  10.97104172055463  9.863037573006286  8.95926897838735  8.224480434852563  7.625661413611734  7.118748193307173  6.713984273109674  6.367556531479504  6.085925613564361  5.861745143167269  5.669997056369644  5.513514912640949  5.37355722890365  5.24799101856249  5.157586221623182  5.0649690729824375  5.002173377506934  4.9507651894567495  
4.906685490094521  4.856282345149772  4.82477408940358  4.792050812322846  4.766773342769652  4.745951140889348  4.7240187967621745  4.705880063700434  4.690871282549361  4.6782352880222655  4.65029238260732  4.630074289191485  4.615119040093611  4.593305394579368  4.578242668510909  4.559544809581475  4.547916125656791  4.5280236359856305  4.507572997096531  4.491342592127676  
4.479124002031809  4.465900157949936  4.458295185862414  4.443066401562642  4.43197209448009  4.420837394010023  4.408197291274425  4.391125697160675  4.384462900127881  4.376720172284122  4.370854744296481  4.361977929859467  4.346656213477614  4.3415076072322725  4.334620293356067  4.321259066593022  4.310129508275587  4.297024988759701  4.293485114025192  4.284906966310493  
4.282442485933161  4.278918331357294  4.270972355060771  4.265461871615067  4.263191944384305  4.253283416770599  4.247543286426426  4.239811715305289  4.238443184185411  4.2269160088297015  4.220383307325843  4.217766882848635  4.215718260863082  4.2106974092275875  4.205635783881601  4.198345127487763  4.195989035710929  4.1916728427226015  4.186693005548072  4.179969970010186  
4.176592357538835  4.173725836581959  4.171664846952923  4.165131291908806  4.163173469192466  4.159682535776346  4.159168960995474  4.154540495937199  4.153842233979316  4.149595710225727  4.148548065308171  4.145668987691383  4.140053674094503  4.13834442676822  4.135810731135647  4.135422669146842  4.133129099359318  4.131728181610601  4.127619998504222  4.127159811898915  
4.121851393344372  4.119921048302625  4.117777747178586  4.115333919712482  4.109116268137076  4.105384899753618  4.103242451509316  4.101624751212326  4.10159897639858  4.1004539011275  4.100037479233643  4.099121558903401  4.096465002552376  4.093340256735146  4.092064532663875  4.091267336253676  4.0911313399671165  4.090649837207199  4.090667723378817  4.089281056913695  
4.089060966644607  4.087675389813027  4.084130236698079  4.081233321542004  4.079315506539552  4.077728519709909  4.077304191088817  4.0753416084910175  4.0734176501186115  4.07244956569235  4.069994430561583  4.070506206245921  4.069994391646585  4.070011365314391  4.065615176537471  4.064392908404355  4.06170967991332  4.061376316643358  4.059547581270803  4.059182145467891  
4.058611821979945  4.058334099900945  4.055806305358963  4.056030821212308  4.056048565814154  4.0549946336389056  4.054037108694352  4.0515628760672975  4.0507588012658235  4.05018704919906  4.049871232366138  4.046906654315452  4.043312822280526  4.042951666091113  4.042770519993737  4.041997760524585  4.041569173160636  4.040168744211551  4.039958975877755  4.03896420439908  
4.038572576544837  4.038140081028792  4.03714810350429  4.034599045637366  4.033468706153719  4.032074879743203  4.03127208888646  4.030375078877884  4.029847647448838  4.028694603655425  4.027806510712658  4.027284678409475  4.026146949310069  4.024976269875965  4.024691016815974  4.024398171420807  4.023617417199074  4.023337865199922  4.02292265608315  4.020207314305366  
4.016959693433769  4.016492958562339  4.01518818674213  4.014596805247182  4.0138515534904995  4.013499815902889  4.012824430781762  4.0120442589518035  4.011640017601777  4.0107683637771565  4.010640925994516  4.010055180147151  4.009217992198333  4.009138534577361  4.009042977557663  4.0089514685275685  4.008825399034123  4.0092819378692015  4.008790298759967  4.008195053040977  
4.007828033621325  4.006648890168298  4.005469759241083  4.004274636298183  4.002485934513835  4.001943161992981  4.001839516877358  4.0015124420241035  4.001675137114453  4.00156398208577  4.000985199183744  4.001465522505587  4.0009185337796  4.000245262805811  4.000393312484872  3.9986082640924208  3.998437496265  3.998059881305676  3.997941805152005  3.9979970985116866  
3.996618179916747  3.9957613871068274  3.995486796469238  3.996024883115787  3.9947590660017678  3.9945601991451327  3.9941311957386425  3.9938798135126006  3.9929164185257378  3.9933738763735813  3.993275237947778  3.9929034194752675  3.9925627128861105  3.9928170412101647  3.9923232378036273  3.9919976079701547  3.9920624510918086  3.9919343277687447  3.9917679821142804  3.991688916079247  
3.9910116781704286  3.9910803640546897  3.990858226306831  3.9909369782355903  3.990570097027579  3.990754890381215  3.9905166354696453  3.9904840745233927  3.99059710135789  3.9902672694103587  3.989101944795213  3.9886923546515742  3.9886624302020968  3.9889785902791246  3.988740908923433  3.988626543881339  3.9872953988434774  3.986897001247509  3.9867476199173626  3.9863063331020037  
3.984654813198172  3.9838393387296867  3.9837675525171914  3.983418661529374  3.9834793391938472  3.9837010824303807  3.9834917687992313  3.983178251666106  3.982984810237522  3.982317044634564  3.9822994881537253  3.98266413784443  3.9823079109779567  3.982717035485884  3.9823481417663738  3.982294830846496  3.981686916814004  3.981584835817034  3.9815494611310895  3.981841478628688  
3.9818198970208947  3.9815447466303096  3.980670761864654  3.9803164901775543  3.980026078044072  3.979810909818101  3.9799295011190146  3.979632982607397  3.9792878399074905  3.9789439088435214  3.9786365069839995  3.9788267664159465  3.979166129471762  3.9790991451661077  3.9789111571637656  3.978722877659128  3.978402559718066  3.978289455148284  3.977686869188825  3.9770063384179912  
3.977085047731642  3.9768089128301543  3.976804029176787  3.976498162494787  3.9757629815344298  3.974881365721503  3.974774884477341  3.9734142226011544  3.973587562278499  3.9734322965035136  3.973602973272128  3.973235129897813  3.972789203997879  3.9728081068075056  3.9721937757750254  3.9728219238311913  3.9724987295385588  3.97234715089193  3.9724614530878113  3.9723217144702674  
3.97247959593346  3.9727454110748903  3.9728260272010942  3.973221502857328  3.972503844378096  3.972028948065067  3.9717789120916476  3.971546698663192  3.9711366208749523  3.9713400786282906  3.9715587056695334  3.970903013432554  3.9711461759717097  3.9708695780776733  3.971171577728603  3.970293716193291  3.970250937169929  3.9700555459536147  3.970129842557683  3.9693563599389994  
3.969286700428612  3.969007456470737  3.9689021918786906  3.9689950684217923  3.96854825615802  3.9684240958291586  3.9684731449033013  3.968403689350906  3.9678820752191135  3.967927898641505  3.967970847720908  3.9679428569987283  3.9677450910598124  3.9677127327679305  3.967538215484165  3.9664722374804064  3.966672322346603  3.9664983459058565  3.966228714559855  3.9658277990544333  
3.966080070110508  3.966180537599369  3.96633463841289  3.966043479458067  3.965973380533145  3.9654207369959753  3.965418632412249  3.9653728387842055  3.9656560303003254  3.9656160683048705  3.965718768930439  3.9641935426812394  3.9644502773030914  3.9644180844964914  3.9642249278322605  3.9642561566148933  3.9642832070900713  3.9643700055961193  3.964053475457156  3.9649354227256697  
3.9647920547934485  3.9644373965730972  3.964560209879593  3.964369481835634  3.963632135348718  3.964076935542763  3.963868093190258  3.9636614050358454  3.9634974989143315  3.9633192253950065  3.96316140454907  3.963006120188214  3.9630451528913815  3.9632529672392796  3.9633060236038697  3.9626509870502016  3.962245972697773  3.9625619086287243  3.9620649118090743  3.9623120727109424  
3.962082556308135  
--------------------------------

2020-03-27 17:55:10.053211

새로운 데이터셋으로 했는데
rmse가 엄청 높은데도 0.55239 점수가 꽤나 긍정적으로 나왔다.
 더 학습시켜 될거같다.

item_id  dept_id  cat_id  store_id  state_id  tm_y  tm_m  tm_w  tm_d  
tm_dw  event_name_1  event_type_1  snap_CA  snap_TX  snap_WI  sell_price  rolling_mean_t7  rolling_std_t7  rolling_mean_t30  
rolling_mean_t90  rolling_mean_t180  rolling_std_t30  price_change_t1  price_change_t365  rolling_price_std_t7  rolling_price_std_t30  rolling_mean_t60  rolling_std_t60  
('boosting_type', 'gbdt')
('class_weight', None)
('colsample_bytree', 0.8)
('importance_type', 'split')
('learning_rate', 0.1)
('max_depth', -1)
('min_child_samples', 20)
('min_child_weight', 0.001)
('min_split_gain', 0.0)
('n_estimators', 400)
('n_jobs', -1)
('num_leaves', 2048)
('objective', None)
('random_state', None)
('reg_alpha', 0.0)
('reg_lambda', 0.0)
('silent', True)
('subsample', 0.8)
('subsample_for_bin', 200000)
('subsample_freq', 0)
('device', 'gpu')
15.30003664355439  13.680746797895694  12.384281034691867  11.296087405705615  10.420846177997463  9.68327167734769  9.093273342698796  8.589137034026232  8.174610289294119  7.844874999207164  7.567675575716298  7.344458316283868  7.148737854981983  6.992607139519405  6.8554144726770865  6.735121757116132  6.636456865277172  6.55137886345183  6.468925219365772  
6.399236696345528  6.345767016463604  6.2874163748016745  6.254536106414632  6.220238059589478  6.175844211714788  6.147863600459009  6.1263150383802865  6.089156974666927  6.072921784326675  6.050614836095376  6.032042057876606  6.019192713271921  5.979349605134731  5.944817831388729  5.9299160331048215  5.917903610132234  5.9058387954586715  5.891135415139899  5.871762185855643  
5.863927528136895  5.857022930231484  5.845120829187453  5.831346158123491  5.81530570028453  5.803703848252402  5.793624640494881  5.772693505864365  5.752974997899604  5.738354165055062  5.73115697710913  5.716858943330433  5.699254224295806  5.6904791562086015  5.679881536149859  5.66690582466034  5.660620334654684  5.6487194433895755  5.64157912399381  5.630423284347002  
5.621043652531569  5.6100829388753946  5.605327646841515  5.589483185708216  5.5847618388420965  5.581750393121365  5.575006240762243  5.572812073473803  5.569391394830434  5.557580841512264  5.547318834168156  5.541961768814137  5.537803305627603  5.533853270782919  5.528609248947904  5.520191181816976  5.518802284366179  5.512564989586711  5.510467349058518  5.506156286466335  
5.497080966833144  5.492038554325808  5.48854766674728  5.486895280212899  5.483742729410893  5.479298558225892  5.472506584193999  5.469441322557788  5.466333337991149  5.465054166452715  5.463735216255303  5.462785677422052  5.456972866019858  5.447932268560303  5.446505843562491  5.4429713482818025  5.441140762520122  5.434781778042125  5.433523796166644  5.429649695245893  
5.425233837901509  5.42489924719341  5.421938091120791  5.420689734755907  5.420475404679069  5.419529873486699  5.41646536962696  5.414446883375409  5.413811211065851  5.409568721863582  5.407145926295141  5.407085205468363  5.403091145300893  5.401789594864954  5.401644116029073  5.402040770406082  5.400053318971691  5.399209974743232  5.399404767092131  5.396904516819856  
5.396678800798863  5.394871131400507  5.387951183078957  5.383517135461805  5.381575936379623  5.379899067074795  5.3799765642004855  5.379492564441348  5.379666835053915  5.377955491351372  5.377693444813729  5.376083915734001  5.372668192734788  5.3695939535500825  5.368869959373275  5.367493769109035  5.365411715967873  5.365558755239018  5.365111322340939  5.365214733301854  
5.364333329832185  5.362468844765836  5.362622362522479  5.358066603558641  5.357834442113288  5.35532053781411  5.35512123574176  5.3528468308952  5.3529176042394635  5.349434405192038  5.348816346019254  5.347253829397619  5.345701892079106  5.3453310836366645  5.345213705826666  5.343493939667903  5.343454998147574  5.341765061031316  5.340673096947525  5.340410187228575  
5.339319757489135  5.339506598578368  5.338755465863893  5.337153360284984  5.336800797474473  5.336646059237509  5.336692101693973  5.33510971366662  5.334432566847807  5.333491970745023  5.332258413795484  5.3303236586980445  5.328521681633358  5.327969256623029  5.328152152232647  5.327740428525372  5.323963879842002  5.323637349857283  5.323870185812185  5.324821723885624  
5.325391257883237  5.325916636328115  5.322967821956756  5.32372502914618  5.323439056672852  5.321399446010294  5.3214642294255246  5.319614966582843  5.317546130064445  5.3166039862537895  5.315021859202803  5.314922002482926  5.31436630281513  5.313806113174291  5.313921378967089  5.312958806541088  5.311068161159469  5.309295854388436  5.309131410742129  5.308148813449801  
5.30801153927922  5.30745194905714  5.3072209871452625  5.307916027352503  5.306310225964859  5.306345656395037  5.306115512157961  5.305980619430984  5.304960051122523  5.304798479121621  5.304537235940146  5.3034949807256515  5.302932384585023  5.302519430694014  5.301536758240243  5.301659468729629  5.300555777467804  5.300782433203692  5.300108276375252  5.299905180335725  
5.3000114486711185  5.297385712288369  5.295852371774802  5.295066021092172  5.294613881857549  5.293987663303496  5.29437162555911  5.2940345188456055  5.2932714531752065  5.292860739630103  5.292312584004135  5.291327733376263  5.291565967425409  5.290268378591817  5.289863982447607  5.289336224295174  5.289888219983353  5.2901440892511715  5.290085427960479  5.289240121123557  
5.288077904178402  5.288038185636998  5.287590619914108  5.284941852795753  5.284590610649448  5.2834325736147845  5.282497867990867  5.282476774875672  5.281764740594949  5.279893193978423  5.278340882790394  5.278199365450042  5.277171419406921  5.276938165763276  5.277761794072515  5.276193757409427  5.275779117812501  5.275699716116917  5.275143910276209  5.27524791208574  
5.274604014352197  5.274761863858202  5.273234165548096  5.272662061793777  5.272676606447691  5.2713673539495005  5.271324420329265  5.271346578392706  5.270794183696751  5.270398382030791  5.2700481023117485  5.2691358822710415  5.2686739771791355  5.268524780834945  5.2687783330222295  5.268583595675682  5.2672501981898305  5.266475437634542  5.2658672736428995  5.265423464438106  
5.26509225566762  5.265309519195536  5.26542539928744  5.265271005833712  5.264932988397199  5.265005713973513  5.264729440465592  5.264846996115949  5.264242885346572  5.263284293266968  5.264163510037216  5.264123222546649  5.264366737364662  5.263661114688364  5.263159916398098  5.262084228470789  5.261572543457801  5.261468443551498  5.260665911758129  5.260577001183509  
5.259626608884898  5.25887754142369  5.258788970435694  5.2587407037388125  5.258615047197908  5.258354762196932  5.258464268014526  5.258357092576088  5.258349445271418  5.258449873630736  5.258316640376911  5.258114980327397  5.258040310828649  5.257115960461733  5.257541529894171  5.257682572958968  5.2577418612752345  5.258120484695951  5.257635996272509  5.257466686971233  
5.257336264586456  5.257142345577767  5.256367145579557  5.254856479422007  5.254170296308266  5.254211356419289  5.254306473853003  5.253935197535276  5.253751516608916  5.253182047776323  5.253051153807855  5.253316788161556  5.253370502904879  5.253472960833232  5.253289399027222  5.252517756379104  5.251637492843817  5.251460137537286  5.250640745365343  5.250514815755568  
5.250198417661759  5.250284627135563  5.250206370472781  5.25030242928377  5.250087569270654  5.249598589678236  5.248795567752547  5.248417425925084  5.248545505331298  5.248188427849629  5.248185058429707  5.247658402247841  5.247646564444672  5.2468084582236365  5.246976809097564  5.245826342683475  5.2460039922470365  5.245797230188729  5.244257327729982  5.244103053574799  
5.243644547615765  5.243698385515745  5.243134449328226  5.242209525327642  5.242200488182502  5.24150876099101  5.240961988509829  5.240858512443023  5.2408999658516064  5.240984329212768  5.240841661171085  5.239868571138356  5.239932232735042  5.239833864537055  5.239749998764102  5.239486060423181  5.239665475094051  5.239701884440236  5.239706792254654  5.23966859441874  
5.240344839167051  5.240273854704296  5.240101902865886  5.239810117268434  5.240041387565491  5.239594572304717  5.239279554205197  5.24002718401106  5.23944647597451  5.2388783456100025  5.238885884310945  5.239206823139416  5.238938228003943  5.239116125472728  5.2397912513940215  5.239665859116803  5.240249261317985  5.240244548590893  5.240964985615736  5.241387811287725  
5.241425127195499  
--------------------------------

2020-03-27 19:03:19.160892

n_estimators를 늘리긴했으나 대부분 400대 초반에서 멈춤.
0.56645

item_id  dept_id  cat_id  store_id  state_id  tm_y  tm_m  tm_w  tm_d  
tm_dw  event_name_1  event_type_1  snap_CA  snap_TX  snap_WI  sell_price  rolling_mean_t7  rolling_std_t7  rolling_mean_t30  
rolling_mean_t90  rolling_mean_t180  rolling_std_t30  price_change_t1  price_change_t365  rolling_price_std_t7  rolling_price_std_t30  rolling_mean_t60  rolling_std_t60  
('boosting_type', 'gbdt')
('class_weight', None)
('colsample_bytree', 0.8)
('importance_type', 'split')
('learning_rate', 0.1)
('max_depth', -1)
('min_child_samples', 20)
('min_child_weight', 0.001)
('min_split_gain', 0.0)
('n_estimators', 500)
('n_jobs', -1)
('num_leaves', 2048)
('objective', None)
('random_state', None)
('reg_alpha', 0.0)
('reg_lambda', 0.0)
('silent', True)
('subsample', 0.8)
('subsample_for_bin', 200000)
('subsample_freq', 0)
('device', 'gpu')
15.00020682134212  13.374618228839783  12.073506045242238  10.986544894499767  10.114657380612591  9.391384996327178  8.805146516468156  8.312904603417056  7.9085071773994775  7.581381568230096  7.309584733987818  7.091700328731755  6.897063685485729  6.743494782720584  6.612764043927898  6.492599136127599  6.40401355232285  6.32250791394593  6.241207448380048  
6.170826336120863  6.127966110589195  6.074318978460942  6.043783921615877  6.010418474367447  5.9718780795979205  5.9449884522822805  5.923917534675026  5.887988157379426  5.873619969981402  5.853477219248571  5.835965280361032  5.823905503253133  5.785135124239993  5.754786385861099  5.742173240731562  5.726929802405647  5.715733569526327  5.7066627573408475  5.683992032859165  
5.677650613901973  5.6674620375265885  5.657294993844639  5.649350077430029  5.635774499565696  5.6219069996966775  5.610932741918247  5.585066457479156  5.566399390858379  5.5529916469049905  5.547833416816118  5.536378873466962  5.521325640536006  5.508395067433037  5.494658178276314  5.4807580378791645  5.475516843007925  5.470181793427277  5.4591428794533545  5.4503190126700725  
5.4358113251244875  5.426035703937132  5.419071850027197  5.4044801354865655  5.395222118397138  5.390378828261823  5.384612156936559  5.378377113451729  5.373435035521873  5.3707558239114634  5.367971776957096  5.362876647303589  5.3579395905856195  5.353643475549217  5.341213220569896  5.33189844301418  5.329318476737323  5.324683396843173  5.315217675647548  5.312468949385918  
5.308956520173291  5.304501259994806  5.301344234750767  5.300936124064667  5.297837617620455  5.293056146586886  5.2873499779989706  5.285648061021545  5.280764823539576  5.274708498931196  5.268771814953612  5.266906981199727  5.2659566937820195  5.263914571712408  5.258349845751733  5.257215710274724  5.249169190226415  5.242879671352926  5.238455768245013  5.236734697085746  
5.234809619505771  5.234820703545748  5.231320082199531  5.229977983719336  5.229124051498001  5.227874605009933  5.226483583381217  5.222936868335629  5.223156653184903  5.220624885201408  5.213029803073638  5.211323821929542  5.209340666546644  5.208383740287296  5.20475140933837  5.20444788384207  5.2015247068720845  5.2009573426350295  5.200697597655799  5.198124245485081  
5.196916161414609  5.195852450419682  5.1954322288739  5.1955446056476795  5.194438495072342  5.193824780031855  5.190142842440224  5.1895651800148395  5.189787903703819  5.187900490895515  5.18654896144708  5.186011816211723  5.185529207271098  5.1777975093683555  5.1773835124567755  5.175595050948959  5.173961938382342  5.1722486437356165  5.172372889969998  5.170629634702482  
5.168362553260137  5.168186257037013  5.166248516975208  5.1651015088384975  5.162827028910437  5.1605602822039565  5.160134717383472  5.159774885686194  5.158134745189262  5.157560016680241  5.156725165223413  5.1566212679367744  5.155984392031998  5.156079176730928  5.154140751855245  5.152800055787849  5.14958836052525  5.1479294248374154  5.14775254300929  5.147338601966944  
5.147280200855284  5.145270592037546  5.143958840196773  5.143788285667615  5.1421870799931195  5.138175604852752  5.13672098279323  5.134119249242699  5.13357397724229  5.132692984412503  5.131817554338556  5.131191198000428  5.128348749750607  5.128458796325247  5.124969082618449  5.121839937271978  5.122733128852797  5.121447099990436  5.120965949077683  5.120329711469042  
5.120417144395175  5.120325572515917  5.119011173282508  5.119070175436465  5.118936320990889  5.1186023516731955  5.117391464325136  5.116616917180517  5.11314797920732  5.112531414139722  5.11216163137642  5.111684880013938  5.111921391729485  5.111341207630265  5.110694706044914  5.1108487134734775  5.1095090683113185  5.108179441001569  5.107651680465247  5.107748985691842  
5.106439156716274  5.106055140016355  5.106059828096706  5.1046540557359155  5.10182373037811  5.101547416516792  5.100789908166013  5.099348245298744  5.098920899935086  5.098291142887516  5.099297775686454  5.098250025464752  5.098439614389025  5.098046345343321  5.09685796726255  5.096371237067463  5.096224100176306  5.096247349510548  5.095331558110047  5.095251607467837  
5.093479987672612  5.0906069777172664  5.090502102231057  5.090367294449074  5.08917584939347  5.088758416131611  5.08845180513005  5.086938572723218  5.086002826858399  5.085672771456553  5.085634480753624  5.085053045338181  5.0852951161276545  5.084966971618597  5.084816467493771  5.084801377813994  5.084729889918373  5.08412416732297  5.083283019765069  5.0832125638480266  
5.083209994561583  5.083295559592047  5.0830201962025505  5.083088812526854  5.083207818522096  5.082946313688062  5.083293808286992  5.083239223091889  5.08333328783864  5.083530124492537  5.0824511111282105  5.08179770266477  5.081913593027611  5.080522040774274  5.08029605759554  5.079066267075662  5.078617598243962  5.078025006277423  5.078274491992656  5.078710760149319  
5.078139708170145  5.077903102521433  5.078007717964648  5.077328992693303  5.0770871419942365  5.076830493568736  5.076620931490747  5.076676568453823  5.0758166320844  5.075746787396273  5.074828806459235  5.073942519678961  5.073493766154101  5.072042824271966  5.070592122927096  5.070539244377029  5.068986553828659  5.068498711583906  5.06783931193321  5.067264548800568  
5.06638371935799  5.0666045021634  5.066239485086671  5.06611963565683  5.066602643851273  5.06688493222866  5.066935595223885  5.067350246981274  5.066640383626988  5.066272068663403  5.064436745001748  5.064557898642518  5.064475188864552  5.0647022715545535  5.064137962913434  5.063517739656109  5.0628784663485575  5.062220242809848  5.062077429420258  5.061292117776976  
5.061597982071588  5.061241508619868  5.060621982408287  5.060818309315518  5.060495578867732  5.060368920196663  5.060113231841581  5.060343640197451  5.060290654223455  5.059911076724108  5.0598903594949025  5.059808028514862  5.059206067349573  5.059191298455599  5.058258857107131  5.057769669246948  5.057710260934362  5.057139098070511  5.05712618964405  5.057393216222766  
5.058056779278584  5.058582804630078  5.058701729558299  5.058854846723053  5.058697540962166  5.058921035416755  5.058915182824397  5.058795374227376  5.058412549252805  5.05800670576258  5.057929512082387  5.057785293165581  5.057133598499422  5.057351218396983  5.057413856575707  5.056366244041899  5.056102452385614  5.0560753897909745  5.055464774453465  5.055215823419508  
5.054329090722429  5.054135764390276  5.053596169343543  5.053277858874556  5.0527675417833064  5.052630071292734  5.052152134516733  5.052187815624738  5.051390192476507  5.051174604000655  5.050390156336032  5.050372698132398  5.0498004707412445  5.050299018651346  5.050421571797136  5.05061222168222  5.051009705167287  5.051113255318193  5.050722211731563  5.050863550888784  
5.051204852450402  5.051033907104141  5.051491864911084  5.0513224699357275  5.050451238908869  5.050475957715338  5.05045948501545  5.050488653219129  5.050282207025093  5.049707363495669  5.049801471325842  5.049724485921658  5.048886314802029  5.048926133022047  5.049108146588634  5.049832986799227  5.049933632931013  5.049579088080778  5.048845655681691  5.048945784259192  
5.048897399861014  5.049452608979165  5.049455746860404  5.047858970071027  5.047803537990824  5.047603296342472  5.046882266611794  5.046943823290758  5.0461551830933375  5.0460178042140384  5.045255836271497  5.046008636327781  5.046177832178063  5.045900032068805  5.04547316020997  5.045212072114891  5.045187108429532  5.044888197447594  5.044962493517718  5.04495034834636  
5.044679876958886  5.044395130267154  5.044303367023753  5.044644463608664  5.044733972264306  5.044644290305513  5.044479327067978  5.044231818358049  5.044262818575453  5.044520309389261  5.044633163812099  5.044764740400409  5.044919837880569  5.044823228746096  5.044720765457465  5.0451576333250365  5.0454529063910085  5.045319550817533  5.045303722164223  5.045229273836318  
5.045333318547826  5.045171733046682  5.045146395850768  5.044810164740687  5.044792895040523  5.04482485334488  5.045257425087104  5.044752111525403  
--------------------------------

2020-03-27 20:34:43.861290

0.55711

id  item_id  dept_id  cat_id  store_id  state_id  tm_y  tm_m  tm_w  
tm_d  tm_dw  release  sell_price  price_max  price_min  price_std  price_mean  price_norm  price_nunique  
item_nunique  price_momentum  price_momentum_m  price_momentum_y  event_name_1  event_type_1  event_name_2  event_type_2  snap_CA  snap_TX  
snap_WI  sell_price  rolling_mean_t7  rolling_std_t7  rolling_mean_t30  rolling_std_t30  rolling_mean_t60  rolling_std_t60  rolling_mean_t90  rolling_mean_t180  
price_change_t1  price_change_t365  rolling_price_std_t7  rolling_price_std_t30  
('boosting_type', 'gbdt')
('class_weight', None)
('colsample_bytree', 0.7)
('importance_type', 'split')
('learning_rate', 0.05)
('max_depth', -1)
('min_child_samples', 20)
('min_child_weight', 0.001)
('min_split_gain', 0.0)
('n_estimators', 500)
('n_jobs', -1)
('num_leaves', 2048)
('objective', None)
('random_state', None)
('reg_alpha', 0.0)
('reg_lambda', 0.0)
('silent', True)
('subsample', 0.7)
('subsample_for_bin', 200000)
('subsample_freq', 0)
('device', 'gpu')
16.00435961413794  15.061567602401563  14.212918891166161  13.43768547401246  12.744943482800778  12.110087648122207  11.53936523112012  11.021419540520537  10.556849439212035  10.119871840485388  9.728071565926696  9.374802810922244  9.055734246134618  8.768410601735773  8.509865107615731  8.266574116085065  8.054360665690577  7.859353690656187  7.686035257794203  
7.510647428062095  7.35730578830911  7.220156105034866  7.089356765949578  6.9772534929591234  6.867578065395122  6.760951115597282  6.677333274786807  6.597279440310423  6.518823221486062  6.448560900527305  6.380073273010948  6.323299828604957  6.265868360496224  6.20830617698655  6.165886857422528  6.117538127680899  6.080059058712807  6.044440771653256  6.010103736400874  
5.97915194977094  5.951351103384218  5.923687026679417  5.891966438952804  5.865996491897596  5.836145694129317  5.816771705485737  5.793150734134859  5.7755067637003465  5.757975954696213  5.7430377293158665  5.721224982454604  5.703603633741933  5.685530456898066  5.671799448319687  5.6600222197873356  5.64981786345018  5.632018783977692  5.61834495011654  5.603968984347931  
5.5954196312294355  5.5824661050657856  5.575225682498213  5.564088577405586  5.556505691071332  5.549462208214091  5.541429406575524  5.534883045576313  5.520431779503577  5.515598416328042  5.510812636497039  5.504164326476344  5.4932690497938985  5.488367539311747  5.481558274781002  5.477322929515868  5.472860406428909  5.468729715334397  5.4597969593251205  5.455679778227999  
5.448101599169638  5.441034014954558  5.434406527380135  5.429853664200296  5.420111458706141  5.4111288807767925  5.405602642510099  5.396243131894056  5.382695960946316  5.37847181422869  5.367722364561948  5.363757266707113  5.360561707164624  5.3571190953600665  5.349114155762053  5.342450596986737  5.3386815435068815  5.33286479824881  5.321255659342875  5.317678439330091  
5.307815653440022  5.305156294284979  5.297718865059574  5.292860004352765  5.287327230769887  5.280248178504204  5.278152894615472  5.272440149175621  5.268270977377239  5.259646258316318  5.254942652076365  5.251036866221365  5.2452218425322865  5.240245491423075  5.235162741355398  5.232264037195894  5.224117039525449  5.216065087787058  5.209953901143919  5.206521225100289  
5.1991414175788915  5.196611874508044  5.1950143392276225  5.189262948112936  5.184503372021835  5.178188696039658  5.176061140434751  5.175016686843666  5.169403869072595  5.167186723244738  5.165308299067996  5.1632546842152065  5.158924576792757  5.1540504581687205  5.152149550317787  5.146087529851794  5.141568618813036  5.139747095570297  5.137166341013787  5.135906058539122  
5.130668304264633  5.127202961836658  5.125907062263286  5.122089333581152  5.116716922774403  5.115362724514929  5.111736792744515  5.107791963416336  5.106679588682528  5.1049834301119965  5.100728731827723  5.096471543535184  5.09322043799135  5.0899613261112275  5.088779202860983  5.0864567743393545  5.084927474504455  5.080917722750436  5.080072219644897  5.078171055275455  
5.076508523368734  5.071712642729773  5.070072800684696  5.068214394617281  5.065019571596874  5.063005953282864  5.062235310328923  5.059723396348516  5.058367145849733  5.056709690721075  5.054403407670396  5.0514881167911785  5.049956608277106  5.0486776602695445  5.045750591667687  5.043804920116893  5.041736738529084  5.0383375643608295  5.037083288137827  5.0365260363176585  
5.0344499941640155  5.032149748619047  5.029544723074851  5.026317245004765  5.025177177568096  5.0227831925420805  5.020968854731404  5.01939504606828  5.018383122594575  5.0172099249324775  5.01616290907484  5.015698142244427  5.0142850270076815  5.011905958736259  5.009207235786952  5.007889261206076  5.006148530400626  5.005436641372846  5.00497111074822  5.004253977639554  
5.003263517083301  5.002344959341051  5.000856358575471  4.998479362217693  4.997827343726111  4.996899179468408  4.99378405929965  4.993366063381269  4.992790644794528  4.992099641264802  4.9907326819381135  4.98918600739895  4.98716582417637  4.986153524816668  4.984179027301566  4.983529692657146  4.9810144220282995  4.978799536737875  4.977847397257085  4.9773206788372715  
4.975716071334142  4.973868462242791  4.973167026524097  4.972734186787141  4.971771964531088  4.970063280040255  4.968960427812264  4.968207604577405  4.96717642524768  4.9666638256084585  4.966079881237665  4.9641403101871955  4.962267269646536  4.960060314923435  4.959305888089811  4.958217581753672  4.957906968717433  4.956845768750517  4.955959083005949  4.955581545721036  
4.954399150748323  4.953684874039537  4.9519090001817725  4.951437277573184  4.9503121582450715  4.949707673285443  4.949290406750934  4.948625629073198  4.9470834100180445  4.946160197522015  4.94589650767657  4.945094986356026  4.943013226958602  4.942113741839197  4.940119527670306  4.939385679278881  4.938439778839863  4.938560796553269  4.938252007273094  4.9374728796813745  
4.936153256634133  4.935671305909968  4.9341546502075415  4.93322207329058  4.932184851581318  4.9310052029507645  4.929672152070266  4.928414975437017  4.926929225776952  4.9263730952316  4.9256182361520064  4.925436226567214  4.9248187037673254  4.924735397421373  4.924479242953387  4.922020214320296  4.92118822430232  4.920717977150172  4.920085034080059  4.919533451342998  
4.91941241354047  4.918972187244801  4.917563696594695  4.9163380176596405  4.915840095430318  4.915199035339455  4.914394458358289  4.913204203754631  4.9123950191216945  4.91249703010429  4.911711064622546  4.911643574686448  4.9110725164744835  4.90945511922059  4.908653283027297  4.90774749253374  4.907586827743372  4.90559333552879  4.904910701903712  4.904105363437599  
4.903832915344918  4.903190784872921  4.902938462649581  4.902429041849751  4.902507466082937  4.901462038175879  4.900282480739964  4.900093048722856  4.899768451232782  4.899481427828585  4.899039597099437  4.897666491213641  4.89658174213221  4.896293807912859  4.896057500637623  4.895340278136497  4.89531524468759  4.895018237412558  4.894650669490109  4.893947295313917  
4.893273311377572  4.892751436506611  4.892447199349179  4.891745019219391  4.8909745387111485  4.8903373268387735  4.8899992486754895  4.8892736808908825  4.888810932742377  4.888625848608727  4.888573561068166  4.888237379026857  4.887480193591714  4.886616420961608  4.885772267683411  4.885189902771095  4.884479720809619  4.883350228766613  4.883162902195913  4.88280420390117  
4.881835876015098  4.8811849669977105  4.880526116513868  4.879886925447853  4.878996418494643  4.878994039811848  4.878310222548651  4.878146536635685  4.8781541011623695  4.8776035260118045  4.876465530001419  4.875739577823262  4.875477913373092  4.874795594825381  4.873984877558989  4.873782762584928  4.873071686418842  4.873117424290872  4.872553633112884  4.872666629996563  
4.872077180654743  4.871278007479413  4.870749749795597  4.870472245677181  4.869781953551755  4.869264920123574  4.868429702869548  4.868351824902649  4.868366993428821  4.868047983266945  4.867366892037246  4.867111338648778  4.86666147005463  4.866686320218895  4.865839265837955  4.865853042318322  4.8650487993536  4.864821213472607  4.86417493780043  4.8631299393279335  
4.862668604959702  4.862499860585195  4.862016687763624  4.861570200262599  4.861361037632898  4.860961513171196  4.860794820198908  4.860121814377548  4.859989258653904  4.859799707627883  4.8596142641509505  4.858974770233746  4.858437411236304  4.857416140029872  4.857331080844652  4.857262921227927  4.856976604172798  4.856017961008918  4.8559302954046455  4.8553281732509666  
4.855167583162515  4.855241948107633  4.855138131785726  4.855009004193347  4.854549156224544  4.854394985634814  4.854041064111111  4.853717024353035  4.853572190885535  4.853085925046009  4.852599558071776  4.851791107943514  4.851507887425066  4.851042861420685  4.850846663749242  4.850784945596666  4.850258677490446  4.850321392126094  4.850098586097141  4.849474719110436  
4.849238718567824  4.8490256230186946  4.84865075763606  4.848644406512532  4.848536391926089  4.848073404364936  4.847877970854583  4.848197969975047  4.848179615425675  4.8476209744566265  4.847298891654367  4.846988086396374  4.84658273301416  4.8463346321191345  4.845993257709401  4.845271618095451  4.84452862173299  4.844532759279215  4.844490546086924  4.844374365926148  
4.84425303208399  4.844465459455215  4.844167400239393  4.844325658321996  4.843983960809646  4.84418717078017  4.843759545613585  4.843871419728417  4.843864052261449  4.843689217082558  4.8435936874568695  4.843387365302416  4.842719760591526  4.842494632134113  4.841935191462846  4.8418686813127625  4.842090528974452  4.841686108367285  4.842083187758953  4.841749365206255  
4.841181696876977  4.840440124159332  4.840265145591134  4.840535417425894  4.839962209455874  4.839884682804344  4.839604063984738  4.839426930992607  4.83948861063176  4.839164750550504  4.839101901117938  4.838964878889256  4.83901840937901  4.838498212818009  4.838193931061622  4.837475557599727  4.8372024876773665  4.837185487803426  4.837493040376509  4.837311871180141  
4.837060163924655  4.8370514327339  4.836849999142605  4.837044788940076  4.836845290596205  4.836935811918947  4.8365109943733735  4.835956672918998  4.835562083536275  4.83561795286876  4.835039860427914  4.834859415664631  4.834703491722487  4.833990286196654  4.8336024451029465  4.832711853587767  4.832454328247626  4.832343234945105  4.832314267129163  4.832053900118626  
4.832268893828535  
--------------------------------

2020-03-28 22:22:53.308765

0.55339 - 최고점 받은 거랑 똑같이 했는데 점수가 낮아짐. 랜덤시드값에 따라 점수가 크게 달라지는듯.

item_id  dept_id  cat_id  store_id  state_id  year  month  week  day  
weekday  event_name_1  event_type_1  snap_CA  snap_TX  snap_WI  sell_price  rolling_mean_t7  rolling_std_t7  rolling_mean_t30  
rolling_mean_t90  rolling_mean_t180  rolling_std_t30  price_change_t1  price_change_t365  rolling_price_std_t7  rolling_price_std_t30  rolling_mean_t60  rolling_std_t60  
('boosting_type', 'gbdt')
('class_weight', None)
('colsample_bytree', 0.8)
('importance_type', 'split')
('learning_rate', 0.1)
('max_depth', -1)
('min_child_samples', 20)
('min_child_weight', 0.001)
('min_split_gain', 0.0)
('n_estimators', 400)
('n_jobs', -1)
('num_leaves', 2048)
('objective', None)
('random_state', None)
('reg_alpha', 0.0)
('reg_lambda', 0.0)
('silent', True)
('subsample', 0.8)
('subsample_for_bin', 200000)
('subsample_freq', 0)
('device', 'gpu')
11.735840634150573  10.454317756306198  9.433754493186074  8.57929140196139  7.893533208049114  7.318955461377449  6.858454368075953  6.47445188063654  6.152251132272936  5.893853185415858  5.68165098157783  5.50881208585342  5.357818271686381  5.235581940340639  5.126285202977158  5.029543929101946  4.956175738021284  4.893325277914979  4.82913411051218  
4.7718443944377995  4.738762020198402  4.695447253318396  4.669753796284725  4.640085221941008  4.603741410981534  4.582859260985185  4.56788805154164  4.53677462914071  4.525868609139749  4.508454976579859  4.49292128570014  4.4729006189676666  4.441324090244673  4.415030267296895  4.404461129797482  4.3881693728787745  4.3776469194430785  4.363644934624769  4.349597541600083  
4.344223876613494  4.336578937100343  4.325074848629687  4.311864672097606  4.302629444523358  4.294245463928492  4.285921497881738  4.276130864553048  4.262094054425318  4.248952375168759  4.237490547944935  4.232672464587973  4.223571602330448  4.211716316732591  4.205789191423144  4.194693382647341  4.190752875126828  4.184778772666887  4.175028491544089  4.1661603490414905  
4.1630476678132515  4.157809877403633  4.154429761496517  4.148037879194995  4.145340747726658  4.133389245926342  4.1305279234631485  4.127550199319976  4.116688338637867  4.113893043741959  4.112524384767629  4.107935090744143  4.0982334942074985  4.093369588064361  4.09166746351142  4.087853361715619  4.083273976812297  4.082194137102946  4.076298683597285  4.072724059058944  
4.067389906880152  4.062294918304924  4.060492815243125  4.0591356257765066  4.055502595979462  4.050871473686124  4.046592420632768  4.044966168754257  4.042449430821513  4.041067222014254  4.035742837631829  4.034170737311512  4.0323695609417305  4.0279543901592065  4.026398051010122  4.025523246439535  4.024795419805981  4.023720525541728  4.021399238952393  4.020250483301195  
4.018431659110643  4.015499737586194  4.0140453012203565  4.0075987261555195  4.006618567626544  4.006024831787547  4.004401091362798  4.002925096647144  4.002334350101157  3.999833818590326  3.9941754007371904  3.990405473785029  3.9895249595767406  3.9888119147524694  3.985458190479002  3.9844180764053827  3.983221105738141  3.983056199545823  3.982652648230728  3.9817643147626773  
3.9786599015756994  3.97791587206656  3.9759396403068554  3.9744717433385066  3.9727893782271617  3.9719077446477438  3.9669818533497536  3.9665646696315178  3.965843278629285  3.965563131845779  3.9653659185206216  3.9648950655381068  3.96400892198839  3.9600651861611302  3.959609520787149  3.9585387949677573  3.9559044750416352  3.954376838478558  3.9540472303020695  3.954093493758413  
3.9540113821247242  3.9540248546139147  3.9510223814151284  3.9511238354161513  3.949884324374396  3.9484103650002376  3.947916333780246  3.9461786921738433  3.9451967411167628  3.944543114297256  3.9415148991020015  3.9402986063868677  3.9399786232435563  3.938266503329055  3.9374817564496443  3.937373909447441  3.936834647760355  3.9353732958826253  3.9341547773280587  3.9340078162953547  
3.933898554360846  3.9335065503064315  3.93197882051389  3.9316055954564373  3.9304315489803874  3.9281673413229896  3.927191396742053  3.92672074743801  3.9264760578256723  3.924441264330396  3.9239108971115777  3.923422920098313  3.9229278444590547  3.9220299857534355  3.9212280036028613  3.9188391624727212  3.9174544429747047  3.916624418338981  3.916434761709643  3.9159230556899782  
3.915878795797044  3.91541461913963  3.9135354681575834  3.911495014881529  3.9110759280754928  3.9112772990983347  3.90809221760148  3.9070523711515905  3.906446515263873  3.9056722903599024  3.9042537793173784  3.903798788835919  3.903378138634065  3.903312095743016  3.902113134027474  3.9020722987886467  3.900560066573075  3.9003307695490728  3.9001193207214935  3.8998932173091734  
3.899264362478692  3.898598873873075  3.8976765076750826  3.895355579088475  3.895607087263817  3.8950222968520958  3.894094290331032  3.8940738534040027  3.8937093151295357  3.89320181605172  3.893143365048445  3.8920050770186867  3.8918211893855306  3.891339855475718  3.8881173981324206  3.887901615579697  3.887922235077218  3.8876776594341065  3.8861415608122005  3.885919021207832  
3.8859135022795916  3.885650413547409  3.8858770266221496  3.885285674324249  3.885012441661353  3.8841567779252784  3.8843302004927667  3.8827015517053933  3.8821758330751175  3.881916841961071  3.8812918672490553  3.880065789314415  3.879382636860374  3.879617818888136  3.8794140992724855  3.8787430642283645  3.878129426227074  3.8780369342656265  3.8781078777364977  3.8762173647549214  
3.87432240429926  3.8729544466958514  3.8725616617576204  3.8722619791475816  3.871393079858039  3.871320490311792  3.8697948232544865  3.869174226904645  3.8679835361768546  3.867718770645461  3.8671678185436926  3.8671932030565523  3.8668633176221388  3.8665297940902676  3.8648252419060993  3.864661963109571  3.8647662538546568  3.8645999821141266  3.864764700320349  3.864614339522559  
3.863936982700203  3.8641321177505006  3.863777725907969  3.8636127086712087  3.8624777621482758  3.861486270225148  3.8612823029873393  3.860561727555588  3.8603734821934226  3.8602186906066347  3.860209611676914  3.8594504715332865  3.85885952789884  3.8588528513366436  3.858968939943703  3.8589644955435576  3.8585043738839264  3.857873975350265  3.8573768511513284  3.8570120219590445  
3.8560081528475596  3.8549024652686996  3.8548407344568023  3.8545584847776317  3.854861027169205  3.854068839429799  3.8533622746591676  3.8536117452165866  3.8532558479828056  3.853103705425129  3.853268183880974  3.853365773140101  3.8533537629114596  3.8526097724036155  3.8522631542704553  3.8517528769301057  3.851810390297511  3.8514721407549635  3.8511222147458017  3.8510657915153526  
3.850171112847162  3.849709447223831  3.849586005981499  3.8497684785430937  3.849763821646581  3.8495739305534062  3.8494797717925566  3.849292433425549  3.849550977260867  3.8492076387286667  3.8489509009505816  3.8487054066141986  3.848937795455953  3.848393170076519  3.8483905701847463  3.8480032286879657  3.848005853637938  3.8481000856213665  3.8480699991223615  3.848029474509097  
3.848394318964227  3.847995948867845  3.847997859122979  3.8478258490744843  3.847374998126188  3.8474364803247827  3.8474050565369624  3.847078774020739  3.847069800380084  3.846498246082476  3.8460647569577846  3.845987423031106  3.845643151280046  3.8457070844579073  3.845307277370984  3.8451804633470856  3.8438942318257054  3.8439779724693244  3.843689139798492  3.843575105446237  
3.8433172834567797  3.8428486600961285  3.842605175156094  3.842453387757207  3.842691458832005  3.842395049888749  3.842265484338571  3.8415171799423287  3.840782532458674  3.840693206489445  3.8399522249172064  3.839570542151232  3.8396887455980755  3.8398757668608154  3.8397298222165417  3.8398525690547207  3.839882194836186  3.839903528695629  3.8397952936449964  3.839330808575743  
3.8389174395466665  3.8386853940274466  3.8383291406337126  3.837678986523925  3.8373951745523946  3.8369676724846276  3.8367256294862195  3.836386678082535  3.8363897896907058  3.8363337856909405  3.836289268079166  3.8360844232998903  3.835412297514451  3.8352756185209875  3.8349682014108564  3.834604384520484  3.834581272041223  3.8340776412767235  3.8340208392385087  3.8338865285064756  
3.833550735911791  3.832905178811344  3.8327831558477246  3.8325561490540054  3.832649108645011  3.8326318344687715  3.8326208472354475  3.832601595026802  3.832370615153731  3.8320877956924106  3.8317231067959687  3.831557787425739  3.83141736721784  3.8312896013640625  3.831489897974829  3.8314001327359213  3.8310778799611853  3.8308715391598946  3.8311165079833964  3.8310751144187005  
3.8311621718462257  
--------------------------------

2020-03-28 22:50:06.571412

가장 점수 잘나온 거랑 똑같이 돌려봄
시드값 변화에 따라 얼마나 달라지는 지 확인해보기 위해서

0.55747

정말 우연히 점수가 잘나왔었나 보다.
피쳐에 집중하자.

item_id  dept_id  cat_id  store_id  state_id  year  month  week  day  
weekday  event_name_1  event_type_1  snap_CA  snap_TX  snap_WI  sell_price  rolling_mean_t7  rolling_std_t7  rolling_mean_t30  
rolling_mean_t90  rolling_mean_t180  rolling_std_t30  price_change_t1  price_change_t365  rolling_price_std_t7  rolling_price_std_t30  rolling_mean_t60  rolling_std_t60  
('boosting_type', 'gbdt')
('class_weight', None)
('colsample_bytree', 0.8)
('importance_type', 'split')
('learning_rate', 0.1)
('max_depth', -1)
('min_child_samples', 20)
('min_child_weight', 0.001)
('min_split_gain', 0.0)
('n_estimators', 400)
('n_jobs', -1)
('num_leaves', 2048)
('objective', None)
('random_state', None)
('reg_alpha', 0.0)
('reg_lambda', 0.0)
('silent', True)
('subsample', 0.8)
('subsample_for_bin', 200000)
('subsample_freq', 0)
('device', 'gpu')
12.101491112106798  10.759279812251208  9.687076856640848  8.794318281772279  8.07237500112875  7.477514441196952  6.9949114248467135  6.588997858204749  6.255624519347407  5.989938445207323  5.7649995947370165  5.5849543697305135  5.42448868316888  5.303889481713661  5.190846496645327  5.092583386550841  5.020112351515952  4.951381975954072  4.880756157693395  
4.827555902463641  4.7922912767683155  4.746914899219865  4.721651826799089  4.69579387157984  4.666854368542834  4.648832059594448  4.633105811111622  4.602040179145744  4.592435004626152  4.572123127331807  4.554928745142824  4.545705206407939  4.518726690507667  4.495823183793642  4.48637601345637  4.473447597226653  4.463333948310276  4.453246438805936  4.434771902205817  
4.424578931850017  4.418669812347614  4.410043877929653  4.403459471794015  4.391001246024357  4.3819083197259285  4.372540057536749  4.3661115748889685  4.347010921952253  4.336533251988498  4.331135160735597  4.323690350922245  4.314230609268503  4.303827876366042  4.294687613450092  4.287472860961092  4.282460104074507  4.274450270827626  4.264370542334421  4.2555377787036734  
4.253364833043367  4.249752378947032  4.2476561971944555  4.241082108544114  4.238646703770672  4.228407766448742  4.222962959938214  4.220999771333404  4.217143370367047  4.209765009776039  4.208846151119519  4.205713949859761  4.199007895307037  4.19756701771748  4.188330077155543  4.183770657770457  4.180396167030405  4.178909643303849  4.1723517872897  4.170457211862966  
4.163168827067169  4.160942154847273  4.159790675489675  4.157272434626999  4.15275265296967  4.148634395024399  4.147141057973149  4.143617775104087  4.1424308405310954  4.141189861383194  4.1390795622524434  4.136355355565032  4.136300693975856  4.1299943151858605  4.128136782472338  4.126381824968806  4.125398575598615  4.1228652601019595  4.121925348497189  4.1215311229361316  
4.117820028371537  4.116665742992976  4.111299730988236  4.104898238028445  4.103478208621322  4.102062005416269  4.100923247308597  4.100235645561443  4.099247537039518  4.096642703114869  4.090196368927512  4.088352663812046  4.085812635490343  4.08512530350882  4.083532150344607  4.082682696545154  4.081770861825137  4.080724252222716  4.078678680060275  4.078283776104865  
4.077882320830254  4.077590858555649  4.073382035491413  4.071905020351097  4.0711447543748776  4.070689870622157  4.068629531269498  4.0684166839736555  4.067338412751542  4.066479936580542  4.065851812834403  4.064979088287706  4.064656789884892  4.061310441019899  4.059315475353202  4.058266966744073  4.056977777335704  4.0539159613659415  4.052641930400245  4.051789613451276  
4.051576323579488  4.050310760869576  4.050314797813164  4.049622557544201  4.049292733613166  4.047042780299102  4.046082185991254  4.043009415698446  4.041099575787757  4.038291049181932  4.03765242929978  4.036814429849135  4.035852059619498  4.03409831924127  4.0340967555939  4.033228491022109  4.03092158169278  4.029981558432172  4.029753862137572  4.029866869628694  
4.028781942595025  4.028254363820054  4.028060060878857  4.027680190938961  4.025991264978429  4.025870647324428  4.025548992440319  4.024977153360746  4.025726657544929  4.024204114272159  4.024173589306635  4.02377208040594  4.0240590152168  4.0242565706164815  4.023744188110135  4.0215773268564154  4.020119990202633  4.019200496276194  4.018901961071125  4.018696495018226  
4.017895544987469  4.017817693451366  4.01713069805973  4.0168678963252  4.015243458146096  4.014824250187343  4.014601373345987  4.014740114824713  4.013042849792201  4.012304500425563  4.011550602091722  4.01125769984159  4.010769267154412  4.008472290809605  4.008674216651684  4.00837120083097  4.007271638131844  4.007087749292907  4.007263378292737  4.006432228563209  
4.0063962805892235  4.00607271723644  4.006496647713204  4.004453096973152  4.004535506140181  4.004481756119783  4.004028727702995  4.003782841799247  4.003600869057953  4.003518812764446  4.003895299259838  4.00148439259273  3.9996301373473817  3.999573044726092  3.999491643219934  3.9977863995085126  3.998284442663189  3.9984086221702286  3.9976100582576306  3.9976134469950675  
3.997879318050951  3.997076422970311  3.9971444748497085  3.9969491916771096  3.996295197770475  3.99536480734741  3.995393117798983  3.9945417850019904  3.9937645111252214  3.9933714386119186  3.9933372753130687  3.9929377729277618  3.9922980233090457  3.991774854817184  3.991924566501569  3.991882065898432  3.9915351729818482  3.9909601208871917  3.99183453995053  3.9910261216825047  
3.9909675151201696  3.9895373294495777  3.988738944361658  3.9882901024170283  3.987532004125221  3.9874432755617404  3.985753225798132  3.9853880823364563  3.9849163898448214  3.9843398532422203  3.983917625898495  3.983961164246815  3.983149839592764  3.9818551941442535  3.9818645337449747  3.980787923628862  3.980520573817525  3.979687048968513  3.979016884183873  3.9784867788507534  
3.978269343844995  3.978047578066831  3.9776952160040513  3.9775208986628963  3.977823743707355  3.9782074047560494  3.9770792312090983  3.9773926781894775  3.977359502171635  3.9772224936809395  3.97711057984157  3.976933561352552  3.976952807957165  3.9778542347291594  3.9776001146428825  3.977175112106127  3.9765466516141865  3.975674301052262  3.9758697125688767  3.9750896617165132  
3.97408092201574  3.9736716694724787  3.973695775792635  3.9733740944038454  3.973262503123678  3.9734220490131045  3.973278620085795  3.9734719049957103  3.9735011196187915  3.972941772108146  3.9730301821212275  3.973245456459508  3.9733729798300343  3.9737156025201896  3.9733529399993386  3.9727668840204773  3.9731309200201066  3.9730856163661294  3.97275567569557  3.9724400646501374  
3.971908158802296  3.9721498297710505  3.9720419028601817  3.9714892099571584  3.971253806553379  3.970968814915652  3.971115749703052  3.970852167826048  3.970877833171094  3.9710977450401654  3.9710413328893064  3.9711375532608617  3.970985649739506  3.9708381370396406  3.9704288073063734  3.97020579058829  3.970223032894158  3.9703457864783966  3.9701715480977913  3.970560410416545  
3.971152174914489  3.970843262954887  3.969193087161542  3.9696731219543677  3.9695303042732055  3.969434829922659  3.969262611695514  3.969320880721901  3.969310816334617  3.9693311344442637  3.969117098009864  3.9693590248598767  3.9692356223419196  3.9693556730400648  3.9693645093074967  3.968749188455517  3.968788841939308  3.968976728984341  3.9687162036374697  3.968705160299403  
3.9689266788936206  3.969372850988515  3.9690564198631684  3.9685820769801468  3.9681917362356773  3.9681046383717344  3.967955645575943  3.9671821541888073  3.9664260451609294  3.9665606171504857  3.9662156193013716  3.966956336912967  3.9670810186803185  3.96662684342292  3.966554918974761  3.96618048562534  3.965998904195563  3.9662347116926844  3.966010745178082  3.965634072016858  
3.965430468268409  3.965105227220243  3.9644856934584682  3.964284224486974  3.9641354141921235  3.9637447663125474  3.963438064709406  3.9636150472589127  3.963714591937048  3.96382058721063  3.963655513974405  3.963967172807261  3.964078970113159  3.9637884807358725  3.963665842600956  3.963779144255129  3.9634085325702415  3.9635615859522573  3.963933829857406  3.962676451482404  
3.9625125821887655  3.962131566146381  3.9620920857398767  3.9620880044958553  3.962093379216615  3.96239974463972  3.9624072020597554  3.962703706653344  3.961996754412157  3.9620001470355124  3.9623792361653534  3.9623948527377766  3.9624297149688  3.9628076624454325  3.962945156522145  3.9624422246683197  3.962706068290662  3.962929995451991  3.9632434790251545  3.9632444241385505  
3.9631424751338686  
--------------------------------

2020-03-29 01:49:21.445822

target 값에 log 취함. 그리고 n_estimators 줄임.

log 값 취하니까 이번에도 점수 엄청 떨어짐
대략적으로 추세는 비슷하긴한데,  특히 다른 예측값에서 크게 예측한 것들이 작아져서 나옴.

item_id  dept_id  cat_id  store_id  state_id  year  month  week  day  
weekday  event_name_1  event_type_1  snap_CA  snap_TX  snap_WI  sell_price  rolling_mean_t7  rolling_std_t7  rolling_mean_t30  
rolling_mean_t90  rolling_mean_t180  rolling_std_t30  price_change_t1  price_change_t365  rolling_price_std_t7  rolling_price_std_t30  rolling_mean_t60  rolling_std_t60  item_id_gb_sell_price  
('boosting_type', 'gbdt')
('class_weight', None)
('colsample_bytree', 0.8)
('importance_type', 'split')
('learning_rate', 0.1)
('max_depth', -1)
('min_child_samples', 20)
('min_child_weight', 0.001)
('min_split_gain', 0.0)
('n_estimators', 150)
('n_jobs', -1)
('num_leaves', 2048)
('objective', None)
('random_state', None)
('reg_alpha', 0.0)
('reg_lambda', 0.0)
('silent', True)
('subsample', 0.8)
('subsample_for_bin', 200000)
('subsample_freq', 0)
('device', 'gpu')
0.4062739845182608  0.36922316224577695  0.3387760806724517  0.31406058489216093  0.2939219677793047  0.2776206645237894  0.2642673646011177  0.2533518719809004  0.24443321640393573  0.23676192133750193  0.23118374123383903  0.2259640705647919  0.22182237899093651  0.2183437897376279  0.21548228703530814  0.21288770880094232  0.2109600959751868  0.2089237915323145  0.20758431091530644  
0.20635795297241064  0.2052054804221299  0.20433560272830584  0.20331437518947934  0.2024670746342868  0.20175350676809878  0.20106381670862608  0.2002715290670739  0.19960077598999232  0.19900255988943033  0.19855870708511042  0.19796926020920785  0.19755329928318793  0.19712861301044843  0.19663735833456203  0.1962843813851494  0.19572046214286037  0.1953653751221402  0.19498362982448153  0.19465018748875762  
0.19430523460083793  0.19411062388509234  0.19378362047184766  0.19329157425068583  0.19288698792201017  0.19255244844619027  0.19212341541612685  0.19186635561028603  0.1916235600795559  0.1912034073130263  0.19080064169489588  0.1906597683902753  0.1903073647301692  0.19012358543115473  0.1899361958326468  0.18975595536856446  0.18959805813509706  0.18935135059925126  0.18925635897100573  0.1890604468199167  
0.18893762552791019  0.18883005854533477  0.18869509262273199  0.18861515810708177  0.18824457508714662  0.18811756376814412  0.18772261034990576  0.18729815835949612  0.1872128442707116  0.18712643966510903  0.1869223909559765  0.18687648180713365  0.18678361845333077  0.18667706669653392  0.18644762061216966  0.18614040306234195  0.1858588492281112  0.18575135435967566  0.18566955905608737  0.18555669874753042  
0.18546225589134407  0.18540716526344045  0.18512689260270224  0.18506990157643907  0.18494548684977127  0.18472583955025002  0.18463599196206673  0.18457065364762273  0.1844725887093769  0.18441900084189083  0.1843735313561257  0.18430292924480393  0.18422613000597785  0.18407172349271547  0.18397010391764906  0.18383778935367392  0.18374735298883874  0.1837193628727282  0.18362320732184734  0.18360399036078395  
0.1834832506561745  0.18339944264901684  0.18329616450897704  0.18326692128377473  0.1832277268652089  0.18314879437554535  0.18311807479117811  0.18304560638525327  0.18296890713353156  0.18293948449347286  0.18291656099588594  0.1827766282671306  0.1827055204162411  0.1826318363364553  0.18261521519139984  0.18257894990110154  0.18249723407454643  0.18244890253969226  0.1824144175615873  0.18236674618777485  
0.18225541446150134  0.18220541731833328  0.18210668088173373  0.18207434631637853  0.18201978796368354  0.18199315979575031  0.18195796104024317  0.1819251224548816  0.18180462630007152  0.18178844731328317  0.18174292628748664  0.18168248187232655  0.18165546633260757  0.18164608770223384  0.18158585134803296  0.1815741281451343  0.1815530281411292  0.181523430273384  0.18149225848949732  0.18142271690571615  
0.1813924458252914  0.18134076094515905  0.18133907352493772  0.18122156124205724  0.18118239068159867  0.18115094447219698  0.18112840354696577  0.1810489035221485  0.18097113159469483  0.180942019132771  0.1808587455591741  
--------------------------------

2020-03-29 18:17:19.803806
item_id  dept_id  cat_id  store_id  state_id  weekday  month  year  event_name_1  
event_type_1  snap_CA  snap_TX  snap_WI  day  week  sell_price  lag_t1  lag_t2  lag_t3  
lag_t4  lag_t5  lag_t6  lag_t7  lag_t8  lag_t9  lag_t10  lag_t11  lag_t12  lag_t13  
lag_t14  lag_t15  lag_t16  lag_t17  lag_t18  lag_t19  lag_t20  lag_t21  lag_t22  lag_t23  
lag_t24  lag_t25  lag_t26  lag_t27  lag_t28  rolling_mean_t7  rolling_std_t7  rolling_mean_t28  rolling_std_t28  rolling_mean_t56  
rolling_std_t56  rolling_mean_t84  rolling_std_t84  rolling_mean_t112  rolling_std_t112  rolling_mean_t168  rolling_std_t168  price_change_t1  price_change_t365  rolling_price_std_t7  
rolling_price_std_t28  item_id_gb_sell_price  
('boosting_type', 'gbdt')
('class_weight', None)
('colsample_bytree', 0.8)
('importance_type', 'split')
('learning_rate', 0.1)
('max_depth', -1)
('min_child_samples', 20)
('min_child_weight', 0.001)
('min_split_gain', 0.0)
('n_estimators', 150)
('n_jobs', -1)
('num_leaves', 2048)
('objective', None)
('random_state', None)
('reg_alpha', 0.0)
('reg_lambda', 0.0)
('silent', True)
('subsample', 0.8)
('subsample_for_bin', 200000)
('subsample_freq', 0)
('device', 'gpu')
11.8998711008209  10.414767092578206  9.202137223674407  8.211890173900718  7.4134496349381  6.764811439237941  6.228641303175113  5.793918911665346  5.435855720601878  5.144020484681547  4.90941572850662  4.7165618397671825  4.558210895680894  4.430619962273947  4.32217767033613  4.237512528727085  4.167064925850323  4.109263029150992  4.059307518305719  
4.019592626986681  3.985977080626746  3.955666968480479  3.9328726534896337  3.91274538232311  3.896754694506774  3.882945465927105  3.8711822374315275  3.8610210190410044  3.8533063642126346  3.846962042903527  3.8424651634535074  3.836846632016041  3.833224939816443  3.8283471593850606  3.823960990990975  3.8214650557110668  3.818213855062526  3.814858499386868  3.8123478420439225  
3.809041016149049  3.8069098936619956  3.80512127960389  3.8029254097027967  3.7994307982547446  3.7974173719670192  3.7956942812320342  3.7941610579294074  3.792025420844753  3.7910843607214404  3.790012346537998  3.789015223838492  3.7881629052036763  3.7861387143209884  3.7848857932957993  3.7819713988803354  3.7811617988200976  3.7799192636276664  3.7787072226220264  3.7776396252098867  
3.776554199515136  3.7749365649634297  3.774074284117173  3.7716081931641416  3.7710372290458247  3.7708505534209418  3.769714491233857  3.768693843431003  3.7682872924995077  3.7680994802245764  3.768110105299763  3.7672884605898873  3.7673232290742744  3.766331769498715  3.765261208441062  3.7646399476841537  3.7636773797071394  3.7635993363904787  3.7633622476648245  3.7633776822857783  
3.7636679615118847  3.762709481123766  3.7622092952336894  3.761813357709555  3.760631376754236  3.7606263145966587  3.760879662237511  3.759946127102931  3.7592943246330908  3.7591226386939085  3.757683854391481  3.7577616952905646  3.7568242226620123  3.7571574390041484  3.7561332435715067  3.7553297090262383  3.7544459191796147  3.7546139628445925  3.75468890352199  3.7546456002810857  
3.7547714633802105  3.7547874133197983  3.754697095982245  3.754898765317325  3.7546601678238685  3.7542835235450647  3.7535355336815246  3.752199852802687  3.75223483860342  3.752338672936824  3.7523122020015602  3.7524319199872913  3.7522977543669596  3.7522924767115704  3.7522596660174923  3.752007211551479  3.7521629339682043  3.7525650649177877  3.7521917559466105  3.7523764007596507  
3.752584434475683  3.7529749212655283  3.7524832974076134  3.7523857197820885  3.7523316802708577  3.7522257873983706  3.752163653221887  3.752514667652787  3.7529059860592806  3.753215013852122  3.753358241012226  3.753426872698703  3.7530401864889797  3.753282312033258  3.7530753562133734  3.7530622217580327  
--------------------------------

2020-03-30 00:02:50.160867

0.58750
커스텀 loss 함수를 만들어야함!!! 가중치 크게줄거 판단해서 커스텀 loss 함수 만들자.
item_id_gb_sell_price 추가

item_id  dept_id  cat_id  store_id  state_id  weekday  month  year  event_name_1  
event_type_1  snap_CA  snap_TX  snap_WI  day  week  sell_price  rolling_mean_t7  rolling_std_t7  rolling_mean_t30  
rolling_std_t30  rolling_mean_t90  rolling_mean_t180  rolling_mean_t60  rolling_std_t60  lag_price_t1  price_change_t1  rolling_price_max_t365  price_change_t365  rolling_price_std_t7  
rolling_price_std_t30  item_id_gb_sell_price  
('boosting_type', 'gbdt')
('class_weight', None)
('colsample_bytree', 0.8)
('importance_type', 'split')
('learning_rate', 0.1)
('max_depth', -1)
('min_child_samples', 20)
('min_child_weight', 0.001)
('min_split_gain', 0.0)
('n_estimators', 400)
('n_jobs', -1)
('num_leaves', 2048)
('objective', None)
('random_state', None)
('reg_alpha', 0.0)
('reg_lambda', 0.0)
('silent', True)
('subsample', 0.8)
('subsample_for_bin', 200000)
('subsample_freq', 0)
('device', 'gpu')
11.699713157017591  10.375628408663  9.310246582827196  8.438011925785935  7.7237630791067735  7.142269788057351  6.671014245157505  6.28285365325457  5.955271028921801  5.689846805270804  5.452618447667823  5.255594533624014  5.106112463236901  4.960165813236341  4.841615117425094  4.750782835770691  4.661064093807684  4.6005956858484245  4.547973885338131  
4.504758106401633  4.465151982493429  4.435176460974616  4.4056337742987495  4.377199471591261  4.352600610347476  4.313962828101159  4.296881896901145  4.278240718475336  4.259029692773386  4.2297048715553975  4.205593942680455  4.196695220343447  4.184153226338035  4.1738089528552145  4.155902233186505  4.137180100325807  4.119495255477791  4.10859743687914  4.09224192358948  
4.080130274247127  4.07345733578588  4.059805136153144  4.0501585489407415  4.044113746705638  4.031556627018072  4.026013623496221  4.017061554449273  4.011914986055897  4.0036230992131525  3.9905575732428873  3.977863571565034  3.967513194481516  3.9653193597686465  3.9544471081268693  3.947802856967036  3.9451406980632653  3.9399669297288655  3.9286923256892194  3.9269375465853416  
3.9201278011079737  3.9183078288263062  3.913594099960901  3.9119084686306356  3.9048133477324587  3.8969064849256023  3.890953533145034  3.8895759772246596  3.8851319656316328  3.878604015949418  3.871018607869123  3.8680524200012028  3.8666813862034233  3.863165825442937  3.8557760600956694  3.853167878301548  3.850358412995802  3.848884118500645  3.8433370260301984  3.8405624514281698  
3.836488730268663  3.8363246703390708  3.833918257395734  3.8331295424386402  3.824819104772636  3.8243928477489537  3.8232014391655413  3.823157643232175  3.818119497898881  3.8175967825495887  3.8156310577214  3.815044342074836  3.8137934721560445  3.812269476229211  3.8113705026997677  3.8099490270685474  3.8091272257229676  3.8080970629193014  3.8066671267851735  3.805424649534525  
3.8042362542578676  3.8023659390967883  3.7986322607987515  3.796397988069147  3.795852249263268  3.795783501159481  3.793306354038651  3.792731889495692  3.7904962520107426  3.7891817466329694  3.787119186191008  3.785622595093407  3.784687293669735  3.7818581541595435  3.780180493279909  3.7794012237275085  3.777717695651654  3.774926457047675  3.774236974117067  3.7736856764935  
3.77049749511504  3.7698790428101816  3.76953350608516  3.769045530037774  3.7672979947707295  3.764014404350643  3.7630116711536834  3.762252122022878  3.760943560135837  3.7607328404532776  3.7609418145404967  3.7601094870438003  3.759772537283396  3.7593754043548024  3.758426554099345  3.758190169384203  3.7572359586543747  3.7573430128766785  3.7550125944844965  3.754827274061526  
3.753849850280345  3.753596959761019  3.7534272575736445  3.75279610446125  3.7511579052800816  3.7485095604283036  3.7475759527321397  3.7463978450023765  3.7435503501350778  3.743351366298207  3.7412080405893025  3.740678550564915  3.7404719357700356  3.7403026424645938  3.740142279751443  3.739765301804842  3.73873255019477  3.737823419551894  3.7366368064410045  3.7369152019229057  
3.736200168162011  3.735056112320696  3.733931625364502  3.730908424969681  3.7300688103983397  3.7292164374856163  3.7290159117447446  3.7287439908331685  3.727330488549146  3.7266540588656145  3.725957032135541  3.7255702442611356  3.7241450878859643  3.723847557383581  3.723611128816628  3.7238739585145244  3.723204542542729  3.7233363241686317  3.723570543891685  3.722928204237097  
3.722348347274965  3.7200070461720953  3.7196813635778807  3.719691047314992  3.720018118415315  3.718508306053868  3.7186806308689775  3.7176530139442607  3.71677784788684  3.716850375037364  3.7172948661209793  3.716656176951039  3.7162712224000107  3.7165242364324262  3.716589376179314  3.7165639383083566  3.7162994737180726  3.7163649390237654  3.7159487326643785  3.7157121073216617  
3.715541812792448  3.714817239494082  3.7136949444176164  3.7131401119193317  3.713419348483361  3.7134994587699945  3.7129367062730876  3.712441460930879  3.7116132559704655  3.7111146964568458  3.710454218550358  3.709163610077402  3.7075319796551116  3.7077007875037458  3.707625056424739  3.707448271342814  3.706894312497959  3.7067354108088515  3.7056693742301476  3.7054301000873915  
3.705712772044896  3.705487118448976  3.7057590036554555  3.7055518935722755  3.7056089546022513  3.7060328048507967  3.7062926735455486  3.7062265576026556  3.7065192550889865  3.706304112453803  3.706528673199297  3.706384179262306  3.706528328400393  3.7065594341843826  3.706159439501674  3.7056706147507246  3.705488630448974  3.704814415640315  3.703891236682052  3.703434712585486  
3.7038407624224097  3.7035550933704275  3.7034747197580944  3.7029243534285126  3.7030460829403555  3.702232929224132  3.7024469910981628  3.702666133198722  3.7024945406047802  3.7024386441614556  3.7028381817895033  3.702356798772775  3.7017988292032165  3.701527482514159  3.7014087001580176  3.7007039411507505  3.700455117674351  3.7003084315191566  3.6990105901153307  3.6996462094449805  
3.6996333116664784  3.699756678786837  3.700325297219959  3.7005620878432683  3.70016455892304  3.6993449987274913  3.6989461558715986  3.6983582865355213  3.6981466130672636  3.698137667784811  3.6977504464127113  3.6975729289499872  3.6971469853671493  3.697217782567304  3.6973191791014934  3.6967106666279306  3.696727349959625  3.6969704524763376  3.6969885113712224  3.696500208610488  
3.6965332812691116  3.6961661578686207  3.6952444931539783  3.69511589088468  3.695163153013558  3.6947160086598037  3.694635119532137  3.6942239846142058  3.6939394460161825  3.6937699600042073  3.693906150029298  3.6931809168550145  3.6933531311272056  3.693170866071274  3.692418257959148  3.692040738435517  3.6920041985349896  3.6915817158441007  3.6913088317772735  3.6912807661339477  
3.6912859482322666  3.690978355418753  3.691169537384939  3.6913338366734143  3.691374968849822  3.691267825143381  3.6904228049273056  3.690392586982655  3.6904895828733744  3.6908097258190034  3.6908376800201492  3.6905271068075223  3.6907421016431705  3.6899555525335095  3.6901587888908667  3.6901686185878932  3.689914802912516  3.6897402208363363  3.6893025306520126  3.689289361788456  
3.689263185691972  3.6889124217569664  3.689255896117852  3.689355332462511  3.6893171328013863  3.6897458832701315  3.6893629572348776  3.6898024539721983  3.689697121441889  3.6904162276158035  3.690569662596898  3.6904431842791667  3.6906579763388314  3.6905671190043963  3.690109901229801  3.689640798833543  3.68947607640543  3.689297847669141  3.689434895199409  3.6892104109288963  
3.688952494372806  3.6887994272118787  3.6889763613428164  3.689141806986509  3.689472315477103  3.6893885972202436  3.689676143420534  3.68927830168763  3.689151013308972  3.6891422972783094  3.6892186329470267  3.689256070583061  3.6889053923139357  3.6892001794990272  3.6894864469615567  3.6890865631364176  3.689437502916568  3.689722233162621  3.690089973551551  3.6900889989837626  
3.690013596002174  3.6899294587608202  
--------------------------------

2020-03-30 01:23:36.529274

store_id_gb_sell_price 추가  0.60484
너무 정보가 강력해서 오버피팅 되는 듯 하다. 

item_id  dept_id  cat_id  store_id  state_id  weekday  month  year  event_name_1  
event_type_1  snap_CA  snap_TX  snap_WI  day  week  sell_price  rolling_mean_t7  rolling_std_t7  rolling_mean_t30  
rolling_std_t30  rolling_mean_t90  rolling_mean_t180  rolling_mean_t60  rolling_std_t60  lag_price_t1  price_change_t1  rolling_price_max_t365  price_change_t365  rolling_price_std_t7  
rolling_price_std_t30  item_id_gb_sell_price  store_id_gb_sell_price  
('boosting_type', 'gbdt')
('class_weight', None)
('colsample_bytree', 0.8)
('importance_type', 'split')
('learning_rate', 0.1)
('max_depth', -1)
('min_child_samples', 20)
('min_child_weight', 0.001)
('min_split_gain', 0.0)
('n_estimators', 400)
('n_jobs', -1)
('num_leaves', 2048)
('objective', None)
('random_state', 333)
('reg_alpha', 0.0)
('reg_lambda', 0.0)
('silent', True)
('subsample', 0.8)
('subsample_for_bin', 200000)
('subsample_freq', 0)
('device', 'gpu')
11.580329750293101  10.284775242209095  9.225722900684115  8.342764400148175  7.6244508921538  7.044646155661855  6.58009908440117  6.196480943399678  5.876591397514762  5.605388844296118  5.380311294740917  5.201955970740912  5.041594065843613  4.923424620699914  4.827560356389261  4.745942335714276  4.6694637004535045  4.590550852034518  4.543713808766589  
4.484483807671588  4.445801855718398  4.416696468496369  4.3765019780721115  4.352045072731648  4.3335709607862185  4.299327928560265  4.285440542405156  4.267745681168491  4.239699675365433  4.229640054423529  4.204465645815852  4.188336324108839  4.179399438278425  4.168801213016484  4.1588352981031065  4.133755203789638  4.125494759489709  4.1141780723290235  4.105831776915438  
4.095313023626619  4.086439187786006  4.078659128157764  4.061748543331189  4.054960316529931  4.042048904775708  4.031789800373932  4.0183195342903515  4.012265928228575  4.0001818024313565  3.9881180969318  3.9823419143058167  3.9660648637310683  3.9568861784208176  3.945132823242142  3.9397072331789844  3.9333016614410075  3.9258309980017656  3.9190494494571055  3.9121071028515715  
3.9082997510007456  3.9076107310261747  3.9035978331517276  3.901472843170237  3.8902602477061556  3.8890894650430385  3.8780137283201617  3.87526852631088  3.86736277768606  3.8625908825605886  3.8575861944112377  3.856246990591809  3.854565735050181  3.854059219222052  3.849912725140301  3.845083234124395  3.8416105152284206  3.8400545186272836  3.83664538979764  3.835455326277524  
3.831648377489293  3.8310524768524807  3.825862517267369  3.824897956847413  3.821724895198971  3.8214466487663765  3.820131899513966  3.815632031527526  3.8120158539711646  3.8102018915136737  3.8078932711060003  3.8070679864459365  3.8042913402340983  3.8025323477362107  3.7996708907558223  3.7977043521458738  3.7962130377175054  3.7956488338829875  3.795722575452922  3.795626391173312  
3.7927327568215374  3.791687608083351  3.786723549820676  3.785009362630683  3.783103061592595  3.78223693447169  3.7798585220303793  3.7785658607361414  3.778215359015242  3.777286431569942  3.774830772950428  3.7742670316776508  3.7728626697762886  3.769426497266007  3.7691313939881517  3.7693082214301716  3.767888606382603  3.766715305466563  3.7657535811982044  3.763411212051914  
3.7622653662689074  3.761708834465599  3.759915416605025  3.7596306774006085  3.759072645970827  3.759051229679998  3.7588610741923043  3.7571964030170415  3.754663139975139  3.7530985722077483  3.751554451391871  3.750140441834609  3.750022547397452  3.748790157451277  3.747209146560345  3.7458168612503955  3.7453013705536997  3.745167084825251  3.7439054679237787  3.744679598625558  
3.74470654063844  3.7425521745364025  3.742383143684544  3.7423613168887226  3.7415751123618772  3.7408973732488007  3.739320165889668  3.739614958175426  3.739402347618292  3.738910027836276  3.7380797215183854  3.7364944083705502  3.734978310442257  3.7349468748249857  3.7341080740219996  3.734090189482925  3.7332032433932496  3.733043783918798  3.730930589825096  3.7304471413949765  
3.7299898334817008  3.729542585312407  3.728536876506326  3.7283920494244995  3.7281833837866585  3.726534818126284  3.7251337537448723  3.724932548504016  3.7252066737788088  3.724937178339216  3.724079463444991  3.724033608761333  3.7231681292663104  3.7215450329492823  3.7210286237906662  3.719985455886997  3.7208193244332826  3.7208224116272786  3.7201091796567827  3.719869392312746  
3.719772766543133  3.718597814783182  3.7185332806264704  3.7181919846343914  3.717934472509001  3.7178951511023985  3.7175757425030147  3.7171324795373475  3.716450355117891  3.7151279841060814  3.7147170252179134  3.7149683797432616  3.715805814088823  3.7152050707284383  3.715357176000092  3.7150235210402753  3.714830849716373  3.7152729140896845  3.716014726940902  3.7151333162029716  
3.7145475325730724  3.7144977180548984  3.714847829173221  3.7148414713574343  3.714833151598774  3.7140942583811607  3.714357805643885  3.7146006883450604  3.714017001125684  3.7137275840449  3.713806110059133  3.7135947889561245  3.71338278322013  3.7129632506720234  3.712388480551606  3.7125867393325622  3.7123689375400835  3.712009340197685  3.7116611569419145  3.711509679468998  
3.7115466548085934  3.7110108336945182  3.711291510332751  3.710063141600448  3.7097934571790434  3.7105751933455906  3.7107726610924785  3.710488795175578  3.709961897386042  3.7098929343408544  3.709051242074613  3.708874657113466  3.7083150397527445  3.7082276576138824  3.707965294057032  3.707029219626066  3.7065707467242426  3.706691879599864  3.7061511129436515  3.7056529797447504  
3.7058508159253445  3.7061873566088255  3.705765933172389  3.7059159126137082  3.705251656202432  3.70502254032166  3.703443556756404  3.7040704746761524  3.7035675916722313  3.7030952086863054  3.7026313528384884  3.7021178365886107  3.701884393207055  3.7016759835329616  3.700965497792945  3.7005105280243185  3.700276513257215  3.7004912192866954  3.7005483295863315  3.7002110580588963  
3.699054081403319  3.698332580135684  3.6983188820002475  3.698058877540551  3.6976629615845322  3.6970676218458887  3.6966187594851627  3.696369760341816  3.6963501220423196  3.69601423759493  3.6955570011535435  3.695404797283009  3.6949878630145956  3.695087505308594  3.694970154030875  3.6942050156285227  3.694019939476327  3.6940680795518586  3.69399429640298  3.693905103661781  
3.6939444640949297  3.6929552118102644  3.6926150494154264  3.6925107429477833  3.692325693814836  3.691924272694696  3.691721493422097  3.6909878447564237  3.6912318275864604  3.691309499695454  3.690466546062104  3.690170638262083  3.690101655914451  3.689739660374439  3.68931302958116  3.689298012594034  3.68941596197639  3.6891489608893004  3.6890304639854983  3.688986369828719  
3.688428892536636  3.688461424392402  3.689273477592716  3.6890091911865253  3.6887390570193075  3.6886877313159463  3.6886781021025223  3.688610951086751  3.688348467655322  3.688150837867916  3.6876846475080547  3.687519562975356  3.6874885059481937  3.6874453313433175  3.6874622440630405  3.686981152337715  3.686862631789159  3.6866515085775324  3.686808132869461  3.686727361385344  
3.6867511605171055  3.686735235441828  3.686953495455723  3.687735745135664  3.6872731466435766  3.6870184721863453  3.6869041506283495  3.686781447706235  3.6864193150875812  3.6863591581659656  3.685846731555721  3.685446794504088  3.685326102251301  3.6852335837658288  3.685265384208091  3.685449648231888  3.6860162450590446  3.6857826672736795  3.686450441197695  3.6862091502517442  
3.6861542114176853  3.6859698588658922  3.686224539424337  3.68641416901933  3.6868955026522268  3.6870868262323055  3.687508131634427  3.687409213230369  3.6874807542290693  3.6872319882506646  3.6870460320262906  3.686962716886829  3.6869025793935437  3.6870560791473466  
--------------------------------

2020-04-01 02:40:08.195639

2016년을 예측해야 하는데,
 2015년이 2014, 2013년에 비해 추세가 다른거같아서
 2015년을 빼고 모델 만들어봄.
 
 0.57478 - 많이 나빠짐
 

item_id  dept_id  cat_id  store_id  state_id  weekday  month  year  event_name_1  
event_type_1  snap_CA  snap_TX  snap_WI  day  week  sell_price  rolling_mean_t7  rolling_std_t7  rolling_mean_t30  
rolling_std_t30  rolling_mean_t90  rolling_mean_t180  rolling_mean_t60  rolling_std_t60  lag_price_t1  price_change_t1  rolling_price_max_t365  price_change_t365  rolling_price_std_t7  
rolling_price_std_t30  
('boosting_type', 'gbdt')
('class_weight', None)
('colsample_bytree', 0.8)
('importance_type', 'split')
('learning_rate', 0.1)
('max_depth', -1)
('min_child_samples', 20)
('min_child_weight', 0.001)
('min_split_gain', 0.0)
('n_estimators', 400)
('n_jobs', -1)
('num_leaves', 2048)
('objective', None)
('random_state', 333)
('reg_alpha', 0.0)
('reg_lambda', 0.0)
('silent', True)
('subsample', 0.8)
('subsample_for_bin', 200000)
('subsample_freq', 0)
('device', 'gpu')
11.9813160032417  10.652517365654006  9.548715439982178  8.64515853912415  7.91684519539676  7.325209905902389  6.8414101832880165  6.445648832087067  6.116386940003548  5.842330464444383  5.618206495078551  5.430505976488111  5.277252539978187  5.13364390770655  5.019469549985414  4.92580198845527  4.836427154732118  4.777980151983374  4.727326931669711  
4.6734435104819  4.635055375789512  4.592518193416815  4.55418188429979  4.520148407495288  4.496571611060777  4.464088924612748  4.44469522967347  4.42322788212357  4.397572502271733  4.38307677097654  4.368581480787913  4.347745881318634  4.333813035315699  4.32703965603834  4.310065213588511  4.303727444843807  4.296400469512745  4.289620860354537  4.272360969010011  
4.258976119057513  4.2539448458754014  4.248176225140408  4.231579941103765  4.216542404342005  4.206192946911664  4.199765244702745  4.195354963494564  4.189191142865083  4.181895597760455  4.173444316194015  4.169379985304706  4.159959017946987  4.156494749111164  4.145442685577401  4.141953972914538  4.135099132422413  4.126652235102248  4.126059554416833  4.116954096828185  
4.115565082752188  4.110033538839023  4.105025022549031  4.097002057059592  4.096758412854355  4.093991920395249  4.092851140969332  4.088934292120572  4.079887771812284  4.0738119223811555  4.07298262665872  4.0721808341350165  4.066746667612857  4.060450907285266  4.055880973151894  4.055039261807773  4.052949450562151  4.050605308353158  4.0465642971787785  4.042191124298681  
4.041120995965115  4.039636379160994  4.036457981665194  4.03317605307379  4.031281264537295  4.031179546186408  4.02562426364863  4.023772051606459  4.0212121946264165  4.018424063789425  4.01723104967661  4.015952821231971  4.014891056321402  4.014481737291336  4.012872102358899  4.012786498784802  4.011765269329478  4.011309008659879  4.01129917333517  4.0102747047198966  
4.008666999301539  4.008490265217818  4.007430723039899  4.006760255371355  4.006372945036339  4.0039444968278755  4.002554198570466  4.000593339566688  3.9997680752716853  3.997975327453638  3.9958115109429193  3.9959391374820132  3.9958370800172753  3.995486687969164  3.9928201097255407  3.992352113715143  3.9892012072166567  3.987490125288864  3.9863498174715875  3.9857999477107025  
3.985023061327421  3.9848154250630836  3.9827563291637786  3.9826198409448965  3.980366572716796  3.9803600096392833  3.9796030639029856  3.978838417422911  3.9787656286172646  3.9786152402182964  3.9785337736425985  3.975658910818958  3.974466689644207  3.974298217917244  3.9730505399455627  3.972835837282476  3.9709674706348306  3.969554805386562  3.969494143136822  3.9700363888129653  
3.969022354052  3.9695367918226787  3.9695220253769588  3.9684616061016453  3.96735783360448  3.9674964791564227  3.9647035166378766  3.963216229232276  3.962980307371835  3.962060061969353  3.962363109021246  3.9617779393198864  3.961758348873434  3.960029947784026  3.9605570833317336  3.960143329989876  3.9592168821894447  3.9574217243568173  3.957296279253566  3.954917043253501  
3.9541620804399464  3.9538473856916805  3.9532412240965944  3.953197227556616  3.953364430948343  3.9526531725693252  3.9525399198621782  3.950763660416691  3.950645684384831  3.9499235711530356  3.9494373540570034  3.9496581972358693  3.949377025129714  3.9494565161786714  3.9487113732212955  3.9486770770257675  3.9489824436858414  3.948337834203722  3.948341602363992  3.947238096749853  
3.946151191519735  3.9461573694004177  3.9448536970431443  3.9445900616392224  3.945334445939109  3.9452147904071286  3.9446800665559825  3.94429024659776  3.9441597514878746  3.9441067003030583  3.943089053171916  3.9430741208875455  3.9434918950889175  3.9429758627694973  3.941563415684502  3.941063123633399  3.940542404838562  3.940320079002286  3.940499309569492  3.940474510385833  
3.9401824313778846  3.9401847345791166  3.9401757782235354  3.9400652977175867  3.939550471554761  3.937675032491675  3.9378771622669975  3.936806973443066  3.9368464574223263  3.9368661578577675  3.9374658310686743  3.9371886703873233  3.9373848791452217  3.9369357381022647  3.937044108076424  3.9373911859646307  3.937348238803224  3.936771142085427  3.9357577835201565  3.9350228918638663  
3.935130492673093  3.9361913558055366  3.9371096657199316  3.9370720351122057  3.9371145100557148  3.9370751525186467  3.9363054089225553  3.9350129366824387  3.9348294323510333  3.9337049586796162  3.9338522500039965  3.934117822954647  3.9342652935261966  3.9341344531396882  3.93433897587967  3.9345046059561963  3.934233932007067  3.933355578919314  3.9333398020346566  3.933431872406899  
3.932927060400786  3.9325309653976883  3.9335687420784473  3.933636816695109  3.9337090392688903  3.933148051396261  3.933218619154476  3.9338892180504854  3.9328972569903464  3.932774854333544  3.932647408297604  3.932627112303639  3.932929705532021  3.932493745947253  3.933346303923396  3.933605422320022  3.933761038714937  3.9335258532048925  3.9344350914484747  3.9341475648712523  
3.933579238169466  3.932891260887204  3.9333738901665307  3.9335137653960923  3.9335232130540407  3.9340927443161338  3.934086928642425  3.9338251862804436  3.9340435023570595  3.9336126829763827  3.9338476850867896  3.933850899288327  3.9340822491153333  3.9342541341383224  
--------------------------------

2020-04-01 03:08:24.313502

2011년도 빼봤음.
0.54416 

내일 그냥 2011다시 포함하고 제출해봐야겠음

item_id  dept_id  cat_id  store_id  state_id  weekday  month  year  event_name_1  
event_type_1  snap_CA  snap_TX  snap_WI  day  week  sell_price  rolling_mean_t7  rolling_std_t7  rolling_mean_t30  
rolling_std_t30  rolling_mean_t90  rolling_mean_t180  rolling_mean_t60  rolling_std_t60  price_change_t1  price_change_t365  rolling_price_std_t7  rolling_price_std_t30  
('boosting_type', 'gbdt')
('class_weight', None)
('colsample_bytree', 0.8)
('importance_type', 'split')
('learning_rate', 0.1)
('max_depth', -1)
('min_child_samples', 20)
('min_child_weight', 0.001)
('min_split_gain', 0.0)
('n_estimators', 400)
('n_jobs', -1)
('num_leaves', 2048)
('objective', None)
('random_state', None)
('reg_alpha', 0.0)
('reg_lambda', 0.0)
('silent', True)
('subsample', 0.8)
('subsample_for_bin', 200000)
('subsample_freq', 0)
('device', 'gpu')
12.692899095596898  11.286377111600734  10.117147654890084  9.181973683716643  8.416591365522743  7.770350356017486  7.261531542761311  6.836575736543629  6.481704823198749  6.192562160375801  5.951239769451373  5.756760311146897  5.593204468672989  5.460875116497016  5.319280939716773  5.223792291312587  5.122381430759831  5.059596261289015  4.995959626975763  
4.930398088728475  4.891663788906282  4.858308847036527  4.8269338772743815  4.7965116062015385  4.768037663069888  4.740316954388183  4.726038920000857  4.700413598628803  4.6727218567469535  4.648068810156951  4.6333259743767226  4.619593808858621  4.60503309257477  4.583994689038193  4.557383513695714  4.546614760846591  4.536850965783934  4.518675134962049  4.514173415631422  
4.50559616459598  4.496002211682277  4.489339445112711  4.475684787210508  4.456227950259473  4.447300793084298  4.440470139888441  4.433339996177534  4.420230240089597  4.4170173352308435  4.409911818767861  4.403215844641461  4.395096017291103  4.387392900724495  4.378479914818723  4.373287959268529  4.371330304692317  4.3654620074553785  4.357223688320333  4.355584820133867  
4.349357675453701  4.34690940251459  4.33239263715744  4.321583919772795  4.320795726246935  4.315658363293813  4.314328772484156  4.308037637426103  4.304319792772697  4.299917886258946  4.299785018964068  4.298624618318849  4.295571842344658  4.287926477590807  4.287286355759743  4.281025843397501  4.2791181865637995  4.276604910122672  4.2757270330511075  4.275780161964081  
4.270162644412549  4.269457379800778  4.2694386008075025  4.267083883929212  4.264453793285171  4.261810047855938  4.2584712962818365  4.257174949771895  4.256127325569743  4.254755814300689  4.25282103960085  4.2517234083662  4.251022364347326  4.245974869898605  4.243484621284325  4.242666030154356  4.242492584666957  4.240394901810938  4.239177529178308  4.238522666214121  
4.236659124819912  4.234633752628436  4.2335290204716705  4.233036222831073  4.230664115779899  4.230590389519306  4.228491633268609  4.227446191378757  4.22646510272509  4.226679385877255  4.223503064878519  4.222302563498532  4.222003379121877  4.221173496105578  4.21991397930766  4.219515901858827  4.217666694242051  4.217215598489046  4.216907466049981  4.216221977680925  
4.215261651787562  4.212802660428691  4.212851270081271  4.211938796933227  4.211006975206168  4.2087067603268995  4.207198368049429  4.206889709828557  4.204945070889246  4.2048297303110616  4.204653630445787  4.203709021888036  4.201357862557029  4.199841052383634  4.199728959916101  4.196025477704084  4.195278571683835  4.194939726734447  4.194080142932301  4.193833176501473  
4.1929489548291405  4.192255416948871  4.190530209001396  4.190820451057581  4.190626270116274  4.189287296714264  4.187701819910675  4.187307381655249  4.185932871710142  4.185217226130472  4.184541568692222  4.18313296594731  4.182424337963332  4.1825642463987025  4.182425003036268  4.182485905580875  4.179251777037229  4.178783468794817  4.17773770386979  4.177230704670973  
4.1764650061729585  4.175940939958964  4.176048466747946  4.176262785661671  4.176139807725334  4.176317318726248  4.174830051889858  4.1743437030943555  4.174317959498634  4.1732933737973195  4.172363810154124  4.172388043827248  4.171432772860316  4.171080001636603  4.169225361794941  4.168498357396742  4.1679762256897686  4.169080797240456  4.169165328811841  4.169000354527494  
4.167900131283458  4.167832605313348  4.1672845135366865  4.168513731468084  4.168375210804108  4.169605444603207  4.168897024128958  4.16742373722575  4.167645191497686  4.16770969771751  4.167447774008521  4.167406337048678  4.167636813802657  4.168481715736855  4.167794648511388  4.167387456550598  4.167464831656569  4.168165927505123  4.1683392919829  4.166748835872238  
4.166642462993253  4.166374600384342  4.165677424631153  4.166231440084504  4.166934063656882  4.167127391859719  4.167528860515094  4.1670156797849085  4.16628011932794  4.165249735402436  4.165545199024639  4.165937615895099  4.166974352073838  4.166428558583295  4.165342850420521  4.165619067807596  4.165921285861574  4.165651894670152  4.1655711289942445  4.1646329777483455  
4.164645437558272  4.1640235430340065  4.163481030219239  4.163683114593658  4.164722297684775  4.164266480034652  4.164799001024154  4.164335993902515  4.163877543954038  4.163181347292756  4.161914995647755  4.161804490081801  4.1618466622253205  4.161890021223738  4.161255635950136  4.161461212280222  4.160891220151199  4.161425230463688  4.160483638361865  4.15962230041181  
4.159681199469505  4.159771785809189  4.159461476170016  4.1590938417131715  4.158985870494337  4.158790771765657  4.158829372382755  4.158447618287853  4.157812453881776  4.15761668421577  4.15633771183485  4.1558708394377035  4.155706301055272  4.1557224431270345  4.155863488212519  4.155623250089561  4.155840152306161  4.154969822626607  4.15544412829691  4.155523411877928  
4.155155651704852  4.155077119502672  4.154677204140914  4.155150274199505  4.155414535648364  4.155825589135387  4.155684777033316  4.155393029026437  4.156041379607157  4.156107227511973  4.155728857809887  4.154986656951983  4.15457260516329  4.154523226491208  4.154439375665493  4.15442825214605  4.154412052233079  4.1539451451036635  4.1543797044582575  4.153897839625861  
4.1540944425030935  4.154446358068904  4.154614336146719  4.155355141728234  4.155138842993958  4.155606003135882  4.155580708488365  4.1558115063464784  4.1545700260957235  4.154806089718302  4.154516663104702  4.154312260819505  4.154107470362867  4.154050913524475  4.152971964855022  4.152861614999496  4.152365247818691  4.151893279696671  4.152551122156861  4.152248961695616  
4.1528735149173075  4.151939237294557  4.151969296466423  4.1522344014290935  4.151662713230237  4.151303184349698  4.151724116099285  4.152091212138746  4.151811861904108  4.151929656535969  4.152332685345321  4.152694687662481  4.152886048894782  4.1527556448116325  4.152288559362666  4.152319694283695  4.152785578319395  4.152339873880236  4.152343382750615  4.152694621780234  
4.1516800335696775  4.151877228098822  4.151879033605921  4.15170170371483  4.152143908660596  4.152323176248281  
--------------------------------
